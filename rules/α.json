{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"äºŒçº§","path":"er","rule":"js:\n/*ver 20230930 2.0\n */\nconst customs = {};\n\n//é¢„è®¾\nfunction customData(custom) {\n  Object.keys(custom).forEach((k) => {\n    customs[k] = custom[k];\n  })\n}\n\n\nlet Erji = {\n  é€šå…: $('').lazyRule(() => {\n    try {\n      var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\n      var url = html.url\n      if (html.encrypt == '1') {\n        url = unescape(url);\n      } else if (html.encrypt == '2') {\n        url = unescape(base64Decode(url));\n      }\n      if (/m3u8|mp4/.test(url)) {\n        return url\n      } else {\n        return \"video://\" + input\n      }\n    } catch (e) {\n      return \"video://\" + input\n    }\n  }),\n  evalJSRule: function (item, jsRule) {\n    let rule = jsRule.replace(\"@js:\", \"\");\n    rule = rule.trim();\n    //log($.stringify(rule))\n    let input = item;\n    if (rule.startsWith(\"(\")) {\n      eval(\"result = \" + rule);\n    } else {\n      /**\n      * è¿˜åŸæˆ $.toString(...) çš„æœ€ç»ˆç»“æœï¼Œè¾¾åˆ°æœ€ç»ˆå¤„ç†æ–¹å¼è·Ÿä¸Šé¢çš„ if ä¸€è‡´çš„ç›®çš„\n      */\n      eval(\"result = \" + \"(() => {\" + rule + \"})()\");\n    }\n    return result || \"\";\n  },\n  updataRule: function (rule, headers) {\n    headers = headers != undefined ? headers : {};\n    setLastChapterRule('js:' + $.toString((url, rule, headers) => {\n      var html = fetch(url, headers);\n      setResult(eval(rule))\n    }, MY_URL, rule, headers))\n  },\n  updataFun: function (method, params) {\n    var methodArgs = this.getArgs(method);\n    var args = methodArgs.map(function(arg) {\n      return params[arg];\n    });\n    //method.apply(null, args);\n    setLastChapterRule('js:' + $.toString((method,args) => {\n      method.apply(null, args);\n    }, method,args))\n  },\n  updata:function(args1,args2){\n      if(args1.constructor==Function){\n        return this.updataFun(args1,args2);\n      }else{\n        return this.updataRule(args1,args2);\n      }\n  },\n  getArgs:function(func){\n    var args = func.toString().match(/function\\s.*?\\(([^)]*)\\)/)[1];\n    return args.split(\",\").map(function (arg) {\n      return arg.replace(/\\/\\*.*\\*\\//, \"\").trim();\n    }).filter(function (args) {\n      return args;\n    });\n  },\n  maxList: (arr) => { \n    return arr.reduce((acc, curr) => (curr.length > acc.length ? curr : acc), []) \n  },\n  close: function (list, sorts) {\n    addListener('onClose', $.toString((list, sorts) => {\n      list.map(x => {\n        clearMyVar('er_' + x + 'fold');\n        clearMyVar('er_' + x);\n      })\n      for (let i = 0; i < sorts; i++) {\n        clearMyVar('playlist_' + i);\n      }\n      clearMyVar('er_playlists');\n    }, list, sorts))\n  },\n  dataConvert: function (data) {\n    var newclslist = data.map(function (obj) {\n      var newObj = Object.assign({}, obj);\n      if (newObj.hasOwnProperty('type')) {\n        newObj.col_type = newObj.type;\n      }\n      return newObj;\n    });\n    return newclslist;\n  },\n  preLoad: function (func) {\n    let myfunc = null\n    if (func != undefined && func.constructor == Function) {\n      myfunc = func\n    }\n    $.extend({\n      dataConvert: this.dataConvert,\n      msm: Methods.MultiSelectMode,\n      func: myfunc,\n    })\n  },\n  small: function (str, color,h) {\n    h=h==undefined?true:h;\n    return (h?'â€œâ€œâ€â€':'')+'<small><font color=\"' + (color || '') + '\">' + str + '</font></small>';\n  },\n  å£°æ˜: function () {\n    d.push({\n      title: this.small('ä»¥ä¸Šæ•°æ®æ¥æºäºç½‘ç»œï¼Œå¦‚æ‚¨å–œæ¬¢ï¼Œè¯·æ”¯æŒå®˜æ–¹ï¼', '#871F78'),\n      desc: this.small('æ­¤è§„åˆ™ä»…é™å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·äºå¯¼å…¥å24å°æ—¶å†…åˆ é™¤ï¼Œä»»ä½•ç»„ç»‡æˆ–ä¸ªäººä¸å¾—ä»¥ä»»ä½•æ–¹å¼æ–¹æ³•ä¼ æ’­æ­¤è§„åˆ™çš„æ•´ä½“æˆ–éƒ¨åˆ†ï¼', '#F20C00'),\n      url: 'hiker://empty',\n      col_type: 'text_center_1'\n    });\n  },\n  substr: function (str, maxLength) {\n    let len = 0;\n    for (let i = 0; i < str.length; i++) {\n      if (str.charCodeAt(i) > 255) {\n        len += 2;\n      } else {\n        len++;\n      }\n      if (len > maxLength) {\n        return str.slice(0, i) + '...';\n      }\n    }\n    return str;\n  },\n  setDesc: function (desc, num) {\n    var custom = this.getPreset();\n    desc = desc.constructor == Array ? desc.join('<br>') : desc;\n    if (desc.replace(/(<br>|\\s+)/g, '').length == 0) {\n      return\n    }\n    var info = storage0.getMyVar('er_info', '{}')\n    if (info['desc'] != undefined) {\n      info['desc'] = info['desc'] + ' ç®€ä»‹:' + desc;\n      storage0.putMyVar('er_info', info);\n    }\n\n    const mark = 'desc';\n    num = typeof (num) == 'undefined' ? 100 : num\n    desc = desc.startsWith('ã€€ã€€') ? desc : 'ã€€ã€€' + desc;\n    desc = desc.replace(/'/g, \"&#39;\");\n    desc = desc.replace(/\\r\\n/g, \"<br>\");\n\n\n    let sdesc = this.substr(desc, num);\n\n    var colors = {\n      show: custom.ç®€ä»‹å±•å¼€,\n      hide: custom.ç®€ä»‹æ”¶èµ·\n    }\n\n    var lazy = $(`#noLoading#`).lazyRule((dc, sdc, m, cs) => {\n      var show = storage0.getItem(m, '0');\n      var title = findItem('desc').title;\n      var re = /(<\\/small><br>.*?>).+/g;\n      var exp = 'å±•å¼€:';\n      var ret = 'æ”¶èµ·:';\n      if (show == '1') {\n        updateItem('desc', {\n          title: title\n            .replace(ret, exp)\n            .replace(re, '$1' + sdc + '</small>')\n            .replace(/(<\\/small><br>\\<font color=\").*?(\">)/, '$1' + cs.hide + '$2')\n\n        })\n        storage0.setItem(m, '0');\n      } else {\n        updateItem('desc', {\n          title: title\n            .replace(exp, ret)\n            .replace(re, '$1' + dc + '</small>')\n            .replace(/(<\\/small><br>\\<font color=\").*?(\">)/, '$1' + cs.show + '$2')\n        })\n        storage0.setItem(m, '1');\n      }\n      return `hiker://empty`\n    }, desc, sdesc, mark, colors)\n    var sc = storage0.getItem(mark, '0') == '0' ? 'å±•å¼€:' : 'æ”¶èµ·:';\n    var dc = storage0.getItem(mark, '0') == '0' ? sdesc : desc;\n    var cs = storage0.getItem(mark, '0') == '0' ? colors.hide : colors.show;\n    d.push({\n      title: '' + '<b><font color=\"#098AC1\">âˆ·å‰§æƒ…ç®€ä»‹\t</font></b>' + \"<small><a style='text-decoration: none;' href='\" + lazy + \"'>\" + sc + '</a></small><br><font color=\"' + cs + '\">' + `${dc}` + '</small>',\n      col_type: 'rich_text',\n      extra: {\n        id: 'desc',\n        lineSpacing: 6,\n        textSize: 15,\n        lineVisible: true,\n      }\n    })\n  },\n  setDesc2: function (desc, num) {\n    var custom = this.getPreset();\n    desc = desc.constructor == Array ? desc.join('<br>') : desc;\n    if (desc.replace(/(<br>|\\s+)/g, '').length == 0) {\n      return\n    }\n    var info = storage0.getMyVar('er_info', '{}')\n    if (info['desc'] != undefined) {\n      info['desc'] = info['desc'] + ' ç®€ä»‹:' + desc;\n      storage0.putMyVar('er_info', info);\n    }\n\n    const mark = 'desc';\n    num = typeof (num) == 'undefined' ? 100 : num\n    desc = desc.startsWith('ã€€ã€€') ? desc : 'ã€€ã€€' + desc;\n    desc = desc.replace(/'/g, \"&#39;\");\n    desc = desc.replace(/\\r\\n/g, \"<br>\");\n\n    let sdesc = this.substr(desc, num);\n\n    var colors = {\n      show: custom.ç®€ä»‹å±•å¼€,\n      hide: custom.ç®€ä»‹æ”¶èµ·\n    }\n    d.push({\n      title: 'å‰§æƒ…ç®€ä»‹<span style=\"color:#ff0000;\"><b><small>' + (storage0.getItem(mark, '0')=='0'?'å±•å¼€':'æ”¶èµ·') + '</small></b></span>:',\n      col_type: 'avatar',\n      img: 'https://hikerfans.com/tubiao/system/75.png',\n      url: $('#noLoading#').lazyRule((mark,dc, sdc,cs) => {\n        var ds = storage0.getItem(mark, '0');\n        var title = findItem('dshow').title;\n        var dtitle = findItem('dcontent').title;\n        if (ds == '0') {\n          storage0.setItem(mark, '1')\n          updateItem('dcontent', {\n            title: dtitle.replace(/\\>.*?\\</,'>'+dc+'<')\n            .replace(/(color=\").*?(\")/,'$1'+cs.show+'$2')\n          });\n          updateItem('dshow', {\n            title: title.replace('å±•å¼€', 'æ”¶èµ·')                        \n          });\n\n\n        } else {\n          storage0.setItem(mark, '0')\n          updateItem('dcontent', {\n            title: dtitle.replace(/\\>.*?\\</,'>'+sdc+'<')\n            .replace(/(color=\").*?(\")/,'$1'+cs.hide+'$2')\n          });\n          updateItem('dshow', {\n            title: title.replace('æ”¶èµ·', 'å±•å¼€')                        \n          });\n        }\n        return 'hiker://empty'\n      },mark, desc, sdesc,colors),\n      extra: {\n        id: 'dshow',\n      }\n    })\n    var sc=storage0.getItem(mark, '0') == '0' ? sdesc.fontcolor(colors.hide) : desc.fontcolor(colors.show);\n    d.push({\n      title:sc,\n      col_type: 'rich_text',\n      extra: {\n        id: 'dcontent',\n        lineSpacing: 6,\n        textSize: 15,\n        lineVisible: true,\n      }\n    })\n  },\n  strConvert:function(arr, sp) {\n      sp = sp != undefined ? sp : '/';\n      var reg = new RegExp(sp);\n\n      return arr.map(x => {\n        str = x;\n        if (reg.test(str)) {\n          str = str.split(sp).map((val, index) => (index === 0 ? '' : '') + val).slice(0, 5).join(' ').replace(/ $/, '');\n        }\n        return str\n      })\n  },\n  setContent: function (obj) {\n    //log(obj)\n    var custom = this.getPreset();\n    var num = obj.num != undefined ? obj.num : 100;\n    var contents = obj.main;\n    if (contents.constructor == String) {\n      contents = contents.split('\\n');\n    }\n    var sortOrder = obj.sort ? obj.sort : [];\n    var filterlist = obj.filist ? obj.filist : [];\n    var img = obj.img;\n    var texts = contents.map(x => {\n      if (x.includes('href')) {\n        var list = pdfa(x, 'body&&a').map(k => pdfh(k, 'Text')).slice(0, 5).join(' ');\n        if (list == '') {\n          return pdfh(x, 'Text');\n        } else {\n          return pdfh(x, ':matchText&&Text') + list;\n        }\n      }\n      return pdfh(x, 'Text');\n    });\n    var array = texts.sort((a, b) => {\n      const indexA = sortOrder.indexOf(a.substr(0, 2));\n      const indexB = sortOrder.indexOf(b.substr(0, 2));\n      return indexA - indexB;\n    })\n    var regex = new RegExp('(' + sortOrder.join('|') + ')');\n    array = array.filter(function (item) {\n      return regex.test(item);\n    });\n\n    var fireg = new RegExp('(' + filterlist.join('|') + ')');\n    if (filterlist.length > 0) {\n      array = array.filter(function (item) {\n        return !fireg.test(item);\n      });\n    }\n    //log(array)\n\n    //array = sortOrder.length==0?array:this.strConvert(array);\n    array = this.strConvert(array, obj.sp);\n\n    if (array.length > 6) {\n      array = array.slice(0, 6);\n    }\n\n    var titles = [];\n    var descs = [];\n\n    switch (array.length) {\n      case 2:\n        titles = array[0];\n        descs = array[1];\n        break;\n      case 3:\n        titles = array.slice(0, 1);\n        descs = array.slice(1);\n        break;\n      case 4:\n      case 5:\n        titles = array.slice(0, 2);\n        descs = array.slice(2);\n        break;\n      case 6:\n      default:\n        titles = array.slice(0, 3);\n        descs = array.slice(3);\n        break;\n    }\n    storage0.putMyVar('er_info', {\n      desc: descs.join('\\n'),\n      img: img,\n    })\n    d.push({\n      title: '<b>'+titles[0].fontcolor(custom.æ ‡é¢˜é¢œè‰²)+'</b>'+this.small( '\\n' + titles.slice(1, 3).join('\\n'), custom.æè¿°ä¸Š),\n      desc: this.small(descs.join('\\n'), custom.æè¿°ä¸‹),\n      pic_url: img + '@Referer=',\n      url: MY_URL,\n      col_type: 'movie_1_vertical_pic_blur',\n      extra: {\n        id: \"detailid\",\n        gradient: obj.æ¸å˜ ? obj.æ¸å˜ : false,\n      }\n    })\n    if (obj.desc != undefined) {\n      this.setDesc(obj.desc, num);\n    }\n  },\n  setCustom: function (obj, img,colors) {\n    var array = [];\n    if (obj.constructor == Array) {\n      array = obj;\n    }\n    var titles = [];\n    var descs = [];\n    if('titles' in obj){\n      titles=obj.titles;\n    }\n    if('descs' in obj){\n      descs=obj.descs;\n    }\n    \n    if(titles.length==0&&descs.length==0){\n    array = this.strConvert(array);\n    switch (array.length) {\n      case 2:\n        titles = array[0];\n        descs = array[1];\n        break;\n      case 3:\n        titles = array.slice(0, 1);\n        descs = array.slice(1);\n        break;\n      case 4:\n      case 5:\n        titles = array.slice(0, 2);\n        descs = array.slice(2);\n        break;\n      case 6:\n        titles = array.slice(0, 3);\n        descs = array.slice(3);\n        break;\n      }\n    }\n    \n    \n    storage0.putMyVar('er_info', {\n      desc: descs.join('\\n'),\n      img: img,\n    })\n    if (colors != undefined) {\n      var color_list=[];\n\n      for (var key in colors) {\n      var range = key.split('-');\n      var start = parseInt(range[0]);\n      var end = range[1] ? parseInt(range[1]) : start;\n      for (var i = start; i <= end; i++) {\n        color_list[i-1] = colors[key];\n        }\n      }\n\n      \n      if(color_list!=titles.length+descs.length){\n        const fillCount = (titles.length+descs.length) - color_list.length; // éœ€è¦è¡¥é½çš„ä¸ªæ•°\n        const filledArr = Array(fillCount).fill({}); // ç”Ÿæˆå¡«å……æ•°ç»„\n        color_list=color_list.concat(filledArr);\n      }\n  \n      var midIndex = Math.floor(color_list.length / 2); \n      var firstHalf = color_list.slice(0, midIndex);\n      var secondHalf = color_list.slice(midIndex);\n           \n      function textArray(style,textArray) {\n        var list=[];\n        style.forEach((x, i) => {\n        var left = [];\n        var right = [];\n        var str = textArray[i];\n        Object.keys(x).forEach(k => {\n            switch (k) {\n                case 'color':\n                    left.push('<font color=\"' + x[k] + '\">');\n                    right.push('</font>');\n                    break;\n                default:\n                    left.push(`<${k}>`);\n                    right.push(`</${k}>`);\n                break;\n                }\n              });\n             list[i] = left.join('') + str + right.join('');\n          });\n        return list;\n      }\n      titles=textArray(firstHalf,titles);\n      descs=textArray(secondHalf,descs);\n      \n      d.push({\n        title:'â€œâ€œâ€â€'+titles[0]+'\\n'+titles.slice(1,3).join('\\n'),\n        desc:'â€œâ€œâ€â€'+descs.join('\\n'),\n        img:img+'@Referer='+img,\n        url:MY_URL,\n        col_type:'movie_1_vertical_pic_blur',\n        extra:{\n          id:\"detailid\",\n        }\n      })\n      \n    } else {\n      d.push({\n        title: titles[0] + '\\n' + this.small(titles.slice(1, 3).join('\\n')),\n        desc: this.small(descs.join('\\n')),\n        pic_url: img + '@Referer=',\n        url: MY_URL,\n        col_type: 'movie_1_vertical_pic_blur',\n        extra:{\n          id: \"detailid\",\n        }\n      })\n  }\n  },\n  isColor: function (text) {\n    const regex = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$|^([a-z]+)$/i;\n    return regex.test(text);\n  },\n  getPreset: function (custom) {\n    if (typeof customs == 'object' && !custom) {\n      custom = customs;\n    } else {\n      custom = custom ? custom : {}\n    }\n    custom.æ­£åºé¢œè‰² = (custom.æ­£åºé¢œè‰² && this.isColor(custom.æ­£åºé¢œè‰²)) ? custom.æ­£åºé¢œè‰² : '#1AAD19';\n    custom.é€†åºé¢œè‰² = (custom.é€†åºé¢œè‰² && this.isColor(custom.é€†åºé¢œè‰²)) ? custom.é€†åºé¢œè‰² : '#FF0000';\n    custom.å›¾æ ‡ = custom.å›¾æ ‡ ? custom.å›¾æ ‡ : 'https://i2.100024.xyz/2023/06/10/h4z627.webp';\n    custom.çº¿è·¯é€‰ä¸­ = custom.çº¿è·¯é€‰ä¸­ ? custom.çº¿è·¯é€‰ä¸­ : '#008B8B';\n    custom.çº¿è·¯æ ·å¼ = custom.çº¿è·¯æ ·å¼ ? custom.çº¿è·¯æ ·å¼ : 'scroll_button';\n    custom.åˆ†å‰²æ ·å¼ = custom.åˆ†å‰²æ ·å¼ ? custom.åˆ†å‰²æ ·å¼ : 'blank_block';\n    custom.ç®€ä»‹å±•å¼€ = custom.ç®€ä»‹å±•å¼€ ? custom.ç®€ä»‹å±•å¼€ : 'black';\n    custom.ç®€ä»‹æ”¶èµ· = custom.ç®€ä»‹æ”¶èµ· ? custom.ç®€ä»‹æ”¶èµ· : 'grey';\n    Object.assign({}, customs, custom);\n    //log(custom)\n    return custom;\n  },\n  createPList: function (tabs, vari, shsort, custom, parse) {\n    vari = \"er_\" + vari;\n    let stabs = tabs;\n    tabs = tabs.map(x => x.title!=undefined?x.title:x);\n    var info = { parse: parse, mark: shsort };\n    if (stabs.some(x => x.hasOwnProperty('url'))) {\n      info['urls'] = stabs.map(x => x.url);\n    }\n\n    for (var i = 0; i < tabs.length; i++) {\n      var url = $('#noLoading#').lazyRule((vari, shsort, i, linec, info) => {\n\n        var lists = storage0.getMyVar(shsort + '_list', '[]');\n\n        if (getMyVar(vari + 'fold', '1') == '0') {\n          var btn = findItem(shsort + '_button');\n          var folds = ['<font color=\"#D3D3D3\">â˜·', '<font color=\"#FFA500\">â˜°'];\n          var plist = storage0.getMyVar('er_playlists', '{}');\n\n          var col = plist[shsort].col_type;\n          var cls = plist[shsort].cls;\n          var pic = plist[shsort].pic;\n          var extra = plist[shsort].extra;\n          //log(extra)\n          updateItem(btn.extra.id, {\n            title: btn.title.replace(folds[0], folds[1]),\n          })\n\n          putMyVar(vari + 'fold', '1');\n          //return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\n        } else {\n          var plist = storage0.getMyVar('er_playlists', '{}');\n\n          var col = plist[shsort].col_type;\n          var cls = plist[shsort].cls;\n          var pic = plist[shsort].pic;\n          var extra = plist[shsort].extra;\n          //log(extra)\n        }\n        putMyVar(vari, i);\n\n        var xlist = lists[i];\n        if ($.func != undefined && $.func.constructor == Function) {\n          deleteItemByCls(shsort);\n          addItemAfter(shsort + '_line', {\n            col_type: 'pic_1',\n            img: 'https://img.nickyam.com/file/fe41a7a1744a3a8194df2.gif',\n            url: 'toast://loading',\n            extra: {\n              cls: shsort\n            }\n          })\n          xlist = $.func(i, info);\n          storage0.putMyVar(shsort + '_list', xlist);\n        }\n        var plays = xlist.map(x => {\n          return {\n            title: x.title,\n            url: x.url,\n            col_type: col,\n            pic: pic,\n            extra: Object.assign({}, extra, {\n              id: x.url.replace(/@lazyRule[\\s\\S]+/g, ''),\n              cls: cls,\n            })\n          }\n        })\n        if (getMyVar(shsort + '_sort') == '1') {\n          plays.reverse();\n        }\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n        if (pcfg['å•æ¨']) {\n          updateItem(shsort + '_push', {\n            title: pcfg['obj']['å•æ¨'][0]\n          })\n          pcfg['å•æ¨'] = false;\n        }\n        if (pcfg['é€‰æ¨']) {\n          updateItem(shsort + '_pushs', {\n            title: pcfg['obj']['é€‰æ¨'][0]\n          })\n          pcfg['é€‰æ¨'] = false;\n        }\n        storage0.putMyVar(shsort + '_pushcfg', pcfg);\n        deleteItemByCls(shsort);\n        addItemAfter(shsort + '_line', plays);\n\n        var tabx = findItemsByCls(shsort + '_tab');\n        tabx.forEach((x, ii) => {\n          var title = x.title;\n          if (i == ii) {\n            updateItem(x.extra.id, {\n              title: title.replace(/#(\\w+)?/g, linec),\n            })\n          } else {\n            updateItem(x.extra.id, {\n              title: title.replace(/#(\\w+)?/g, '#'),\n            })\n          }\n        })\n        return 'toast://åˆ‡æ¢æˆåŠŸï¼';\n      }, vari, shsort, i, custom.çº¿è·¯é€‰ä¸­, info)\n      d.push({\n        title: 'â€œâ€œâ€â€' + (getMyVar(vari, '0') == i ? tabs[i].fontcolor(custom.çº¿è·¯é€‰ä¸­) : tabs[i].fontcolor('#')),\n        url: url,\n        col_type: custom.çº¿è·¯æ ·å¼,\n        extra: {\n          cls: shsort + '_tab',\n          id: shsort + '_tab_' + i,\n        }\n      })\n    }\n    d.push({\n      col_type: custom.åˆ†å‰²æ ·å¼,\n      extra: {\n        id: shsort + '_line',\n      }\n    })\n  },\n  pushTab: function (vari, shsort) {\n    addListener('onRefresh', $.toString((shsort) => {\n      clearMyVar(shsort + '_pushcfg');\n      clearMyVar(shsort + '_duoselect');\n    }, shsort))\n    var pobj = {\n      'å•æ¨': ['â¦¿å•æ¨', '<b>â¦¿å•æ¨</b>'.fontcolor('#00FA9A')],\n      'é€‰æ¨': ['â˜‘é€‰æ¨', '<b>â˜‘é€‰æ¨</b>'.fontcolor('#4682B4')],\n    }\n\n    d.push({\n      title: 'âŒ˜',\n      col_type: 'scroll_button',\n      url: 'hiker://empty',\n      extra: {\n        cls: shsort + '_pushtab',\n      }\n    }, {\n      title: pobj['å•æ¨'][0],\n      col_type: 'scroll_button',\n      url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\n        if (getMyVar(vari + 'fold', '1') == '0') {\n          return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\n        }\n\n        var titles = pobj['å•æ¨'];\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n        pcfg['obj'] = pobj;\n        var å•æ¨ = pcfg['å•æ¨'] ? pcfg['å•æ¨'] : false;\n\n        if (å•æ¨) {\n          updateItem(shsort + '_push', {\n            title: titles[0],\n          })\n          pcfg['å•æ¨'] = false;\n          pcfg['playlist'].map((x) => {\n            updateItem(x.extra.id, {\n              url: x.url,\n            })\n          })\n        } else {\n          updateItem(shsort + '_push', {\n            title: 'â€œâ€œâ€â€' + titles[1],\n          })\n          updateItem(shsort + '_pushs', {\n            title: pobj['é€‰æ¨'][0],\n          })\n          pcfg['å•æ¨'] = true;\n          pcfg['é€‰æ¨'] = false;\n          var playlist = findItemsByCls(shsort);\n          pcfg['playlist'] = playlist;\n          findItemsByCls(shsort).map(x => {\n            var dpush = {\n              name: getPageTitle(),\n              url: x.title + '$' + x.extra.id\n            }\n            updateItem(x.extra.id, {\n              url: $('').lazyRule((dpush) => {\n                return 'hiker://page/push?rule=XYQæ¨é€&pushurl=' + encodeURIComponent(JSON.stringify(dpush));\n              }, dpush)\n            })\n          })\n        }\n        storage0.putMyVar(shsort + '_pushcfg', pcfg);\n        return 'toast://' + (!å•æ¨ ? 'å•æ¨å¼€å¯' : 'å•æ¨å…³é—­');\n      }, shsort, pobj, vari),\n      extra: {\n        id: shsort + '_push',\n        cls: shsort + '_pushtab',\n      }\n    }, {\n      title: pobj['é€‰æ¨'][0],\n      col_type: 'scroll_button',\n      url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\n        if (getMyVar(vari + 'fold', '1') == '0') {\n          return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\n        }\n        var titles = pobj['é€‰æ¨'];\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n        pcfg['obj'] = pobj;\n        var é€‰æ¨ = pcfg['é€‰æ¨'] ? pcfg['é€‰æ¨'] : false;\n        if (é€‰æ¨) {\n          updateItem(shsort + '_pushs', {\n            title: titles[0],\n          })\n          pcfg['é€‰æ¨'] = false;\n          pcfg['playlist'].map((x) => {\n            updateItem(x.extra.id, {\n              title: x.title,\n              url: x.url,\n            })\n          })\n          updateItem(shsort + '_pushto', {\n            title: 'æ¨é€æœ¬é¡µ=>TVBox',\n          });\n          clearMyVar(shsort + '_duoselect');\n        } else {\n          updateItem(shsort + '_pushs', {\n            title: 'â€œâ€œâ€â€' + titles[1],\n          })\n          pcfg['é€‰æ¨'] = true;\n          pcfg['å•æ¨'] = false;\n          var playlist = findItemsByCls(shsort);\n          pcfg['playlist'] = playlist;\n          let Ids = playlist.map(it => it.extra.id);\n          Ids.forEach(x => {\n            var title = findItem(x).title;\n            updateItem(x, {\n              url: $.msm(title, x, shsort),\n            });\n          });\n          updateItem(shsort + '_push', {\n            title: pobj['å•æ¨'][0],\n          })\n          updateItem(shsort + '_pushto', {\n            title: 'æ¨é€é€‰ä¸­=>TVBox',\n          });\n        }\n        storage0.putMyVar(shsort + '_pushcfg', pcfg);\n        return 'toast://' + (!é€‰æ¨ ? 'é€‰æ¨å¼€å¯' : 'é€‰æ¨å…³é—­');\n      }, shsort, pobj, vari),\n      extra: {\n        id: shsort + '_pushs',\n        cls: shsort + '_pushtab'\n      }\n    }, {\n      title: \"æ¨é€æœ¬é¡µ=>TVBox\",\n      col_type: 'scroll_button',\n      url: $('#noLoading#').lazyRule((shsort, vari) => {\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n        var å•æ¨ = pcfg['å•æ¨'] ? pcfg['å•æ¨'] : false;\n        var é€‰æ¨ = pcfg['é€‰æ¨'] ? pcfg['é€‰æ¨'] : false;\n        if (!å•æ¨ && !é€‰æ¨) {\n          var tabs = storage0.getMyVar(shsort + '_tabs', '[]');\n          try {\n            var pls = storage0.getMyVar(shsort + '_list', '[]').map(li => {\n              return li.map(item => item.title + '$' + item.url.replace(/@lazyRule[\\s\\S]+/g, '')).join('#')\n            }).join('$$$');\n          } catch (e) {\n            var pls = storage0.getMyVar(shsort + \"_list\", '[]').map(x => x.title + \"$\" + x.url.replace(/@lazyRule[\\s\\S]+/g, '')).join(\"#\");\n            var tabs = [tabs[getMyVar(vari, '0')]];\n          }\n          //log(pls)\n          //log(tabs)\n        }\n        if (é€‰æ¨) {\n          var pls = storage0.getMyVar(shsort + \"_duoselect\", '[]').map(x => x.title + \"$\" + x.url).join(\"#\");\n          if (pls.length == 0) {\n            return 'toast://é€‰æ‹©ä¸ºç©º';\n          }\n          var tabs = ['æ’­æ”¾åˆ—è¡¨'];\n        }\n\n        var info = storage0.getMyVar('er_info', '{}');\n        var desc = info['desc'];\n        var æ¨é€ = {\n          \"name\": getPageTitle(),\n          \"content\": desc || '',\n          \"pic\": info['img'] || '',\n          \"from\": tabs.join('$$$'),\n          \"url\": pls,\n        }\n        //log(æ¨é€)\n        return \"hiker://page/push?rule=XYQæ¨é€&pushurl=\" + encodeURIComponent(JSON.stringify(æ¨é€))\n      }, shsort, vari),\n      extra: {\n        id: shsort + '_pushto',\n        cls: shsort + '_pushtab'\n      }\n    }, {\n      col_type: 'blank_block',\n      extra: {\n        cls: shsort + '_pushtab',\n      }\n    })\n  },\n  setLongclick: function (shsort, custom) {\n    return [{\n      title: 'æ ·å¼ğŸ¨',\n      js: $.toString((shsort) => {\n        let all_cols = [''].concat(getColTypes());\n        all_cols = all_cols.filter(x =>\n          /(text_|flex).*/.test(x) && x != 'text_icon');\n        //log(all_cols)\n        let cls = storage0.getMyVar('er_playlists', '{}') ||\n          '';\n        if (cls[shsort] != '') {\n          col = cls[shsort].col_type;\n        }\n        let æŒ‰é’®æ ·å¼ = all_cols.map((it) => {\n          return it === col ? 'â¡ï¸' + it : it;\n        });\n        let tips = 'è¯·é€‰æ‹©é€‰é›†æŒ‰é’®æ ·å¼';\n        return $(æŒ‰é’®æ ·å¼, 2, tips).select((shsort, cls) => {\n          input = input.replace(/â¡ï¸/g, '');\n          /*storage0.setItem('æŒ‰é’®æ ·å¼', input);*/\n          let oldIds = (findItemsByCls(shsort) || []).map(it => it.extra.id); //è€å…ƒç´ ids\n          oldIds.forEach(x => {\n            updateItem(x, {\n              col_type: input\n            });\n          });\n          return 'toast://å·²åˆ‡æ¢é€‰é›†æŒ‰é’®æ ·å¼ä¸º:' + input;\n        }, shsort, cls);\n      }, shsort, custom)\n    }]\n  },\n  setTabs: function (tabs, vari, shsort, parse) {\n    let custom = parse.è‡ªå®šä¹‰;\n    let stabs = tabs;\n    tabs = tabs.map(x => x.title!=undefined?x.title:x);\n\n    custom = this.getPreset(custom);\n\n    shsort = shsort ? shsort : 'shsort';\n    var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\"color: ' + custom.é€†åºé¢œè‰² + '\">é€†åº</span></b>' : '<b><span style=\"color: ' + custom.æ­£åºé¢œè‰² + '\">æ­£åº</span></b>'\n    \n    d.push({\n      title: vari + ':' + title,\n      desc: 'å…±' + String(tabs.length).fontcolor('#4682B4') + 'æ¡çº¿è·¯',\n      url: $('#noLoading#').lazyRule((shsort, vari, custom) => {\n        let conf = getMyVar(shsort + '_sort', '0');\n        if (getMyVar('er_' + vari + 'fold', '1') == '0') {\n          return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\n        }\n        var clslists = findItemsByCls(shsort);\n        var newclslist = $.dataConvert(clslists);\n\n        var titles = [`${custom.æ­£åºé¢œè‰²}\">æ­£åº`, `${custom.é€†åºé¢œè‰²}\">é€†åº`];\n\n        deleteItemByCls(shsort);\n        newclslist.reverse();\n        addItemAfter(shsort + '_line', newclslist);\n\n        var obj = findItem(shsort + '_avatar')\n\n        if (conf == '1') {\n          updateItem(shsort + '_avatar', {\n            title: obj.title.replace(titles[1], titles[0]),\n          })\n          putMyVar(shsort + '_sort', '0');\n        } else {\n          updateItem(shsort + '_avatar', {\n            title: obj.title.replace(titles[0], titles[1]),\n          })\n          putMyVar(shsort + '_sort', '1');\n        }\n        return 'toast://åˆ‡æ¢æ’åºæˆåŠŸ';\n      }, shsort, vari, custom),\n      col_type: 'avatar',\n      img: custom.å›¾æ ‡,\n      extra: {\n        id: shsort + '_avatar',\n        longClick: this.setLongclick(shsort),\n      }\n    })\n    var æŠ˜å  = 'â€œâ€œâ€â€<b>' + 'â˜·'.fontcolor(\"#D3D3D3\");\n    var å±•å¼€ = 'â€œâ€œâ€â€<b>' + 'â˜°'.fontcolor(\"#FFA500\");\n    var foldname = 'er_' + vari + 'fold';\n    var fold = getMyVar(foldname, '1');\n    if (typeof (parse['æ¨é€']) != 'undefined' && parse['æ¨é€'])\n      this.pushTab('er_' + vari, shsort);\n\n    d.push({\n      title: fold === '0' ? æŠ˜å  : å±•å¼€,\n      col_type: custom.çº¿è·¯æ ·å¼,\n      url: $('#noLoading#').lazyRule((foldname, shsort) => {\n        var fold = getMyVar(foldname, '1');\n        var obj = findItem(shsort + '_line');\n        var btn = findItem(shsort + '_button');\n        var folds = ['<font color=\"#D3D3D3\">â˜·', '<font color=\"#FFA500\">â˜°'];\n\n        if (fold == '0') {\n          putMyVar(foldname, '1');\n          var cs = storage0.getMyVar(shsort + '_cls');\n          addItemAfter(obj.extra.id, cs);\n          updateItem(btn.extra.id, {\n            title: btn.title.replace(folds[0], folds[1]),\n          })\n        }\n        if (fold == '1') {\n          putMyVar(foldname, '0');\n          var pcls = findItemsByCls(shsort);\n          var cx = $.dataConvert(pcls);\n          storage0.putMyVar(shsort + '_cls', cx);\n          deleteItemByCls(shsort);\n          updateItem(btn.extra.id, {\n            title: btn.title.replace(folds[1], folds[0]),\n          })\n        }\n\n        return 'toast://' + (fold === '1' ? 'æ”¶èµ·' : 'å±•å¼€');\n      }, foldname, shsort),\n      extra: {\n        id: shsort + '_button',\n      }\n    })\n    this.createPList(stabs, vari, shsort, custom, parse);\n  },\n  setTabs2: function (tabs, vari, shsort, parse, exp) {\n    let custom = parse.è‡ªå®šä¹‰;\n    let stabs = tabs;\n    tabs = tabs.map(x => x.title!=undefined?x.title:x);\n    custom = this.getPreset(custom);\n    shsort = shsort ? shsort : 'shsort';\n    var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\"color:' + custom.é€†åºé¢œè‰² + '\">é€†åº</span></b>' : '<b><span style=\"color:' + custom.æ­£åºé¢œè‰² + '\">æ­£åº</span></b>'\n\n    var æŠ˜å  = '<b>æŠ˜å ' + 'â˜·'.fontcolor(\"#D3D3D3\");\n    var å±•å¼€ = '<b>å±•å¼€' + 'â˜°'.fontcolor(\"#FFA500\");\n    var foldname = 'er_' + vari + 'fold';\n    var fold = getMyVar(foldname, '1');\n\n    var url = $('#noLoading#').lazyRule((foldname, shsort, push) => {\n      var pl = storage0.getMyVar('er_playlists', '{}');\n      if (Object.keys(pl).length == 1) {\n        return 'hiker://empty'\n      }\n\n      var fold = getMyVar(foldname, '1');\n      var obj = findItem(shsort + '_avatar')\n      if (fold == '1') {\n        var bcls = findItem(shsort + '_button');\n        var tcls = findItemsByCls(shsort + '_tab');\n        var lcls = findItem(shsort + '_line');\n\n        var pcls = findItemsByCls(shsort);\n        var cs = [bcls].concat(tcls, [lcls], pcls);\n\n        if (push) {\n          var pcls = findItemsByCls(shsort + '_pushtab');\n          cs = pcls.concat(cs);\n        }\n\n        var cx = $.dataConvert(cs);\n        storage0.putMyVar(shsort + '_cls', cx);\n        if (push) {\n          deleteItemByCls(shsort + '_pushtab');\n        }\n        deleteItem(bcls.extra.id);\n        deleteItemByCls(shsort + '_tab');\n        deleteItem(shsort + '_line');\n        deleteItemByCls(shsort);\n\n        updateItem(obj.extra.id, {\n          desc: obj.desc.replace('å±•å¼€<font color=\"#FFA500\">â˜°', 'æŠ˜å <font color=\"#D3D3D3\">â˜·'),\n        })\n      }\n      if (fold == '0') {\n        var cs = storage0.getMyVar(shsort + '_cls');\n        addItemAfter(shsort + '_avatar', cs);\n        updateItem(obj.extra.id, {\n          desc: obj.desc.replace('æŠ˜å <font color=\"#D3D3D3\">â˜·', 'å±•å¼€<font color=\"#FFA500\">â˜°'),\n        })\n      }\n      putMyVar(foldname, fold === '1' ? '0' : '1');\n      return 'toast://' + (fold === '1' ? 'æ”¶èµ·' : 'å±•å¼€');\n    }, foldname, shsort, (parse['æ¨é€'] ? true : false));\n    var desc = (fold === '0' ? æŠ˜å  : å±•å¼€) + '\\t';\n\n    if (exp.length == 1) {\n      url = 'hiker://empty';\n      desc = '';\n    }\n    d.push({\n      title: vari + ':\\t\\t' + 'å…±' + String(tabs.length).fontcolor('#4682B4') + 'æ¡çº¿è·¯',\n      desc: desc,\n      col_type: 'avatar',\n      img: custom.å›¾æ ‡,\n      url: url,\n      extra: {\n        id: shsort + '_avatar',\n        longClick: this.setLongclick(shsort),\n      }\n    })\n    if (typeof (parse['æ¨é€']) != 'undefined' && parse['æ¨é€'])\n      this.pushTab('er_' + vari, shsort);\n\n    if (fold == '0') {\n      return\n    }\n\n    d.push({\n      title: 'â€œâ€œâ€â€' + title,\n      url: $('#noLoading#').lazyRule((vari, shsort, custom) => {\n        let conf = getMyVar(shsort + '_sort', '0');\n        var clslists = findItemsByCls(shsort);\n        var newclslist = $.dataConvert(clslists);\n        deleteItemByCls(shsort);\n        newclslist.reverse();\n        addItemAfter(shsort + '_line', newclslist);\n\n        var obj = findItem(shsort + '_button')\n        var titles = [`${custom.æ­£åºé¢œè‰²}\">æ­£åº`, `${custom.é€†åºé¢œè‰²}\">é€†åº`];\n\n        if (conf == '1') {\n          updateItem(shsort + '_button', {\n            title: obj.title.replace(titles[1], titles[0]),\n          })\n          putMyVar(shsort + '_sort', '0');\n        } else {\n          updateItem(shsort + '_button', {\n            title: obj.title.replace(titles[0], titles[1]),\n          })\n          putMyVar(shsort + '_sort', '1');\n        }\n        //refreshPage()\n        return 'toast://åˆ‡æ¢æ’åºæˆåŠŸ'\n      }, vari, shsort, custom),\n      col_type: custom.çº¿è·¯æ ·å¼,\n      extra: {\n        id: shsort + '_button',\n      }\n    })\n    this.createPList(stabs, vari, shsort, custom, parse);\n  },\n  setLists: function (lists, index, shsort, parse) {\n    //log(lists)\n    shsort = shsort ? shsort : 'shsort';\n    storage0.putMyVar(shsort + '_list', lists);\n\n    parse = parse ? parse : {};\n    var æ ·å¼ = parse.æ ·å¼ ? parse.æ ·å¼ : '';\n    var å›¾æ ‡ = parse.å›¾æ ‡ ? parse.å›¾æ ‡ : 'https://hikerfans.com/tubiao/movie/13.svg';\n    var ajax = parse.åŠ¨æ€æ•°æ® ? parse.åŠ¨æ€æ•°æ® : false;\n\n    if (ajax) {\n      var list = lists;\n      if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\n        list = lists.reverse();\n      }\n    } else {\n      var list = lists[index];\n      if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\n        list = lists[index].reverse();\n      }\n    }\n\n\n\n    if (æ ·å¼ == '') {\n      æ ·å¼ = list.length > 3 ? 'text_4' : 'text_2'\n    }\n\n    var extra = '';\n\n    if (parse.extra != undefined) {\n      extra = parse.extra\n    }\n\n    if (list.length > 0) {\n      var plist = storage0.getMyVar('er_playlists', '{}');\n      if (!plist.hasOwnProperty(shsort)) {\n        plist[shsort] = {};\n      }\n      plist[shsort]['cls'] = shsort;\n      plist[shsort]['col_type'] = æ ·å¼;\n      plist[shsort]['pic'] = å›¾æ ‡;\n      plist[shsort]['extra'] = extra;\n      storage0.putMyVar('er_playlists', plist);\n    }\n\n\n\n    for (var j in list) {\n\n      let lt = {\n        title: list[j].title,\n        url: list[j].url,\n        col_type: æ ·å¼,\n        pic: å›¾æ ‡,\n        extra: {\n          id: list[j].url.replace(/@lazyRule[\\s\\S]+/g, ''),\n          cls: shsort,\n        }\n      };\n      lt['extra'] = Object.assign({}, lt['extra'], extra);\n      d.push(lt);\n    }\n  },\n  evalRe: function (input, å‡½æ•°) {\n    let result = input;\n    result = eval('input' + å‡½æ•°);\n    return result;\n  },\n  getTabs: function (parse) {\n    var tabs = [];\n    var arts = [];\n    if (typeof parse.çº¿è·¯ == 'object') {\n      arts = parse.çº¿è·¯;\n    }\n    if (arts.length == 0) {\n      arts = pdfa(html, parse.çº¿è·¯);\n    }\n    var çº¿è·¯å = parse.çº¿è·¯åç§°;\n    var çº¿è·¯é“¾æ¥ = parse.çº¿è·¯é“¾æ¥ ? parse.çº¿è·¯é“¾æ¥ : '';\n    var æ›¿æ¢å‡½æ•° = '';\n    if (parse.çº¿è·¯åç§°.includes('@@')) {\n      çº¿è·¯å = parse.çº¿è·¯åç§°.split('@@')[0];\n      æ›¿æ¢å‡½æ•° = parse.çº¿è·¯åç§°.split('@@')[1];\n    }\n    for (var i in arts) {\n      let linename = '';\n      if (çº¿è·¯å == '') {\n        linename = arts[i];\n      } else {\n        linename = pdfh(arts[i], çº¿è·¯å);\n      }\n      if (æ›¿æ¢å‡½æ•° != '') {\n        linename = this.evalRe(linename, æ›¿æ¢å‡½æ•°);\n      }\n      tabs.push({ title: linename });\n      if (çº¿è·¯é“¾æ¥ != '') {\n        tabs[i]['url'] = pd(arts[i], çº¿è·¯é“¾æ¥);\n      }\n    }\n    //log(tabs);\n    return tabs;\n  },\n  getLists: function (parse, shsort, h) {\n    html = h || html;\n    shsort = shsort ? shsort : 'shsort';\n    var lists = [];\n    var conts = [];\n    if (typeof parse.é€‰é›† == 'object') {\n      conts = parse.é€‰é›†;\n    }\n    if (conts.length == 0) {\n      try {\n        conts = pdfa(html, parse.é€‰é›†);\n      } catch {\n        toast('é€‰é›†å®šä½æœ‰è¯¯')\n      }\n    }\n\n    let æ›¿æ¢å‡½æ•° = '';\n    var é€‰é›†åç§° = parse.é€‰é›†åç§° ? parse.é€‰é›†åç§° : 'a&&Text';\n    if (é€‰é›†åç§°.includes('@@')) {\n      é€‰é›†åç§° = parse.é€‰é›†åç§°.split('@@')[0];\n      æ›¿æ¢å‡½æ•° = parse.é€‰é›†åç§°.split('@@')[1];\n    }\n\n    var é€‰é›†é“¾æ¥ = parse.é€‰é›†é“¾æ¥ ? parse.é€‰é›†é“¾æ¥ : 'a&&href';\n    var è§£æ = parse.è§£æ ? parse.è§£æ : '';\n    var temp = [];\n\n    for (var i in conts) {\n      if (parse.é€‰é›†åˆ—è¡¨ != undefined) {\n        if (parse.é€‰é›†åˆ—è¡¨ == 'object') {\n          lists.push(conts[i].map(x => {\n            return {\n              title: x.title,\n              url: x.url + è§£æ,\n            }\n          }))\n        } else {\n          lists.push(pdfa(conts[i], parse.é€‰é›†åˆ—è¡¨).map(x => {\n            return {\n              title: pdfh(x, é€‰é›†åç§°),\n              url: pd(x, é€‰é›†é“¾æ¥) + è§£æ,\n            }\n          }))\n        }\n      } else {\n        var url = pd(conts[i], é€‰é›†é“¾æ¥);\n        if (!é€‰é›†é“¾æ¥.includes('href')) {\n          url = pdfh(conts[i], é€‰é›†é“¾æ¥);\n        }\n        let title = pdfh(conts[i], é€‰é›†åç§°);\n        title = æ›¿æ¢å‡½æ•° != '' ? this.evalRe(title, æ›¿æ¢å‡½æ•°) : title;\n        temp.push({\n          title: title,\n          url: url + è§£æ,\n        })\n      }\n    }\n    let å€’åº = parse.å€’åº ? parse.å€’åº : false;\n    var results = lists.length ? lists : [temp];\n    if (å€’åº) {\n      results = results.map(x => x.reverse());\n    }\n    var plist = storage0.getMyVar('er_playlists', '{}');\n    if (results.some(x => x.length > 0)) {\n      if (!plist.hasOwnProperty(shsort)) {\n        plist[shsort] = {};\n      }\n      plist[shsort]['length'] = results.length;\n    };\n    storage0.putMyVar('er_playlists', plist);\n    return results;\n  },\n  getPlayers: function (parse, mode, func) {\n    //log(mode)\n    var play = 'er_playlist_';\n    this.preLoad(func);\n    this.close(parse.map(x => x.ç±»å‹), parse.length);\n    mode = mode ? mode : 1;\n\n    let pe = [1];\n    try {\n      pe = parse.map(x => pdfa(html, x.çº¿è·¯).length).filter(y => y > 0);\n    } catch { }\n\n\n    parse.forEach((item, i) => {\n      var tabs = [{ title: 'ä¸»çº¿' }];\n      if (item.çº¿è·¯ != undefined) {\n        tabs = this.getTabs(item);\n      }\n      putMyVar(play + i + '_tabs', tabs.map(x => x.title));\n\n      if (item.åŠ¨æ€æ•°æ®) {\n        if (mode == 1) {\n          this.setTabs(tabs, item.ç±»å‹, play + i, item);\n        } else {\n          this.setTabs2(tabs, item.ç±»å‹, play + i, item, pe);\n        }\n        putMyVar('er_html', html);\n        putMyVar('er_url', MY_URL);\n        var info = { parse: item, mark: play + i, url: MY_URL };\n        if (tabs.some(x => x.url)) {\n          info['urls'] = tabs.map(x => x.url);\n        }\n\n        var lists = func(getMyVar('er_' + item.ç±»å‹, '0'), info);\n      } else {\n        var lists = this.getLists(item, play + i);\n\n        if (lists.some(x => x.length > 0)) {\n          if (mode == 1) {\n            this.setTabs(tabs, item.ç±»å‹, play + i, item);\n          } else {\n            this.setTabs2(tabs, item.ç±»å‹, play + i, item, pe);\n          }\n        }\n      }\n      if (getMyVar('er_' + item.ç±»å‹ + 'fold', '1') == '1') {\n        this.setLists(lists, getMyVar('er_' + item.ç±»å‹, '0'), play + i, item);\n      }\n      d.push({\n        col_type: 'blank_block'\n      })\n    })\n  }\n}\n\n\nlet Methods = {\n  //å¤šé€‰æ¨¡å—\n  MultiSelectMode: function (name, id, shsort) {\n    return $('#noLoading#').lazyRule((datatitle, dataurl, shsort) => {\n      function unique(arr) {\n        const res = new Map()\n        return arr.filter((a) => !res.has(a.url) && res.set(a.url, 1))\n      }\n      let duoselect = storage0.getMyVar(shsort + \"_duoselect\") ? storage0.getMyVar(shsort + \"_duoselect\") : [];\n      if (duoselect.findIndex(x => x.url === dataurl) == -1) {\n        duoselect.push({\n          title: datatitle,\n          url: dataurl\n        })\n        duoselect = unique(duoselect)\n        updateItem(dataurl, {\n          title: `â€œâ€œâ€â€<span style=\"color:#FF5733\">` + datatitle,\n        });\n      } else {\n        function removeByValue(arr, val) {\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i]['url'] == val) {\n              arr.splice(i, 1);\n              break;\n            }\n          }\n        }\n        removeByValue(duoselect, dataurl)\n        updateItem(dataurl, {\n          title: datatitle\n        });\n      }\n      storage0.putMyVar(shsort + \"_duoselect\", duoselect);\n      return \"hiker://empty\"\n    }, name, id, shsort)\n  },\n}\n\n\n$.exports = {\n  Erji: Erji,\n}"},{"col_type":"movie_3","name":"ec-casc-list","path":"ec-casc","rule":"js:\n/*\nçŸ­è§†æ¨¡æ¿å°è£…\nver 20231113 1.0\n*/\n\nvar getRangeColors = function() {Â Â Â Â Â Â Â \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);Â Â Â Â Â \n}\neval(JSON.parse(request('hiker://page/yi?rule=Î±')).rule);\n\nvar _debug = false;\nif (typeof debug != 'undefined' && typeof debug == 'boolean') {\n    _debug = debug;\n}\n\nvar _å¼€å¯æœç´¢ = true;\nif (typeof å¼€å¯æœç´¢ != 'undefined' && typeof å¼€å¯æœç´¢ == 'boolean') {\n    _å¼€å¯æœç´¢ = å¼€å¯æœç´¢;\n}\n\nvar _åŠ¨æ€ = true;\nif (typeof åŠ¨æ€æ•°æ® != 'undefined' && typeof åŠ¨æ€æ•°æ® == 'boolean') {\n    _åŠ¨æ€ = åŠ¨æ€æ•°æ®;\n}\n\nvar _åˆ—è¡¨ = \"\";\nif (typeof åˆ—è¡¨ != 'undefined') {\n    _åˆ—è¡¨ = åˆ—è¡¨;\n}\n\nfunction moban_php(host, durl, å®šä½ä¿¡æ¯, options) {\n    var sourcename = MY_URL;\n    let çŠ¶æ€ = MY_RULE.url\n    MY_URL = durl;\n\n    var option = {\n        url: \"/index.php/api/vod\",\n    }\n    if (options != undefined) {\n        Object.keys(options).forEach(k => {\n            option[k] = options[k];\n        })\n    }\n\n    let true_url = getTruelink(MY_RULE.url, MY_URL, page);\n\n    if (option.hasOwnProperty('true_url')) {\n        true_url = option.true_url;\n    }\n\n    //log(true_url)\n    var html = fetch(true_url)\n    if (!option.hasOwnProperty('type')) {\n        option['type'] = pdfh(html, '#dataList&&data-type');\n    }\n\n    const æ¸…é™¤é”® = ['dt_class', 'dt_area', 'dt_year', 'dt_lang', 'dt_letter', 'dt_time', 'dt_version', 'dt_state'];\n    const dc = dynamicClass({\n        åˆ†ç±»é¢œè‰²: getRangeColors()\n    });\n    dc.å¼€å¯æœç´¢(_å¼€å¯æœç´¢).å¼€å¯æŠ˜å (true).æ¸…é™¤(æ¸…é™¤é”®).é¡µç (page).ç•Œé¢(d).æºç (html).çŠ¶æ€(çŠ¶æ€).åˆ›å»ºåŠ¨æ€åˆ†ç±»(å®šä½ä¿¡æ¯)\n\n    try {\n        if (pdfa(html, _åˆ—è¡¨).length != 0) {\n            return html;\n        }\n    } catch {}\n\n    if (!_åŠ¨æ€) {\n        return html;\n    }\n\n    var type = option.type;\n\n    time = '' + Math.ceil(new Date().getTime() / 1000);\n    var key = evalPrivateJS('ZMNKQE5w4HUpWH6GG0ruk+vFxGRxkgJWuahpB85warDDaR3wy9NDjNapsZkYZZhV');\n\n    //log(option)\n\n    var result = post(host + option.url, {\n        headers: {\n            Referer: MY_URL,\n        },\n        body: {\n            type: type,\n            page: page,\n            time: time,\n            key: key,\n            class: getMyVar('dt_class', ''),\n            area: getMyVar('dt_area', ''),\n            year: getMyVar('dt_year', ''),\n            lang: getMyVar('dt_lang', ''),\n            letter: getMyVar('dt_letter', ''),\n            state: getMyVar('dt_state', ''),\n            version: getMyVar('dt_version', ''),\n            by: getMyVar('dt_time', ''),\n        }\n    })\n\n    var list = [];\n    try {\n        list = JSON.parse(result);\n    } catch {}\n\n    return list\n}\n\nvar option, å®šä½;\nif (typeof options != 'undefined') {\n    option = options;\n}\n\nvar å®šä½ = [{\n    å¤§ç±»å®šä½: '.ec-casc-list&&ul,0:1',\n    //å°ç±»: 'body&&a'\n}, {\n    ä¸€çº§å®šä½: 'body&&.nav-swiper:not(:has(:matches(é¢‘é“))):has(li:nth-child(n+3))',\n    å°ç±»: 'body&&li:not(:matches(åˆ†ç±»èµ„æº|åˆ†ç±»ä¸ä»£è¡¨))',\n    //æ ‡é¢˜: 'a&&Text',\n    é“¾æ¥: '@js:' + $.toString((t) => {\n        var url = pdfh(input, 'a&&href');\n        let type = pdfh(input, 'li&&data-type');\n        let value = pdfh(input, 'li&&data-val');\n        if (value == '' && url != \"javascript:\") {\n            if (url.startsWith('javascript')) {\n                return pd(input, 'a&&href');\n            }\n            if (url.startsWith('/')) {\n                url = getHome(t) + url;\n            }\n            return url;\n        }\n        return {\n            type: type,\n            value: value\n        };\n    }, true_url)\n}, {\n    ä¸€çº§å®šä½: '.site-tabs',\n    é“¾æ¥: '@js:' + $.toString((t) => {\n        var url = pdfh(input, 'a&&href');\n        let type = 'time';\n        let value = pdfh(input, 'a&&data-type');\n        if (value == '' && url != \"javascript:\") {\n            if (url.startsWith('javascript')) {\n                return pd(input, 'a&&href');\n            }\n            if (url.startsWith('/')) {\n                url = getHome(t) + url;\n            }\n            return url;\n        }\n        return {\n            type: type,\n            value: value\n        };\n    }, true_url),\n    //å¢åŠ :['<a data-type=\"\">å…¨éƒ¨</a>'],\n    //è¡¥å……:[],\n}]\n\nif (typeof å®šä½ä¿¡æ¯ != 'undefined') {\n    å®šä½ = å®šä½ä¿¡æ¯;\n}\n\nif (typeof å¤§ç±»å®šä½ != 'undefined') {\n    å®šä½[0]['å¤§ç±»å®šä½'] = å¤§ç±»å®šä½;\n}\n\nif (typeof æ‹¼æ¥åˆ†ç±» != 'undefined') {\n    å®šä½[1]['ä¸€çº§å®šä½'] = æ‹¼æ¥åˆ†ç±»;\n}\n\nif (_debug) {\n    log('å®šä½ä¿¡æ¯');\n    log(å®šä½);\n    log('true_url')\n    log(true_url);\n    log('options')\n    log(option)\n}\n\nvar result = moban_php(getHome(true_url), true_url, å®šä½, option);"},{"col_type":"movie_3","name":"ä¸€çº§å°è£…","path":"yi","rule":"js:\n/*\nby Î±(zetalpha)\nä¸€çº§å°è£…\nåŠ¨æ€åˆ†ç±» åˆ—è¡¨åˆ›å»º è‡ªåŠ¨ä¸‹ä¸€é¡µ\nver 20231017 1.0\n*/\n\n//éšæœºé¢œè‰²\nvar getRangeColors = function() {\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);\n}\n\n//åŠ¨æ€åˆ†ç±»\nfunction dynamicClass(options) {\n    const obj = {\n        //é»˜è®¤å€¼\n        layout: \"undefined\",\n        html: \"empty\",\n        page: 0,\n        åˆ†ç±»é¢œè‰²: \"#FA7298\",\n        æŠ˜å : \"â€œâ€œâ€â€<b>\" + \"âˆ§\".fontcolor(\"#1aad19\") + \"</b>\",\n        å±•å¼€: \"â€œâ€œâ€â€<b>\" + \"âˆ¨\".fontcolor(\"#FF0000\") + \"</b>\",\n        open: true,\n        state: MY_RULE.url,\n        search: false,\n        clears: [],\n        clearall: [\"yi_firstpage\"],\n        debug: false,\n\n        é¢„è®¾(param) {\n            if (param == undefined) {\n                param = [];\n            }\n            Object.keys(param).forEach((property) => {\n                // å¯¹æ¯ä¸ªå±æ€§åæ‰§è¡Œæ“ä½œ\n                const value = param[property]; // è·å–å±æ€§å€¼\n                // åœ¨è¿™é‡Œæ‰§è¡Œæ‚¨çš„æ“ä½œ\n                this[property] = value;\n                if (this.debug) {\n                    console.log(property + \":\" + value);\n                }\n            });\n        },\n        evalJSRule(item,\n            jsRule) {\n            let rule = jsRule.replace(\"@js:\",\n                \"\");\n            rule = rule.trim();\n            //log($.stringify(rule))\n            let input = item;\n            if (rule.startsWith(\"(\")) {\n                eval(\"result = \" + rule);\n            } else {\n                /**\n                 * è¿˜åŸæˆ $.toString(...) çš„æœ€ç»ˆç»“æœï¼Œè¾¾åˆ°æœ€ç»ˆå¤„ç†æ–¹å¼è·Ÿä¸Šé¢çš„ if ä¸€è‡´çš„ç›®çš„\n                 */\n                eval(\"result = \" + \"(() => {\" + rule + \"})()\");\n            }\n            return result || \"\";\n        },\n        getTitle(src, category) {\n            let title = \"\";\n            let titleRule = category || \"a&&Text\";\n            if (titleRule.startsWith(\"@js:\")) {\n                title = this.evalJSRule(src, titleRule);\n            } else {\n                title = parseDomForHtml(src, titleRule);\n            }\n            return title || \"\";\n        },\n        getUrl(src, category) {\n            let url = \"\";\n            let urlRule = category.é“¾æ¥ || \"a&&href\";\n            if (urlRule.startsWith(\"@js:\")) {\n                url = this.evalJSRule(src, urlRule);\n            } else {\n                url = pd(src, urlRule);\n            }\n            if (typeof category.é“¾æ¥å¤„ç† == \"function\") {\n                url = category.é“¾æ¥å¤„ç†(url);\n            }\n            return url || \"\";\n        },\n        isNull(param) {\n            if (param == null) {\n                return this;\n            }\n            return false;\n        },\n        isBoolean(variable) {\n            if (typeof variable !== \"boolean\") {\n                throw new Error(\"å¼€å¯æŠ˜å è¯·ä¼ å…¥å¸ƒå°”å€¼\");\n            }\n        },\n        æ¸…é™¤(list) {\n            if (this.isNull(list)) {\n                return this;\n            }\n            if (list.constructor == String) {\n                throw new Error(\"æ¸…é™¤æŠ¥é”™:è¯·ä¼ åˆ—è¡¨\");\n            }\n            this.clears = list;\n            return this;\n        },\n        å…¨æ¸…(list) {\n            if (this.isNull(list)) {\n                return this;\n            }\n            var c = this.clearall;\n            list = c.concat(list);\n            this.clearall = list;\n            return this;\n        },\n        æºç (input) {\n            this.html = input;\n            return this;\n        },\n        ç•Œé¢(input) {\n            this.layout = input;\n            return this;\n        },\n        é¡µç (input) {\n            this.page = input;\n            return this;\n        },\n        çŠ¶æ€(input) {\n            this.state = input;\n            return this;\n        },\n        å¼€å¯æœç´¢(input) {\n            if (input == undefined) {\n                input = true;\n            }\n            this.search = input;\n            return this;\n        },\n        å¼€å¯æŠ˜å (input) {\n            if (input == undefined) {\n                input = true;\n            }\n            this.isBoolean(input);\n            this.open = input;\n            return this;\n        },\n        setTitle(k, i, t) {\n            return k == i ? \"â€œâ€œâ€â€\" + t.fontcolor(this.åˆ†ç±»é¢œè‰²) : t;\n        },\n        action(obj) {\n            return [{\n                title: \"æ¸…é™¤çŠ¶æ€\",\n                js: $.toString((obj) => {\n                    log(obj);\n                    clearMyVar(obj.state);\n                    clearMyVar(\"head.cate\");\n                    clearMyVar('cate_button');\n                    obj.all.forEach((item) => {\n                        clearMyVar(item);\n                    });\n                    obj.cl.forEach((item) => {\n                        clearMyVar(item);\n                    });\n                    refreshPage();\n                }, obj),\n            }, ];\n        },\n        checkParam() {\n            var obj = {};\n            if (this.page == 0 && typeof page == \"undefined\") {\n                throw new Error(\"è¯·ä¼ å…¥é¡µç \");\n            } else {\n                if (typeof page == \"undefined\") {\n                    obj[\"é¡µç \"] = this.page;\n                } else {\n                    obj[\"é¡µç \"] = page;\n                }\n            }\n            if (this.html == \"empty\" && typeof html == \"undefined\") {\n                throw new Error(\"è¯·ä¼ å…¥æºç \");\n            } else {\n                if (typeof html == \"undefined\") {\n                    obj[\"æºç \"] = this.html;\n                } else {\n                    obj[\"æºç \"] = html;\n                }\n            }\n            if (this.layout == \"undefined\" && typeof d == \"undefined\") {\n                throw new Error(\"è¯·ä¼ å…¥ç•Œé¢\");\n            } else {\n                if (typeof d == \"undefined\") {\n                    obj[\"ç•Œé¢\"] = this.layout;\n                } else {\n                    obj[\"ç•Œé¢\"] = d;\n                }\n            }\n            return obj;\n        },\n        åˆ›å»ºåŠ¨æ€åˆ†ç±»(ruleObj) {\n            let items = [];\n            let cates = [];\n            if (ruleObj == undefined) {\n                ruleObj = [];\n            }\n            //åˆå§‹åŒ–å˜é‡å¼€å§‹\n            const param = this.checkParam();\n            const page = param.é¡µç ;\n            const html = param.æºç ;\n            const d = param.ç•Œé¢;\n            const çŠ¶æ€ = this.state;\n            const search = this.search;\n            const empty = \"hiker://empty\";\n            const æŠ˜å çŠ¶æ€ = this.open;\n            var å±•å¼€ = this.å±•å¼€;\n            var æŠ˜å  = this.æŠ˜å ;\n            var å…¨æ¸… = this.clearall;\n            var æ¸…é™¤ = this.clears;\n            //åˆå§‹åŒ–å˜é‡ç»“æŸ\n            let init_cate = new Array(20).fill(\"0\");\n            const fold = getMyVar(MY_RULE.group, \"0\");\n            const cate_temp = JSON.parse(\n                getMyVar(\"head.cate\", JSON.stringify(init_cate))\n            );\n            if (search && page == 1) {\n                items.push({\n                    title: \"\",\n                    url: \"'hiker://search?rule=\" + MY_RULE.title + \"&s='+input\",\n                    desc: \"æœç´¢å…³é”®è¯\",\n                    col_type: \"input\",\n                    extra: {\n                        defaultValue: getMyVar(\"keyword\", \"\"),\n                        onChange: $.toString(() => {\n                            putMyVar(\"keyword\", input);\n                        }),\n                    },\n                });\n            }\n            const categories = [];\n            ruleObj.forEach((x) => {\n                var list = [];\n                //log(x)\n                if (x.json != undefined) {\n                    x.json.map(k => {\n                        categories.push(JSON.stringify(k).replace(/^\\[|\\]$/g, ''))\n                    })\n                    //categories.push(x.json)\n                }\n                if (x.ä¸€çº§å®šä½) {\n                    if (x.ä¸€çº§å®šä½.startsWith(\"@js:\")) {\n                        list = this.evalJSRule(html, x.ä¸€çº§å®šä½);\n                    } else {\n                        list = pdfa(html, x.ä¸€çº§å®šä½);\n                    }\n                }\n                if (x.å¤§ç±»å®šä½) {\n                    if (x.å¤§ç±»å®šä½.startsWith(\"@js:\")) {\n                        list = this.evalJSRule(html, x.å¤§ç±»å®šä½);\n                    } else {\n                        list = [pdfa(html, x.å¤§ç±»å®šä½).join('\\n')];\n                    }\n                }\n                //--é¢å¤–å¤„ç†--\n                if (('å¢åŠ ' in x)) {\n                    if (x.å¢åŠ .constructor == String) {\n                        x.å¢åŠ  = eval(x.å¢åŠ );\n                    }\n                    slist = x.å¢åŠ .concat(slist);\n                }\n                if (('è¡¥å……' in x)) {\n                    if (x.è¡¥å…….constructor == String) {\n                        x.è¡¥å…… = eval(x.è¡¥å……);\n                    }\n                    slist = slist.concat(x.è¡¥å……);\n                }\n                //--é¢å¤–å¤„ç†--\n                var ä¸€çº§ = list.map((s) => {\n                    var slist = [];\n                    if (!(\"å°ç±»\" in x)) {\n                        x.å°ç±» = \"body&&a:not(:matches(é¦–é¡µ)):not(a:not([href]))\";\n                    }\n                    if (x.å°ç±».startsWith(\"@js:\")) {\n                        slist = this.evalJSRule(s, x.å°ç±»);\n                    } else {\n                        slist = pdfa(s, x.å°ç±»);\n                    }\n                    var å®šä½ = slist.map((item) => {\n                        var title = this.getTitle(item, x.æ ‡é¢˜);\n                        var url = this.getUrl(item, x);\n                        var obj = {\n                            title: title,\n                            url: url\n                        };\n                        return JSON.stringify(obj);\n                    });\n                    return å®šä½;\n                });\n                //log(ä¸€çº§)\n                //log(ä¸€çº§.length)\n                if (ä¸€çº§.length == 1) {\n                    categories.push(ä¸€çº§.join(\"\\n\"));\n                } else {\n                    ä¸€çº§.forEach((item) => {\n                        categories.push(item.join(\",\"));\n                    });\n                }\n                //log(categories)\n            });\n            if (æŠ˜å çŠ¶æ€) {\n                if (page == 1) {\n                    items.push({\n                        title: fold === \"1\" ? æŠ˜å  : å±•å¼€,\n                        url: $(\"#noLoading#\").lazyRule(\n                            (title, fold, u, all, exps) => {\n                                var fold = getMyVar(MY_RULE.group, fold);\n\n                                var [å±•å¼€, æŠ˜å ] = exps;\n\n                                if (fold == 1) {\n                                    var cx = findItemsByCls(title + 'cate_button');\n                                    storage0.putMyVar('cate_button', cx);\n                                    deleteItemByCls(title + 'cate_button');\n\n                                } else {\n                                    var cx = storage0.getMyVar('cate_button', []).map(x => {\n                                        x['col_type'] = x['col_type'] ? x['col_type'] : x['type'];\n                                        return x;\n                                    });\n                                    addItemAfter(title + 'cate_line', cx)\n                                }\n\n                                /*all.forEach((item) => {\n                                  clearMyVar(item);\n                                });*/\n                                updateItem(title + 'cate_exp', {\n                                    title: fold == 1 ? å±•å¼€ : æŠ˜å ,\n                                })\n\n                                putMyVar(MY_RULE.group, fold === \"1\" ? \"0\" : \"1\");\n\n                                //refreshPage(false);\n                                return \"hiker://empty\";\n                            },\n                            MY_RULE.title,\n                            fold,\n                            çŠ¶æ€,\n                            å…¨æ¸…, [å±•å¼€,\n                                æŠ˜å \n                            ],\n                        ),\n                        col_type: \"scroll_button\",\n                        extra: {\n                            id: MY_RULE.title + 'cate_exp',\n                            longClick: this.action({\n                                state: çŠ¶æ€,\n                                all: å…¨æ¸…,\n                                cl: æ¸…é™¤,\n                            }),\n                        },\n                    });\n                }\n            }\n            if (page == 1) {\n                categories.forEach((category, index) => {\n                    //log(category)\n                    let sub_categories = [];\n                    /*if (å°ç±»å®šä½.includes(\";\")) {\n                      sub_categories = pdfa(category, å°ç±»å®šä½.split(\";\")[0]);\n                      if (sub_categories.length == 0) {\n                        sub_categories = pdfa(category, å°ç±»å®šä½.split(\";\")[1]);\n                      }\n                    } else {*/\n                    //log(index)\n                    sub_categories = JSON.parse(`[${category}]`);\n                    //log(sub_categories)\n                    // sub_categories = pdfa(category, å°ç±»å®šä½);\n                    //}\n                    if (index === 0) {\n                        //å¤§ç±»\n                        sub_categories.forEach((item, key) => {\n\n                            //let title = pdfh(item, _å¤§ç±»æ ‡é¢˜);\n                            let title = item.title;\n\n                            if (typeof æ’é™¤ != \"undefined\" && æ’é™¤ != \"\") {\n                                title = title.replace(newRegExp(æ’é™¤, \"g\"), \"\");\n                            }\n                            let json = ''\n                            json = item.url;\n\n                            let params = {\n                                cate_temp: cate_temp,\n                                key: key,\n                                page: page,\n                                clears: æ¸…é™¤,\n                                json: json,\n                                state: çŠ¶æ€,\n                                allclears: å…¨æ¸…,\n                            };\n\n                            //let url = pd(item, _å¤§ç±»é“¾æ¥);\n                            let url = item.url;\n                            /*if (å¤§ç±»å¤„ç†) {\n                              url = ä¸€çº§åˆ†ç±»å¤„ç†(url);\n                            }*/\n                            //log(url)\n                            items.push({\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\n                                col_type: \"scroll_button\",\n                                url: $(\"hiker://empty#noLoading#\").lazyRule((params) => {\n                                        let new_cate = [];\n                                        params.clears.forEach((item) => {\n                                            clearMyVar(item);\n                                        });\n                                        params.allclears.forEach((item) => {\n                                            clearMyVar(item);\n                                        });\n                                        clearMyVar('cate_button');\n\n                                        params.cate_temp.forEach((cate, index) => {\n                                            new_cate.push(index === 0 ? params.key.toString() : \"0\");\n                                        });\n                                        putMyVar(\"head.cate\", JSON.stringify(new_cate));\n                                        if (params.json.constructor === Object) {\n                                            putMyVar(\"dt_\" + params.json.type, params.json.value);\n                                        } else {\n                                            putMyVar(params.state, params.json);\n                                        }\n                                        refreshPage(true);\n                                        return \"hiker://empty\";\n                                    },\n                                    params),\n                            });\n                        });\n                        items.push({\n                            col_type: \"blank_block\",\n                            extra: {\n                                id: MY_RULE.title + 'cate_line',\n                            }\n                        });\n                    } else {\n                        //å°ç±»\n                        sub_categories.forEach((item, key) => {\n                            var extrapos = false;\n                            /*if (item.includes('type=\"@extra\"')) {\n                              extrapos = true;\n                              //log('é™„åŠ å®šä½')\n                            }*/\n\n                            if (extrapos) {\n                                var title = pdfh(item, \"a&&Text\");\n                                if (typeof æ’é™¤ != \"undefined\" && æ’é™¤ != \"\") {\n                                    title = title.replace(new RegExp(æ’é™¤, \"g\"), \"\");\n                                }\n                                var json = {\n                                    type: pdfh(item, \"a&&state\"),\n                                    value: pdfh(item, \"a&&value\"),\n                                };\n                            } else {\n                                //var title = pdfh(item, åˆ†ç±»æ ‡é¢˜);\n                                var title = item.title;\n                                if (typeof æ’é™¤ != \"undefined\" && æ’é™¤ != \"\") {\n                                    title = title.replace(new RegExp(æ’é™¤, \"g\"), \"\");\n                                }\n\n                                var json = \"\";\n                                /*switch (true) {\n                                  case åˆ†ç±»é“¾æ¥.includes(\"@@@\"):\n                                    json = {\n                                      type: pdfh(item, åˆ†ç±»é“¾æ¥.split(\"@@@\")[0]),\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\"@@@\")[1]),\n                                    };\n                                    break;\n                                  case åˆ†ç±»é“¾æ¥.includes(\"@@\"):\n                                    json = {\n                                      type: åˆ†ç±»é“¾æ¥.split(\"@@\")[0],\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\"@@\")[1]),\n                                    };\n                                    break;\n                                  default:\n                                    json = item.url;\n                                    // json = pd(item, åˆ†ç±»é“¾æ¥);\n                                    break;\n                                }*/\n                                json = item.url;\n                                /*var json=åˆ†ç±»é“¾æ¥.includes('@@@')?{\n                                      type:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[0]),\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[1]),\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);\n                                  json=åˆ†ç±»é“¾æ¥.includes('@@')?{\n                                      type:åˆ†ç±»é“¾æ¥.split('@@')[0],\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@')[1]),\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);*/\n                            }\n\n                            let params = {\n                                cate_temp: cate_temp,\n                                index: index,\n                                key: key,\n                                page: page,\n                                json: json,\n                                state: çŠ¶æ€,\n                                allclears: å…¨æ¸…,\n                            };\n                            cates.push({\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\n                                url: $(\"hiker://empty\" + \"#noLoading#\").lazyRule((params) => {\n                                        params.allclears.forEach((item) => {\n                                            clearMyVar(item);\n                                        });\n                                        clearMyVar('cate_button');\n\n                                        params.cate_temp[params.index] = params.key.toString();\n                                        putMyVar(\"head.cate\", JSON.stringify(params.cate_temp));\n                                        if (params.json.constructor === Object) {\n                                            putMyVar(\"dt_\" + params.json.type, params.json.value);\n                                        } else {\n                                            putMyVar(params.state, params.json);\n                                        }\n                                        refreshPage();\n                                        return \"hiker://empty\";\n                                    },\n                                    params),\n                                col_type: \"scroll_button\",\n                                extra: {\n                                    cls: MY_RULE.title + 'cate_button',\n                                }\n                            });\n                        });\n                        cates.push({\n                            col_type: \"blank_block\",\n                            extra: {\n                                cls: MY_RULE.title + 'cate_button',\n                            }\n                        });\n                    }\n                });\n            }\n            if (fold === \"1\" || æŠ˜å çŠ¶æ€ == false) {\n                items = items.concat(cates);\n            }\n            if (fold === \"0\") {\n                storage0.putMyVar('cate_button', cates)\n            }\n            if (typeof setPreResult != 'undefined') {\n                items = d.concat(items);\n                //æ¸…ç©ºç»§æ‰¿æ•°ç»„\n                d.length = 0;\n                setPreResult(items);\n            } else {\n                items.forEach(item => {\n                    d.push(item);\n                })\n            }\n        },\n    };\n    obj.é¢„è®¾(options);\n    return obj;\n}\n\nvar çŠ¶æ€ =\n    typeof çŠ¶æ€æ ‡è®° != \"undefined\" && çŠ¶æ€æ ‡è®° != \"\" ? çŠ¶æ€æ ‡è®° : MY_RULE.url;\n\nlet dt_debug = false;\n\naddListener(\n    \"onClose\",\n    $.toString(() => {})\n);\n\nvar Create = {\n    nextPage: function() {\n        var result = false;\n        try {\n            var next = eval(ä¸‹ä¸€é¡µ);\n            //log('n:'+next)\n            if (next == \"\") {\n                throw new Error('ä¸‹ä¸€é¡µé“¾æ¥ä¸ºç©º')\n            }\n            result = true;\n            if (true_url == next) {\n                result = false;\n            }\n        } catch (e) {\n            //log(\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\");\n            log(\"é”™è¯¯ä¿¡æ¯:\" + e.message);\n        }\n        if ((next == \"\" || next == undefined) && page == 1) {\n            next = true_url;\n        } else {\n            //result=false;\n            next = getMyVar(çŠ¶æ€);\n        }\n        //log('l'+true_url)\n        //log('n'+next)\n        if (page != 1) {\n            if (true_url == next && !result) {\n                result = false;\n            } else {\n                result = true;\n            }\n        }\n        return result;\n        //putMyVar(çŠ¶æ€, next);\n    },\n    getBackImage: function(imgurl) {\n        var result = imgurl;\n        try {\n            result = /url(?:\\s+)?\\((.*?)\\)/g\n                .exec(imgurl)[1]\n                .replace(/('|\"|&quot;)/gm, \"\");\n        } catch {}\n        return result;\n    },\n    httpHandle: function(input) {\n        if (input.startsWith(\"http\")) {\n            return input;\n        } else if (input.startsWith(\"//\")) {\n            return \"https:\" + input;\n        } else if (input.startsWith(\"/\")) {\n            return MY_HOME + input;\n        }\n    },\n    imgHandle: function(item, rule) {\n        var img = \"\";\n        if (rule.img.startsWith(\"pd\")) {\n            img = eval(rule.img);\n        } else if (rule.backimg) {\n            img = pdfh(item, rule.img);\n            img = this.getBackImage(img);\n            img = this.httpHandle(img);\n        } else {\n            img = pdfh(item, rule.img);\n            if (!img.startsWith(\"http\")) {\n                img = pd(item, rule.img);\n                img = this.httpHandle(img);\n            }\n        }\n        return img + rule.ref;\n    },\n    urlHandle: function(item, rule) {\n        var href = \"\";\n        if (rule.url.startsWith(\"pd\")) {\n            href = eval(rule.url);\n        } else {\n            href = pd(item, rule.url);\n        }\n        href = rule.imt ? href + \"#immersiveTheme#\" : href;\n        return href;\n    },\n    setContent: function(item, input) {\n        let output = \"\";\n        if (input == undefined) {\n            return output;\n        }\n        if (input.startsWith(\"pd\")) {\n            output = eval(input);\n        } else {\n            output = pdfh(item, input);\n        }\n        return output;\n    },\n    refresh: function() {\n        addListener(\n            \"onRefresh\",\n            $.toString((u) => {\n                clearMyVar(\"yilist\");\n                //var p = storage0.getMyVar('spage', '');\n                //putMyVar(u, p);\n            }, çŠ¶æ€)\n        );\n    },\n    getBooleanValue: function(value, defaultValue) {\n        return value !== undefined ? Boolean(value) : (defaultValue !== undefined ? defaultValue : true);\n    },\n    debuglog: function(i, item, rule, obj) {\n        log('----------' + (i + 1) + ':è°ƒè¯•å¼€å§‹----------');\n        if (item.constructor == Object) {\n            item = JSON.stringify(item);\n        }\n        log('itemå†…å®¹:\\r\\n' + item + '\\r\\n' +\n            `\\n\\ttitleå®šä½:  ${rule.title}  ---> ç»“æœ:  ${obj.title}` +\n            `\\n\\tdescå®šä½:  ${rule.desc}  ---> ç»“æœ:  ${obj.desc}` +\n            `\\n\\timgå®šä½:  ${rule.img}  ---> ç»“æœ:  ${obj.img}` +\n            (rule.content != undefined ? `\\n\\tcontentå®šä½:  ${rule.content}  ---> ç»“æœ:  ${obj.content}` : '') +\n            `\\n\\turlå®šä½:  ${rule.url}  ---> ç»“æœ:  ${obj.url}`\n        );\n        log('----------' + (i + 1) + ':è°ƒè¯•ç»“æŸ----------');\n    },\n    jsonList: function(arr, json, rule) {\n        if (json.constructor != Object) {\n            try {\n                json = JSON.parse(json);\n            } catch {}\n        }\n        if (json[rule.list] == undefined) {\n            arr.push({\n                title: 'â€œâ€œâ€â€<font color=\"grey\"><small>æ— å†…å®¹</small></font>',\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {},\n            });\n            return;\n        }\n        var debug = this.getBooleanValue(rule.debug, false);\n        var empty = this.getBooleanValue(rule.empty);\n        if (debug) {\n            log('å®šä½åˆ—è¡¨:' + rule.list);\n        }\n        json[rule.list].forEach((item, i) => {\n            var title = eval(rule.title);\n            var desc = eval(rule.desc);\n            var content = eval(rule.content);\n            var img = eval(rule.img) + rule.ref;\n            var href = eval(rule.url);\n            var url = rule.imt ? href + \"#immersiveTheme#\" : href;\n            var lazy = rule.lazy ? rule.lazy : \"\";\n\n            var dd = {\n                title: title,\n                desc: desc,\n                content: content,\n                pic_url: img,\n                url: (empty ? \"hiker://empty##\" : '') + url,\n                col_type: rule.col_type,\n                extra: {\n                    img: img,\n                },\n            };\n\n            if (debug) {\n                var rx = {\n                    title,\n                    desc,\n                    img,\n                    content,\n                    url\n                };\n                this.debuglog(i, item, rule, rx);\n            }\n\n            if (lazy != \"\") {\n                dd[\"url\"] = href + lazy;\n            }\n            arr.push(dd);\n        });\n    },\n    ruleList: function(arr, html, rule) {\n        var list = pdfa(html,\n            rule.list);\n        var debug = this.getBooleanValue(rule.debug,\n            false);\n        var empty = this.getBooleanValue(rule.empty);\n        if (debug) {\n            log('å®šä½åˆ—è¡¨:' + rule.list);\n        }\n        list.forEach((item, i) => {\n            var title = this.setContent(item, rule.title);\n            var desc = this.setContent(item, rule.desc);\n            var img = this.imgHandle(item, rule);\n            var url = this.urlHandle(item, rule);\n            var content = this.setContent(item, rule.content);\n\n            if (debug) {\n                var rx = {\n                    title,\n                    desc,\n                    img,\n                    content,\n                    url\n                };\n                this.debuglog(i, item, rule, rx);\n            }\n\n            var lazy = rule.lazy ? rule.lazy : \"\";\n            var dd = {\n                title: title,\n                desc: desc,\n                pic_url: img,\n                url: (empty ? \"hiker://empty##\" : '') + url,\n                content: content,\n                col_type: rule.col_type,\n                extra: {\n                    img: img,\n                },\n            };\n            if (lazy != \"\") {\n                dd[\"url\"] = url + lazy;\n            }\n            arr.push(dd);\n        });\n    },\n    List: function(arr, html, rule, param) {\n        param = param ? param : {};\n        var auto = param.auto ? param.auto : false;\n        var show = param.show ? param.show : false;\n        if (page == 1) {\n            //this.spage.set(true_url);\n        }\n        this.refresh();\n        var debug = this.getBooleanValue(rule.debug, false);\n        var empty = this.getBooleanValue(rule.empty);\n        var list = pdfa(html, rule.list);\n        if (debug) {\n            log('å®šä½åˆ—è¡¨:' + rule.list);\n        }\n        //log(this.nextPage())\n        if ((storage0.getMyVar('yi_isnext', 't') == 't' && list.length > 0) || page == 1) {\n            list.forEach((item, i) => {\n                deleteItem(\"pagenum\");\n                deleteItem(\"pageline\");\n                var id = \"\";\n                var cls = \"\";\n                var title = this.setContent(item, rule.title);\n                var desc = this.setContent(item, rule.desc);\n                var img = this.imgHandle(item, rule);\n                var url = this.urlHandle(item, rule);\n                var content = this.setContent(item, rule.content);\n\n                if (debug) {\n                    var rx = {\n                        title,\n                        desc,\n                        img,\n                        content,\n                        url\n                    };\n                    this.debuglog(i, item, rule, rx);\n                }\n\n                if (i == list.length - 1) {\n                    id = \"lastid_\" + page;\n                    cls = \"lastmark\";\n                }\n                d.push({\n                    title: title,\n                    desc: desc,\n                    pic_url: img,\n                    url: (empty ? \"hiker://empty##\" : '') + url,\n                    content: content,\n                    col_type: rule.col_type,\n                    extra: {\n                        img: img,\n                        id: id,\n                        cls: cls,\n                    },\n                });\n                if (i == list.length - 1 && show) {\n                    d.push({\n                        col_type: \"line\",\n                        extra: {\n                            id: \"pageline\",\n                        },\n                    });\n\n                    d.push({\n                        title: \"â€œâ€œâ€â€<small>åŠ è½½ä¸­...</small>\",\n                        url: \"hiker://empty\",\n                        col_type: \"text_center_1\",\n                        extra: {\n                            id: \"pagenum\",\n                        },\n                    });\n                }\n            });\n        } else {\n            updateItem(\"pagenum\", {\n                title: 'â€œâ€œâ€â€<font color=\"grey\"><small>åˆ°åº•äº†</small></font>',\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {\n                    id: \"last\",\n                },\n            });\n        }\n        if (list.length == 0 && page == 1) {\n            d.push({\n                col_type: \"line\",\n            });\n            d.push({\n                title: 'â€œâ€œâ€â€<font color=\"grey\"><small>æ— å†…å®¹</small></font>',\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {},\n            });\n        }\n        if (this.nextPage()) {\n            //log('t');\n            storage0.putMyVar('yi_isnext', 't');\n        } else {\n            //log('f');\n            storage0.putMyVar('yi_isnext', 'f');\n        }\n        if (auto) {\n            //createNextPage();\n            autoPage();\n        }\n    },\n};\n\nvar extMethod = {\n    ToParams: function() {\n        var json = arguments[0];\n        return Object.keys(json)\n            .map((key) => key + \"=\" + json[key])\n            .join(\"&\");\n    },\n    urlParse: function(u) {\n        var dict = {};\n        dict.Source = u;\n        let params = (url) => {\n            let queryParams = {};\n            let reg = /([^?=&]+)=([^?=&]+)/g;\n            url.replace(reg, function() {\n                queryParams[arguments[1]] = arguments[2];\n            });\n            return queryParams;\n        };\n        var javaUrl = JavaImporter(java.net.URL);\n        with(javaUrl) {\n            var url = new URL(u);\n            dict.Protocol = url.getProtocol();\n            dict.Host = url.getHost();\n            dict.Port = url.getPort();\n            dict.File = url.getFile();\n            dict.Path = url.getPath();\n            dict.Ref = url.getRef();\n            dict.Hosts = `${dict.Protocol}://${url.getHost()}`;\n        }\n        dict.Params = params(u);\n        return dict;\n    },\n    isEqual: function(x, y) {\n        const ok = Object.keys,\n            tx = typeof x,\n            ty = typeof y;\n        return x && y && tx === \"object\" && tx === ty ?\n            ok(x).length === ok(y).length &&\n            ok(x).every((key) => this.isEqual(x[key], y[key])) : x === y;\n    },\n    findDifferentIndex: function(str1, str2) {\n        const diffChars = [];\n        for (let i = 0; i < str2.length; i++) {\n            if (str1[i] !== str2[i]) {\n                diffChars.push({\n                    index: i,\n                    s1: str1[i],\n                    s2: str2[i],\n                });\n            }\n        }\n        return diffChars;\n    },\n    replaceCharAt: function(str, index, replacement) {\n        if (index < 0 || index >= str.length) {\n            return str;\n        }\n        //log(index)\n        const arr = str.split(\"\");\n        arr[index] = replacement;\n        return arr.join(\"\");\n    },\n    getObjectKeysDiff: function(obj1, obj2) {\n        const differentKeys = [];\n        for (let key in obj1) {\n            if (!obj2.hasOwnProperty(key) || obj1[key] !== obj2[key]) {\n                differentKeys.push(key);\n            }\n        }\n        for (let key in obj2) {\n            if (!obj1.hasOwnProperty(key)) {\n                differentKeys.push(key);\n            }\n        }\n        return differentKeys;\n    },\n    getNextUrl: function(source, target, params) {\n        var u1 = this.urlParse(source);\n        var u2 = this.urlParse(target);\n        var pa = undefined;\n        if (typeof params == \"object\") {\n            pa = params.hasOwnProperty(\"ç‰¹å¾\") ? params.ç‰¹å¾ : undefined;\n        }\n        var nexturl = source;\n        var ca = Object.keys(u2.Params).length == 0 ? \"\" : \"?\";\n        if (pa != undefined) {\n            var rs = String(u2.Path).replace(new RegExp(pa), \"$1fypage\");\n            nexturl = u2.Hosts + rs + ca + this.ToParams(u2.Params);\n        } else {\n            if (this.isEqual(u1.Params, u2.Params)) {\n                if (dt_debug) {\n                    log(u1.Path);\n                    log(u2.Path);\n                }\n                var df = this.findDifferentIndex(String(u1.Path), String(u2.Path));\n                if (dt_debug) {\n                    log(df);\n                }\n                if (df.length == 1) {\n                    var re = df[0].index;\n                } else {\n                    var f = df.filter((x) => /\\d+/.test(x.s2));\n                    var re = f[0].index;\n                }\n                var eq = this.replaceCharAt(String(u2.Path), re, \"fypage\");\n                nexturl = u2.Hosts + eq + ca + this.ToParams(u2.Params);\n            } else {\n                var ep = this.getObjectKeysDiff(u1.Params, u2.Params)\n                if (ep.length == 1) {\n                    u1.Params[ep[0]] = 'fypage'\n                } else {\n                    log(ep);\n                }\n                var eq = String(u1.Path).replace(/\\d+/, \"fypage\");\n                nexturl = u1.Hosts + eq + ca + this.ToParams(u1.Params);\n            }\n        }\n        //log('next:'+nexturl)\n        return nexturl;\n    },\n};\n\nfunction getTruelink(mark, url, page) {\n    var p = getMyVar(mark, url).replace(\"fypage\", page);\n    if (page == 1) {\n        return getMyVar(\"yi_firstpage\", p);\n    } else if (p != \"\") {\n        return p;\n    } else {\n        return url;\n    }\n}\n//æ„å»º\nfunction createNextPage() {\n    let startnum = 1;\n    var obj = arguments[0];\n    if (true_url != getMyVar(\"yi_pageurl\", \"\")) {\n        clearMyVar(\"yi_pageurl\");\n    }\n    if (page == startnum && getMyVar(\"yi_pageurl\") == \"\") {\n        putMyVar(\"yi_firstpage\", true_url);\n        try {\n            var next = eval(ä¸‹ä¸€é¡µ);\n            //log(\"next\");\n            //log(next);\n        } catch {\n            log(\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\");\n            next = \"\";\n        }\n        if (next != \"\") {\n            var nxurl = extMethod.getNextUrl(true_url, next, obj);\n            //log(\"nxurl:\" + nxurl);\n            putMyVar(çŠ¶æ€, nxurl);\n            putMyVar(\"yi_pageurl\", nxurl);\n        }\n    }\n}\n\nfunction autoPage() {\n    if (page == 1) {\n        putMyVar(\"yi_firstpage\", true_url);\n    }\n    try {\n        var next = eval(ä¸‹ä¸€é¡µ);\n        //log(\"next\");\n        //log('next:'+next);\n    } catch {\n        log(\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\");\n        next = \"\";\n    }\n    if (next != \"\") {\n        putMyVar(çŠ¶æ€, next);\n    }\n}"},{"col_type":"movie_3","name":"ç¯å¢ƒå°è£…","path":"repair","rule":"js:\n/*\n2023-10-15 by Î±\n*/\n\nvar document = {};\nvar window = {\n    location: {\n        reload: function() {\n            return;\n        }\n    }\n};\n\n// å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç”¨äºå­˜å‚¨ cookie åç§°å’Œå€¼çš„é”®å€¼å¯¹\nvar cookies = {};\nObject.defineProperty(document, 'cookie', {\n    enumerable: true,\n    configurable: true,\n    get: function() {\n        return Object.entries(cookies).map(([key, value]) => `${key}=${value}`).join('; ');\n    },\n    set: function(value) {\n        var list = [];\n        if (value.includes(';')) {\n            list = value.split(';');\n        } else {\n            list = [value];\n        }\n        list.forEach(x => {\n            var index = x.indexOf(\"=\");\n            var key = x.substring(0, index).trim();\n            var value = x.substring(index + 1);\n            cookies[key] = value;\n        })\n    }\n});\n\nfunction guard(url, headobj) {\n    var head = headobj ? headobj : {};\n    head['headers'] = head['headers'] ? head['headers'] : {};\n    head['headers']['Cookie'] = getCookie(url);\n    //log(head)\n    var html = fetch(url, head);\n    if (html.includes('_guard/auto.js')) {\n        document[\"cookie\"] = getCookie(url);\n        eval(fetch(getHome(url) + '/_guard/auto.js'))\n        head['headers']['Cookie'] = document[\"cookie\"];\n        html = fetch(url, head);\n    }\n    //log(document[\"cookie\"])\n    return html;\n}"},{"col_type":"movie_3","name":"è®¾ç½®","path":"setting","rule":"js:\neval(fetch('file:///storage/emulated/0/Download/web/setui.js'))"},{"col_type":"movie_3","name":"é»˜è®¤å‚æ•°","path":"def","rule":"js:\nvar onfile = true;\nlet def = {};\nif (onfile) {\n    eval(fetch('file:///storage/emulated/0/Download/web/def.js'))\n} else {\n    def = {\n        style: '1',\n        æ¯é¡µæ•°é‡: 30,\n        åˆ†é¡µé˜ˆå€¼: 30,\n    }\n}\n\n"},{"col_type":"movie_3","name":"åŠ¨æ€åˆ†ç±»æ”¹","path":"dtfl","rule":"js:\n/*\nVer 2023-10-28 1.0\nå¤‡æ³¨ï¼šä¸è¦ç”¨æµ·é˜”ä»£ç æ ¼å¼åŒ– å†…å®¹ä¼šå‡ºé”™\nå¿…é¡»å‚æ•°ï¼š\nåˆ†ç±»é¢œè‰² å¤§ç±»å®šä½ \nå°ç±»å®šä½ åˆ†ç±»æ ‡é¢˜ åˆ†ç±»é“¾æ¥\nhtml =>æºç  page =>é¡µç \nå¯é€‰å‚æ•°ï¼š\næ‹¼æ¥åˆ†ç±» æŠ˜å æ ‡è®° å±•å¼€æ ‡è®° æ’é™¤\nå¤§ç±»é“¾æ¥ å¤§ç±»æ ‡é¢˜ æ¸…é™¤é”® å¼€å¯æŠ˜å \né™„åŠ å®šä½\nè¯´æ˜ï¼š\nå¤–é¢ç”¨getMyVar(MY_RULE.url) æˆ–è€… çŠ¶æ€ å–é“¾æ¥\né­”æ”¹:Î±\n*/\n\nlet empty = \"hiker://empty\";\nlet categories = [];\nif (typeof (æ‹¼æ¥åˆ†ç±») != 'undefined' && æ‹¼æ¥åˆ†ç±» != '') {\n    categories = [pdfa(html, å¤§ç±»å®šä½).join('\\n')];\n    if (æ‹¼æ¥åˆ†ç±».includes(';')) {\n        æ‹¼æ¥åˆ†ç±» = æ‹¼æ¥åˆ†ç±».split(';');\n    }\n    if (æ‹¼æ¥åˆ†ç±».constructor == Array) {\n        æ‹¼æ¥åˆ†ç±».forEach(item => {\n            categories = categories.concat(pdfa(html, item));\n        })\n    } else {\n        categories = [pdfa(html, å¤§ç±»å®šä½).join('\\n')].concat(pdfa(html, æ‹¼æ¥åˆ†ç±»));\n    }\n    if (typeof (é™„åŠ å®šä½) != 'undefined' && é™„åŠ å®šä½.length > 0) {\n        é™„åŠ å®šä½.forEach(x => {\n            var ä¸€çº§ = pdfa(html, x.ä¸€çº§å®šä½).map(s => {\n                var å®šä½ = pdfa(s, x.å°ç±»).map(q => {\n                    var title = pdfh(q, x.æ ‡é¢˜);\n                    var url = 'a'\n                    if (x.é“¾æ¥.includes('@@')) {\n                        state = x.é“¾æ¥.split('@@')[0]\n                        value = pdfh(q, x.é“¾æ¥.split('@@')[1]);\n                        if (x.è½¬æ¢ == true) {\n                            return `<li data-type=\"${state}\" data-val=\"${value}\"><a href=\"\">${title}</a></li>`\n                        } else {\n                            return `<a type=\"@extra\" state=\"${state}\" value=\"${value}\">${title}</a>`;\n                        }\n                    } else {\n                        href = pd(q, x.é“¾æ¥);\n                        return `<a href=\"${href}\">${title}</a>`;\n                    }\n                });\n                return å®šä½;\n            });\n            categories.push(ä¸€çº§.join('\\n'));\n        });\n    }\n} else {\n    categories = [pdfa(html, å¤§ç±»å®šä½).join('\\n')];\n}\n\nlet items = [];\nlet cates = [];\nlet init_cate = new Array(20).fill(\"0\");\nconst fold = getMyVar(MY_RULE.group, \"0\");\nconst cate_temp = JSON.parse(getMyVar(\"head.cate\", JSON.stringify(init_cate)));\nvar æŠ˜å çŠ¶æ€ = (typeof (å¼€å¯æŠ˜å ) != 'undefined') ? å¼€å¯æŠ˜å  : true;\nvar æŠ˜å  = (typeof (æŠ˜å æ ‡è®°) != 'undefined' && æŠ˜å æ ‡è®° != '') ? æŠ˜å æ ‡è®° : 'â€œâ€œâ€â€' + 'âˆ¨'.fontcolor(\"#FF0000\");\nvar å±•å¼€ = (typeof (å±•å¼€æ ‡è®°) != 'undefined' && å±•å¼€æ ‡è®° != '') ? å±•å¼€æ ‡è®° : 'â€œâ€œâ€â€' + 'âˆ§'.fontcolor(\"#1aad19\");\nvar æ¸…é™¤ = (typeof (æ¸…é™¤é”®) != 'undefined' && æ¸…é™¤é”® != '') ? æ¸…é™¤é”® : [];\nvar çŠ¶æ€ = (typeof (çŠ¶æ€æ ‡è®°) != 'undefined' && çŠ¶æ€æ ‡è®° != '') ? çŠ¶æ€æ ‡è®° : MY_RULE.url;\nvar å¤§ç±»å¤„ç† = typeof (ä¸€çº§åˆ†ç±»å¤„ç†) != 'undefined' ? true : false;\nvar æœç´¢ = typeof (å¼€å¯æœç´¢) != 'undefined' ? å¼€å¯æœç´¢ : false;\nvar å…¨æ¸… = (typeof (å…¨æ¸…é”®) != 'undefined' && å…¨æ¸…é”® != '') ? å…¨æ¸…é”® : [];\nå…¨æ¸….unshift('yi_firstpage');\n\n\nif (parseInt(page) === 1) {\n    if (æœç´¢) {\n        d.push({\n            title: \"\",\n            url: \"'hiker://search?rule=\" + MY_RULE.title + \"&s='+input\",\n            desc: \"æœç´¢å…³é”®è¯\",\n            col_type: \"input\",\n            extra: {\n                defaultValue: getMyVar('keyword', ''),\n                onChange: $.toString(() => {\n                    putMyVar('keyword', input);\n                })\n            }\n        })\n    }\n    if (æŠ˜å çŠ¶æ€) {\n        if (page == 1) {\n            items.push({\n                title: fold === '1' ? æŠ˜å  : å±•å¼€,\n                url: $(\"#noLoading#\").lazyRule((title, fold, u, all, exps) => {\n                    var fold = getMyVar(MY_RULE.group, fold);\n                    var [å±•å¼€, æŠ˜å ] = exps;\n                    if (fold == 1) {\n                        var cx = findItemsByCls(title + 'cate_button');\n                        storage0.putMyVar('cate_button', cx);\n                        deleteItemByCls(title + 'cate_button');\n                    } else {\n                        var cx = storage0.getMyVar('cate_button', []).map(x => {\n                            x['col_type'] = x['col_type'] ? x['col_type'] : x['type'];\n                            return x;\n                        });\n                        addItemAfter(title + 'cate_line', cx)\n                    }\n                    /*all.forEach((item) => {\n                      clearMyVar(item);\n                    });*/\n                    updateItem(title + 'cate_exp', {\n                        title: fold == 1 ? å±•å¼€ : æŠ˜å ,\n                    })\n                    putMyVar(MY_RULE.group, fold === \"1\" ? \"0\" : \"1\");\n                    return \"hiker://empty\";\n                }, MY_RULE.title, fold, çŠ¶æ€, å…¨æ¸…, [å±•å¼€, æŠ˜å ]),\n                col_type: 'scroll_button',\n                extra: {\n                    id: MY_RULE.title + 'cate_exp',\n                    longClick: [{\n                        title: 'æ¸…é™¤çŠ¶æ€',\n                        js: $.toString((x, all, cl) => {\n                            clearMyVar(x);\n                            clearMyVar('head.cate');\n                            all.forEach((item) => {\n                                clearMyVar(item)\n                            })\n                            cl.forEach((item) => {\n                                clearMyVar(item)\n                            })\n                            refreshPage();\n                        }, çŠ¶æ€, å…¨æ¸…, æ¸…é™¤)\n                    }]\n                }\n            })\n        }\n    }\n    let setTitle = (k, i, t) => {\n        return k == i ? \"â€œâ€œâ€â€\" + t.fontcolor(åˆ†ç±»é¢œè‰²) : t\n    }\n    categories.forEach((category, index) => {\n        let sub_categories = [];\n        if (å°ç±»å®šä½.includes(';')) {\n            sub_categories = pdfa(category, å°ç±»å®šä½.split(';')[0]);\n            if (sub_categories.length == 0) {\n                sub_categories = pdfa(category, å°ç±»å®šä½.split(';')[1]);\n            }\n        } else {\n            sub_categories = pdfa(category, å°ç±»å®šä½);\n        }\n        if (index === 0) {\n            sub_categories.forEach((item, key) => {\n                let _å¤§ç±»é“¾æ¥ = (typeof (å¤§ç±»é“¾æ¥) != 'undefined' && å¤§ç±»é“¾æ¥ != '') ? å¤§ç±»é“¾æ¥ : åˆ†ç±»é“¾æ¥;\n\n                let _å¤§ç±»æ ‡é¢˜ = (typeof (å¤§ç±»æ ‡é¢˜) != 'undefined' && å¤§ç±»æ ‡é¢˜ != '') ? å¤§ç±»æ ‡é¢˜ : åˆ†ç±»æ ‡é¢˜;\n\n                let title = pdfh(item, _å¤§ç±»æ ‡é¢˜);\n                if (typeof (æ’é™¤) != 'undefined' && æ’é™¤ != '') {\n                    title = title.replace(new RegExp(æ’é™¤, \"g\"), \"\");\n                }\n                let params = {\n                    cate_temp: cate_temp, key: key, page: page, clears: æ¸…é™¤, state: çŠ¶æ€, allclears: å…¨æ¸…\n                }\n\n                let url = pd(item, _å¤§ç±»é“¾æ¥);\n                if (å¤§ç±»å¤„ç†) {\n                    //log(ä¸€çº§åˆ†ç±»å¤„ç†)\n                    //log($.stringify(ä¸€çº§åˆ†ç±»å¤„ç†))\n                    let input = url;\n                    eval(\"result = \" + ä¸€çº§åˆ†ç±»å¤„ç†);\n                    //log(result)\n                    url = result;\n                }\n                items.push({\n                    title: setTitle(key.toString(), cate_temp[index], title),\n                    col_type: 'scroll_button',\n                    url: $(url + '#noLoading#').lazyRule((params) => {\n                        let new_cate = [];\n                        params.clears.forEach((item) => {\n                            clearMyVar(item)\n                        })\n                        params.allclears.forEach((item) => {\n                            clearMyVar(item)\n                        })\n\n                        params.cate_temp.forEach((cate, index) => {\n                            new_cate.push(index === 0 ? params.key.toString() : \"0\")\n                        })\n                        putMyVar(\"head.cate\", JSON.stringify(new_cate));\n                        putMyVar(params.state, input);\n                        refreshPage(true);\n                        return \"hiker://empty\";\n                    }, params)\n                });\n            });\n            items.push({\n                col_type: \"blank_block\",\n                extra: {\n                    id: MY_RULE.title + 'cate_line',\n                }\n            })\n        } else {\n            sub_categories.forEach((item, key) => {\n                var extrapos = false;\n                if (item.includes('type=\"@extra\"')) {\n                    extrapos = true;\n                    //log('é™„åŠ å®šä½')\n                }\n\n                if (extrapos) {\n                    var title = pdfh(item, 'a&&Text');\n                    if (typeof (æ’é™¤) != 'undefined' && æ’é™¤ != '') {\n                        title = title.replace(new RegExp(æ’é™¤, \"g\"), \"\");\n                    }\n                    var json = {\n                        type: pdfh(item, 'a&&state'),\n                        value: pdfh(item, 'a&&value'),\n                    }\n                } else {\n\n                    var title = pdfh(item, åˆ†ç±»æ ‡é¢˜);\n                    if (typeof (æ’é™¤) != 'undefined' && æ’é™¤ != '') {\n                        title = title.replace(new RegExp(æ’é™¤, \"g\"), \"\");\n                    }\n\n                    var json = '';\n                    switch (true) {\n                        case åˆ†ç±»é“¾æ¥.includes('@@@'):\n                            json = {\n                                type: pdfh(item, åˆ†ç±»é“¾æ¥.split('@@@')[0]),\n                                value: pdfh(item, åˆ†ç±»é“¾æ¥.split('@@@')[1]),\n                            }\n                            break;\n                        case åˆ†ç±»é“¾æ¥.includes('@@'):\n                            json = {\n                                type: åˆ†ç±»é“¾æ¥.split('@@')[0],\n                                value: pdfh(item, åˆ†ç±»é“¾æ¥.split('@@')[1]),\n                            }\n                            break;\n                        default:\n                            json = pd(item, åˆ†ç±»é“¾æ¥);\n                            break;\n                    }\n                    /*var json=åˆ†ç±»é“¾æ¥.includes('@@@')?{\n                         type:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[0]),\n                         value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[1]),\n                     }:pd(item,åˆ†ç±»é“¾æ¥);\n                     \n                     json=åˆ†ç±»é“¾æ¥.includes('@@')?{\n                         type:åˆ†ç±»é“¾æ¥.split('@@')[0],\n                         value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@')[1]),\n                     }:pd(item,åˆ†ç±»é“¾æ¥);*/\n\n                }\n\n                let params = {\n                    cate_temp: cate_temp, index: index, key: key, page: page, json: json, state: çŠ¶æ€, allclears: å…¨æ¸…\n                }\n                cates.push({\n                    title: setTitle(key.toString(), cate_temp[index], title),\n                    url: $('hiker://empty' + '#noLoading#').lazyRule((params) => {\n                        params.allclears.forEach((item) => {\n                            clearMyVar(item)\n                        })\n                        params.cate_temp[params.index] = params.key.toString();\n                        putMyVar(\"head.cate\", JSON.stringify(params.cate_temp));\n                        if (params.json.constructor === Object) {\n                            putMyVar('dt_' + params.json.type, params.json.value);\n                        } else {\n                            putMyVar(params.state, params.json);\n                        }\n                        refreshPage(true);\n                        return \"hiker://empty\";\n                    }, params),\n                    col_type: 'scroll_button',\n                    extra: {\n                        cls: MY_RULE.title + 'cate_button',\n                    }\n                });\n            });\n            cates.push({\n                col_type: \"blank_block\",\n                extra: {\n                    cls: MY_RULE.title + 'cate_button',\n                }\n            });\n        }\n    })\n}\n\n\nif (fold === \"1\" || æŠ˜å çŠ¶æ€ == false) {\n    items = items.concat(cates);\n}\nif (fold === \"0\") {\n    storage0.putMyVar('cate_button', cates)\n}\nif (typeof setPreResult != 'undefined') {\n    items = d.concat(items);\n    //æ¸…ç©ºç»§æ‰¿æ•°ç»„\n    d.length = 0;\n    setPreResult(items);\n} else {\n    items.forEach(item => {\n        d.push(item);\n    })\n}\n"}],"title":"Î±","author":"zetalpha","version":2023111301,"type":"other","url":"hiker://empty##","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d=[];\nd.push({\n    title:'å°è£…ä¸€äº›æ–¹æ³•',\n    col_type:'text_1',\n    url:'hiker://empty'\n})\n\n\nsetResult(d)","searchFind":"","search_url":"","group":"â‘£å·¥å…·","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"äºŒçº§\",\"path\":\"er\",\"rule\":\"js:\\n/*ver 20230930 2.0\\n */\\nconst customs = {};\\n\\n//é¢„è®¾\\nfunction customData(custom) {\\n  Object.keys(custom).forEach((k) => {\\n    customs[k] = custom[k];\\n  })\\n}\\n\\n\\nlet Erji = {\\n  é€šå…: $('').lazyRule(() => {\\n    try {\\n      var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\\n      var url = html.url\\n      if (html.encrypt == '1') {\\n        url = unescape(url);\\n      } else if (html.encrypt == '2') {\\n        url = unescape(base64Decode(url));\\n      }\\n      if (/m3u8|mp4/.test(url)) {\\n        return url\\n      } else {\\n        return \\\"video://\\\" + input\\n      }\\n    } catch (e) {\\n      return \\\"video://\\\" + input\\n    }\\n  }),\\n  evalJSRule: function (item, jsRule) {\\n    let rule = jsRule.replace(\\\"@js:\\\", \\\"\\\");\\n    rule = rule.trim();\\n    //log($.stringify(rule))\\n    let input = item;\\n    if (rule.startsWith(\\\"(\\\")) {\\n      eval(\\\"result = \\\" + rule);\\n    } else {\\n      /**\\n      * è¿˜åŸæˆ $.toString(...) çš„æœ€ç»ˆç»“æœï¼Œè¾¾åˆ°æœ€ç»ˆå¤„ç†æ–¹å¼è·Ÿä¸Šé¢çš„ if ä¸€è‡´çš„ç›®çš„\\n      */\\n      eval(\\\"result = \\\" + \\\"(() => {\\\" + rule + \\\"})()\\\");\\n    }\\n    return result || \\\"\\\";\\n  },\\n  updataRule: function (rule, headers) {\\n    headers = headers != undefined ? headers : {};\\n    setLastChapterRule('js:' + $.toString((url, rule, headers) => {\\n      var html = fetch(url, headers);\\n      setResult(eval(rule))\\n    }, MY_URL, rule, headers))\\n  },\\n  updataFun: function (method, params) {\\n    var methodArgs = this.getArgs(method);\\n    var args = methodArgs.map(function(arg) {\\n      return params[arg];\\n    });\\n    //method.apply(null, args);\\n    setLastChapterRule('js:' + $.toString((method,args) => {\\n      method.apply(null, args);\\n    }, method,args))\\n  },\\n  updata:function(args1,args2){\\n      if(args1.constructor==Function){\\n        return this.updataFun(args1,args2);\\n      }else{\\n        return this.updataRule(args1,args2);\\n      }\\n  },\\n  getArgs:function(func){\\n    var args = func.toString().match(/function\\\\s.*?\\\\(([^)]*)\\\\)/)[1];\\n    return args.split(\\\",\\\").map(function (arg) {\\n      return arg.replace(/\\\\/\\\\*.*\\\\*\\\\//, \\\"\\\").trim();\\n    }).filter(function (args) {\\n      return args;\\n    });\\n  },\\n  maxList: (arr) => { \\n    return arr.reduce((acc, curr) => (curr.length > acc.length ? curr : acc), []) \\n  },\\n  close: function (list, sorts) {\\n    addListener('onClose', $.toString((list, sorts) => {\\n      list.map(x => {\\n        clearMyVar('er_' + x + 'fold');\\n        clearMyVar('er_' + x);\\n      })\\n      for (let i = 0; i < sorts; i++) {\\n        clearMyVar('playlist_' + i);\\n      }\\n      clearMyVar('er_playlists');\\n    }, list, sorts))\\n  },\\n  dataConvert: function (data) {\\n    var newclslist = data.map(function (obj) {\\n      var newObj = Object.assign({}, obj);\\n      if (newObj.hasOwnProperty('type')) {\\n        newObj.col_type = newObj.type;\\n      }\\n      return newObj;\\n    });\\n    return newclslist;\\n  },\\n  preLoad: function (func) {\\n    let myfunc = null\\n    if (func != undefined && func.constructor == Function) {\\n      myfunc = func\\n    }\\n    $.extend({\\n      dataConvert: this.dataConvert,\\n      msm: Methods.MultiSelectMode,\\n      func: myfunc,\\n    })\\n  },\\n  small: function (str, color,h) {\\n    h=h==undefined?true:h;\\n    return (h?'â€œâ€œâ€â€':'')+'<small><font color=\\\"' + (color || '') + '\\\">' + str + '</font></small>';\\n  },\\n  å£°æ˜: function () {\\n    d.push({\\n      title: this.small('ä»¥ä¸Šæ•°æ®æ¥æºäºç½‘ç»œï¼Œå¦‚æ‚¨å–œæ¬¢ï¼Œè¯·æ”¯æŒå®˜æ–¹ï¼', '#871F78'),\\n      desc: this.small('æ­¤è§„åˆ™ä»…é™å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·äºå¯¼å…¥å24å°æ—¶å†…åˆ é™¤ï¼Œä»»ä½•ç»„ç»‡æˆ–ä¸ªäººä¸å¾—ä»¥ä»»ä½•æ–¹å¼æ–¹æ³•ä¼ æ’­æ­¤è§„åˆ™çš„æ•´ä½“æˆ–éƒ¨åˆ†ï¼', '#F20C00'),\\n      url: 'hiker://empty',\\n      col_type: 'text_center_1'\\n    });\\n  },\\n  substr: function (str, maxLength) {\\n    let len = 0;\\n    for (let i = 0; i < str.length; i++) {\\n      if (str.charCodeAt(i) > 255) {\\n        len += 2;\\n      } else {\\n        len++;\\n      }\\n      if (len > maxLength) {\\n        return str.slice(0, i) + '...';\\n      }\\n    }\\n    return str;\\n  },\\n  setDesc: function (desc, num) {\\n    var custom = this.getPreset();\\n    desc = desc.constructor == Array ? desc.join('<br>') : desc;\\n    if (desc.replace(/(<br>|\\\\s+)/g, '').length == 0) {\\n      return\\n    }\\n    var info = storage0.getMyVar('er_info', '{}')\\n    if (info['desc'] != undefined) {\\n      info['desc'] = info['desc'] + ' ç®€ä»‹:' + desc;\\n      storage0.putMyVar('er_info', info);\\n    }\\n\\n    const mark = 'desc';\\n    num = typeof (num) == 'undefined' ? 100 : num\\n    desc = desc.startsWith('ã€€ã€€') ? desc : 'ã€€ã€€' + desc;\\n    desc = desc.replace(/'/g, \\\"&#39;\\\");\\n    desc = desc.replace(/\\\\r\\\\n/g, \\\"<br>\\\");\\n\\n\\n    let sdesc = this.substr(desc, num);\\n\\n    var colors = {\\n      show: custom.ç®€ä»‹å±•å¼€,\\n      hide: custom.ç®€ä»‹æ”¶èµ·\\n    }\\n\\n    var lazy = $(`#noLoading#`).lazyRule((dc, sdc, m, cs) => {\\n      var show = storage0.getItem(m, '0');\\n      var title = findItem('desc').title;\\n      var re = /(<\\\\/small><br>.*?>).+/g;\\n      var exp = 'å±•å¼€:';\\n      var ret = 'æ”¶èµ·:';\\n      if (show == '1') {\\n        updateItem('desc', {\\n          title: title\\n            .replace(ret, exp)\\n            .replace(re, '$1' + sdc + '</small>')\\n            .replace(/(<\\\\/small><br>\\\\<font color=\\\").*?(\\\">)/, '$1' + cs.hide + '$2')\\n\\n        })\\n        storage0.setItem(m, '0');\\n      } else {\\n        updateItem('desc', {\\n          title: title\\n            .replace(exp, ret)\\n            .replace(re, '$1' + dc + '</small>')\\n            .replace(/(<\\\\/small><br>\\\\<font color=\\\").*?(\\\">)/, '$1' + cs.show + '$2')\\n        })\\n        storage0.setItem(m, '1');\\n      }\\n      return `hiker://empty`\\n    }, desc, sdesc, mark, colors)\\n    var sc = storage0.getItem(mark, '0') == '0' ? 'å±•å¼€:' : 'æ”¶èµ·:';\\n    var dc = storage0.getItem(mark, '0') == '0' ? sdesc : desc;\\n    var cs = storage0.getItem(mark, '0') == '0' ? colors.hide : colors.show;\\n    d.push({\\n      title: '' + '<b><font color=\\\"#098AC1\\\">âˆ·å‰§æƒ…ç®€ä»‹\\t</font></b>' + \\\"<small><a style='text-decoration: none;' href='\\\" + lazy + \\\"'>\\\" + sc + '</a></small><br><font color=\\\"' + cs + '\\\">' + `${dc}` + '</small>',\\n      col_type: 'rich_text',\\n      extra: {\\n        id: 'desc',\\n        lineSpacing: 6,\\n        textSize: 15,\\n        lineVisible: true,\\n      }\\n    })\\n  },\\n  setDesc2: function (desc, num) {\\n    var custom = this.getPreset();\\n    desc = desc.constructor == Array ? desc.join('<br>') : desc;\\n    if (desc.replace(/(<br>|\\\\s+)/g, '').length == 0) {\\n      return\\n    }\\n    var info = storage0.getMyVar('er_info', '{}')\\n    if (info['desc'] != undefined) {\\n      info['desc'] = info['desc'] + ' ç®€ä»‹:' + desc;\\n      storage0.putMyVar('er_info', info);\\n    }\\n\\n    const mark = 'desc';\\n    num = typeof (num) == 'undefined' ? 100 : num\\n    desc = desc.startsWith('ã€€ã€€') ? desc : 'ã€€ã€€' + desc;\\n    desc = desc.replace(/'/g, \\\"&#39;\\\");\\n    desc = desc.replace(/\\\\r\\\\n/g, \\\"<br>\\\");\\n\\n    let sdesc = this.substr(desc, num);\\n\\n    var colors = {\\n      show: custom.ç®€ä»‹å±•å¼€,\\n      hide: custom.ç®€ä»‹æ”¶èµ·\\n    }\\n    d.push({\\n      title: 'å‰§æƒ…ç®€ä»‹<span style=\\\"color:#ff0000;\\\"><b><small>' + (storage0.getItem(mark, '0')=='0'?'å±•å¼€':'æ”¶èµ·') + '</small></b></span>:',\\n      col_type: 'avatar',\\n      img: 'https://hikerfans.com/tubiao/system/75.png',\\n      url: $('#noLoading#').lazyRule((mark,dc, sdc,cs) => {\\n        var ds = storage0.getItem(mark, '0');\\n        var title = findItem('dshow').title;\\n        var dtitle = findItem('dcontent').title;\\n        if (ds == '0') {\\n          storage0.setItem(mark, '1')\\n          updateItem('dcontent', {\\n            title: dtitle.replace(/\\\\>.*?\\\\</,'>'+dc+'<')\\n            .replace(/(color=\\\").*?(\\\")/,'$1'+cs.show+'$2')\\n          });\\n          updateItem('dshow', {\\n            title: title.replace('å±•å¼€', 'æ”¶èµ·')                        \\n          });\\n\\n\\n        } else {\\n          storage0.setItem(mark, '0')\\n          updateItem('dcontent', {\\n            title: dtitle.replace(/\\\\>.*?\\\\</,'>'+sdc+'<')\\n            .replace(/(color=\\\").*?(\\\")/,'$1'+cs.hide+'$2')\\n          });\\n          updateItem('dshow', {\\n            title: title.replace('æ”¶èµ·', 'å±•å¼€')                        \\n          });\\n        }\\n        return 'hiker://empty'\\n      },mark, desc, sdesc,colors),\\n      extra: {\\n        id: 'dshow',\\n      }\\n    })\\n    var sc=storage0.getItem(mark, '0') == '0' ? sdesc.fontcolor(colors.hide) : desc.fontcolor(colors.show);\\n    d.push({\\n      title:sc,\\n      col_type: 'rich_text',\\n      extra: {\\n        id: 'dcontent',\\n        lineSpacing: 6,\\n        textSize: 15,\\n        lineVisible: true,\\n      }\\n    })\\n  },\\n  strConvert:function(arr, sp) {\\n      sp = sp != undefined ? sp : '/';\\n      var reg = new RegExp(sp);\\n\\n      return arr.map(x => {\\n        str = x;\\n        if (reg.test(str)) {\\n          str = str.split(sp).map((val, index) => (index === 0 ? '' : '') + val).slice(0, 5).join(' ').replace(/ $/, '');\\n        }\\n        return str\\n      })\\n  },\\n  setContent: function (obj) {\\n    //log(obj)\\n    var custom = this.getPreset();\\n    var num = obj.num != undefined ? obj.num : 100;\\n    var contents = obj.main;\\n    if (contents.constructor == String) {\\n      contents = contents.split('\\\\n');\\n    }\\n    var sortOrder = obj.sort ? obj.sort : [];\\n    var filterlist = obj.filist ? obj.filist : [];\\n    var img = obj.img;\\n    var texts = contents.map(x => {\\n      if (x.includes('href')) {\\n        var list = pdfa(x, 'body&&a').map(k => pdfh(k, 'Text')).slice(0, 5).join(' ');\\n        if (list == '') {\\n          return pdfh(x, 'Text');\\n        } else {\\n          return pdfh(x, ':matchText&&Text') + list;\\n        }\\n      }\\n      return pdfh(x, 'Text');\\n    });\\n    var array = texts.sort((a, b) => {\\n      const indexA = sortOrder.indexOf(a.substr(0, 2));\\n      const indexB = sortOrder.indexOf(b.substr(0, 2));\\n      return indexA - indexB;\\n    })\\n    var regex = new RegExp('(' + sortOrder.join('|') + ')');\\n    array = array.filter(function (item) {\\n      return regex.test(item);\\n    });\\n\\n    var fireg = new RegExp('(' + filterlist.join('|') + ')');\\n    if (filterlist.length > 0) {\\n      array = array.filter(function (item) {\\n        return !fireg.test(item);\\n      });\\n    }\\n    //log(array)\\n\\n    //array = sortOrder.length==0?array:this.strConvert(array);\\n    array = this.strConvert(array, obj.sp);\\n\\n    if (array.length > 6) {\\n      array = array.slice(0, 6);\\n    }\\n\\n    var titles = [];\\n    var descs = [];\\n\\n    switch (array.length) {\\n      case 2:\\n        titles = array[0];\\n        descs = array[1];\\n        break;\\n      case 3:\\n        titles = array.slice(0, 1);\\n        descs = array.slice(1);\\n        break;\\n      case 4:\\n      case 5:\\n        titles = array.slice(0, 2);\\n        descs = array.slice(2);\\n        break;\\n      case 6:\\n      default:\\n        titles = array.slice(0, 3);\\n        descs = array.slice(3);\\n        break;\\n    }\\n    storage0.putMyVar('er_info', {\\n      desc: descs.join('\\\\n'),\\n      img: img,\\n    })\\n    d.push({\\n      title: '<b>'+titles[0].fontcolor(custom.æ ‡é¢˜é¢œè‰²)+'</b>'+this.small( '\\\\n' + titles.slice(1, 3).join('\\\\n'), custom.æè¿°ä¸Š),\\n      desc: this.small(descs.join('\\\\n'), custom.æè¿°ä¸‹),\\n      pic_url: img + '@Referer=',\\n      url: MY_URL,\\n      col_type: 'movie_1_vertical_pic_blur',\\n      extra: {\\n        id: \\\"detailid\\\",\\n        gradient: obj.æ¸å˜ ? obj.æ¸å˜ : false,\\n      }\\n    })\\n    if (obj.desc != undefined) {\\n      this.setDesc(obj.desc, num);\\n    }\\n  },\\n  setCustom: function (obj, img,colors) {\\n    var array = [];\\n    if (obj.constructor == Array) {\\n      array = obj;\\n    }\\n    var titles = [];\\n    var descs = [];\\n    if('titles' in obj){\\n      titles=obj.titles;\\n    }\\n    if('descs' in obj){\\n      descs=obj.descs;\\n    }\\n    \\n    if(titles.length==0&&descs.length==0){\\n    array = this.strConvert(array);\\n    switch (array.length) {\\n      case 2:\\n        titles = array[0];\\n        descs = array[1];\\n        break;\\n      case 3:\\n        titles = array.slice(0, 1);\\n        descs = array.slice(1);\\n        break;\\n      case 4:\\n      case 5:\\n        titles = array.slice(0, 2);\\n        descs = array.slice(2);\\n        break;\\n      case 6:\\n        titles = array.slice(0, 3);\\n        descs = array.slice(3);\\n        break;\\n      }\\n    }\\n    \\n    \\n    storage0.putMyVar('er_info', {\\n      desc: descs.join('\\\\n'),\\n      img: img,\\n    })\\n    if (colors != undefined) {\\n      var color_list=[];\\n\\n      for (var key in colors) {\\n      var range = key.split('-');\\n      var start = parseInt(range[0]);\\n      var end = range[1] ? parseInt(range[1]) : start;\\n      for (var i = start; i <= end; i++) {\\n        color_list[i-1] = colors[key];\\n        }\\n      }\\n\\n      \\n      if(color_list!=titles.length+descs.length){\\n        const fillCount = (titles.length+descs.length) - color_list.length; // éœ€è¦è¡¥é½çš„ä¸ªæ•°\\n        const filledArr = Array(fillCount).fill({}); // ç”Ÿæˆå¡«å……æ•°ç»„\\n        color_list=color_list.concat(filledArr);\\n      }\\n  \\n      var midIndex = Math.floor(color_list.length / 2); \\n      var firstHalf = color_list.slice(0, midIndex);\\n      var secondHalf = color_list.slice(midIndex);\\n           \\n      function textArray(style,textArray) {\\n        var list=[];\\n        style.forEach((x, i) => {\\n        var left = [];\\n        var right = [];\\n        var str = textArray[i];\\n        Object.keys(x).forEach(k => {\\n            switch (k) {\\n                case 'color':\\n                    left.push('<font color=\\\"' + x[k] + '\\\">');\\n                    right.push('</font>');\\n                    break;\\n                default:\\n                    left.push(`<${k}>`);\\n                    right.push(`</${k}>`);\\n                break;\\n                }\\n              });\\n             list[i] = left.join('') + str + right.join('');\\n          });\\n        return list;\\n      }\\n      titles=textArray(firstHalf,titles);\\n      descs=textArray(secondHalf,descs);\\n      \\n      d.push({\\n        title:'â€œâ€œâ€â€'+titles[0]+'\\\\n'+titles.slice(1,3).join('\\\\n'),\\n        desc:'â€œâ€œâ€â€'+descs.join('\\\\n'),\\n        img:img+'@Referer='+img,\\n        url:MY_URL,\\n        col_type:'movie_1_vertical_pic_blur',\\n        extra:{\\n          id:\\\"detailid\\\",\\n        }\\n      })\\n      \\n    } else {\\n      d.push({\\n        title: titles[0] + '\\\\n' + this.small(titles.slice(1, 3).join('\\\\n')),\\n        desc: this.small(descs.join('\\\\n')),\\n        pic_url: img + '@Referer=',\\n        url: MY_URL,\\n        col_type: 'movie_1_vertical_pic_blur',\\n        extra:{\\n          id: \\\"detailid\\\",\\n        }\\n      })\\n  }\\n  },\\n  isColor: function (text) {\\n    const regex = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$|^([a-z]+)$/i;\\n    return regex.test(text);\\n  },\\n  getPreset: function (custom) {\\n    if (typeof customs == 'object' && !custom) {\\n      custom = customs;\\n    } else {\\n      custom = custom ? custom : {}\\n    }\\n    custom.æ­£åºé¢œè‰² = (custom.æ­£åºé¢œè‰² && this.isColor(custom.æ­£åºé¢œè‰²)) ? custom.æ­£åºé¢œè‰² : '#1AAD19';\\n    custom.é€†åºé¢œè‰² = (custom.é€†åºé¢œè‰² && this.isColor(custom.é€†åºé¢œè‰²)) ? custom.é€†åºé¢œè‰² : '#FF0000';\\n    custom.å›¾æ ‡ = custom.å›¾æ ‡ ? custom.å›¾æ ‡ : 'https://i2.100024.xyz/2023/06/10/h4z627.webp';\\n    custom.çº¿è·¯é€‰ä¸­ = custom.çº¿è·¯é€‰ä¸­ ? custom.çº¿è·¯é€‰ä¸­ : '#008B8B';\\n    custom.çº¿è·¯æ ·å¼ = custom.çº¿è·¯æ ·å¼ ? custom.çº¿è·¯æ ·å¼ : 'scroll_button';\\n    custom.åˆ†å‰²æ ·å¼ = custom.åˆ†å‰²æ ·å¼ ? custom.åˆ†å‰²æ ·å¼ : 'blank_block';\\n    custom.ç®€ä»‹å±•å¼€ = custom.ç®€ä»‹å±•å¼€ ? custom.ç®€ä»‹å±•å¼€ : 'black';\\n    custom.ç®€ä»‹æ”¶èµ· = custom.ç®€ä»‹æ”¶èµ· ? custom.ç®€ä»‹æ”¶èµ· : 'grey';\\n    Object.assign({}, customs, custom);\\n    //log(custom)\\n    return custom;\\n  },\\n  createPList: function (tabs, vari, shsort, custom, parse) {\\n    vari = \\\"er_\\\" + vari;\\n    let stabs = tabs;\\n    tabs = tabs.map(x => x.title!=undefined?x.title:x);\\n    var info = { parse: parse, mark: shsort };\\n    if (stabs.some(x => x.hasOwnProperty('url'))) {\\n      info['urls'] = stabs.map(x => x.url);\\n    }\\n\\n    for (var i = 0; i < tabs.length; i++) {\\n      var url = $('#noLoading#').lazyRule((vari, shsort, i, linec, info) => {\\n\\n        var lists = storage0.getMyVar(shsort + '_list', '[]');\\n\\n        if (getMyVar(vari + 'fold', '1') == '0') {\\n          var btn = findItem(shsort + '_button');\\n          var folds = ['<font color=\\\"#D3D3D3\\\">â˜·', '<font color=\\\"#FFA500\\\">â˜°'];\\n          var plist = storage0.getMyVar('er_playlists', '{}');\\n\\n          var col = plist[shsort].col_type;\\n          var cls = plist[shsort].cls;\\n          var pic = plist[shsort].pic;\\n          var extra = plist[shsort].extra;\\n          //log(extra)\\n          updateItem(btn.extra.id, {\\n            title: btn.title.replace(folds[0], folds[1]),\\n          })\\n\\n          putMyVar(vari + 'fold', '1');\\n          //return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\\n        } else {\\n          var plist = storage0.getMyVar('er_playlists', '{}');\\n\\n          var col = plist[shsort].col_type;\\n          var cls = plist[shsort].cls;\\n          var pic = plist[shsort].pic;\\n          var extra = plist[shsort].extra;\\n          //log(extra)\\n        }\\n        putMyVar(vari, i);\\n\\n        var xlist = lists[i];\\n        if ($.func != undefined && $.func.constructor == Function) {\\n          deleteItemByCls(shsort);\\n          addItemAfter(shsort + '_line', {\\n            col_type: 'pic_1',\\n            img: 'https://img.nickyam.com/file/fe41a7a1744a3a8194df2.gif',\\n            url: 'toast://loading',\\n            extra: {\\n              cls: shsort\\n            }\\n          })\\n          xlist = $.func(i, info);\\n          storage0.putMyVar(shsort + '_list', xlist);\\n        }\\n        var plays = xlist.map(x => {\\n          return {\\n            title: x.title,\\n            url: x.url,\\n            col_type: col,\\n            pic: pic,\\n            extra: Object.assign({}, extra, {\\n              id: x.url.replace(/@lazyRule[\\\\s\\\\S]+/g, ''),\\n              cls: cls,\\n            })\\n          }\\n        })\\n        if (getMyVar(shsort + '_sort') == '1') {\\n          plays.reverse();\\n        }\\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n        if (pcfg['å•æ¨']) {\\n          updateItem(shsort + '_push', {\\n            title: pcfg['obj']['å•æ¨'][0]\\n          })\\n          pcfg['å•æ¨'] = false;\\n        }\\n        if (pcfg['é€‰æ¨']) {\\n          updateItem(shsort + '_pushs', {\\n            title: pcfg['obj']['é€‰æ¨'][0]\\n          })\\n          pcfg['é€‰æ¨'] = false;\\n        }\\n        storage0.putMyVar(shsort + '_pushcfg', pcfg);\\n        deleteItemByCls(shsort);\\n        addItemAfter(shsort + '_line', plays);\\n\\n        var tabx = findItemsByCls(shsort + '_tab');\\n        tabx.forEach((x, ii) => {\\n          var title = x.title;\\n          if (i == ii) {\\n            updateItem(x.extra.id, {\\n              title: title.replace(/#(\\\\w+)?/g, linec),\\n            })\\n          } else {\\n            updateItem(x.extra.id, {\\n              title: title.replace(/#(\\\\w+)?/g, '#'),\\n            })\\n          }\\n        })\\n        return 'toast://åˆ‡æ¢æˆåŠŸï¼';\\n      }, vari, shsort, i, custom.çº¿è·¯é€‰ä¸­, info)\\n      d.push({\\n        title: 'â€œâ€œâ€â€' + (getMyVar(vari, '0') == i ? tabs[i].fontcolor(custom.çº¿è·¯é€‰ä¸­) : tabs[i].fontcolor('#')),\\n        url: url,\\n        col_type: custom.çº¿è·¯æ ·å¼,\\n        extra: {\\n          cls: shsort + '_tab',\\n          id: shsort + '_tab_' + i,\\n        }\\n      })\\n    }\\n    d.push({\\n      col_type: custom.åˆ†å‰²æ ·å¼,\\n      extra: {\\n        id: shsort + '_line',\\n      }\\n    })\\n  },\\n  pushTab: function (vari, shsort) {\\n    addListener('onRefresh', $.toString((shsort) => {\\n      clearMyVar(shsort + '_pushcfg');\\n      clearMyVar(shsort + '_duoselect');\\n    }, shsort))\\n    var pobj = {\\n      'å•æ¨': ['â¦¿å•æ¨', '<b>â¦¿å•æ¨</b>'.fontcolor('#00FA9A')],\\n      'é€‰æ¨': ['â˜‘é€‰æ¨', '<b>â˜‘é€‰æ¨</b>'.fontcolor('#4682B4')],\\n    }\\n\\n    d.push({\\n      title: 'âŒ˜',\\n      col_type: 'scroll_button',\\n      url: 'hiker://empty',\\n      extra: {\\n        cls: shsort + '_pushtab',\\n      }\\n    }, {\\n      title: pobj['å•æ¨'][0],\\n      col_type: 'scroll_button',\\n      url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\\n        if (getMyVar(vari + 'fold', '1') == '0') {\\n          return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\\n        }\\n\\n        var titles = pobj['å•æ¨'];\\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n        pcfg['obj'] = pobj;\\n        var å•æ¨ = pcfg['å•æ¨'] ? pcfg['å•æ¨'] : false;\\n\\n        if (å•æ¨) {\\n          updateItem(shsort + '_push', {\\n            title: titles[0],\\n          })\\n          pcfg['å•æ¨'] = false;\\n          pcfg['playlist'].map((x) => {\\n            updateItem(x.extra.id, {\\n              url: x.url,\\n            })\\n          })\\n        } else {\\n          updateItem(shsort + '_push', {\\n            title: 'â€œâ€œâ€â€' + titles[1],\\n          })\\n          updateItem(shsort + '_pushs', {\\n            title: pobj['é€‰æ¨'][0],\\n          })\\n          pcfg['å•æ¨'] = true;\\n          pcfg['é€‰æ¨'] = false;\\n          var playlist = findItemsByCls(shsort);\\n          pcfg['playlist'] = playlist;\\n          findItemsByCls(shsort).map(x => {\\n            var dpush = {\\n              name: getPageTitle(),\\n              url: x.title + '$' + x.extra.id\\n            }\\n            updateItem(x.extra.id, {\\n              url: $('').lazyRule((dpush) => {\\n                return 'hiker://page/push?rule=XYQæ¨é€&pushurl=' + encodeURIComponent(JSON.stringify(dpush));\\n              }, dpush)\\n            })\\n          })\\n        }\\n        storage0.putMyVar(shsort + '_pushcfg', pcfg);\\n        return 'toast://' + (!å•æ¨ ? 'å•æ¨å¼€å¯' : 'å•æ¨å…³é—­');\\n      }, shsort, pobj, vari),\\n      extra: {\\n        id: shsort + '_push',\\n        cls: shsort + '_pushtab',\\n      }\\n    }, {\\n      title: pobj['é€‰æ¨'][0],\\n      col_type: 'scroll_button',\\n      url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\\n        if (getMyVar(vari + 'fold', '1') == '0') {\\n          return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\\n        }\\n        var titles = pobj['é€‰æ¨'];\\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n        pcfg['obj'] = pobj;\\n        var é€‰æ¨ = pcfg['é€‰æ¨'] ? pcfg['é€‰æ¨'] : false;\\n        if (é€‰æ¨) {\\n          updateItem(shsort + '_pushs', {\\n            title: titles[0],\\n          })\\n          pcfg['é€‰æ¨'] = false;\\n          pcfg['playlist'].map((x) => {\\n            updateItem(x.extra.id, {\\n              title: x.title,\\n              url: x.url,\\n            })\\n          })\\n          updateItem(shsort + '_pushto', {\\n            title: 'æ¨é€æœ¬é¡µ=>TVBox',\\n          });\\n          clearMyVar(shsort + '_duoselect');\\n        } else {\\n          updateItem(shsort + '_pushs', {\\n            title: 'â€œâ€œâ€â€' + titles[1],\\n          })\\n          pcfg['é€‰æ¨'] = true;\\n          pcfg['å•æ¨'] = false;\\n          var playlist = findItemsByCls(shsort);\\n          pcfg['playlist'] = playlist;\\n          let Ids = playlist.map(it => it.extra.id);\\n          Ids.forEach(x => {\\n            var title = findItem(x).title;\\n            updateItem(x, {\\n              url: $.msm(title, x, shsort),\\n            });\\n          });\\n          updateItem(shsort + '_push', {\\n            title: pobj['å•æ¨'][0],\\n          })\\n          updateItem(shsort + '_pushto', {\\n            title: 'æ¨é€é€‰ä¸­=>TVBox',\\n          });\\n        }\\n        storage0.putMyVar(shsort + '_pushcfg', pcfg);\\n        return 'toast://' + (!é€‰æ¨ ? 'é€‰æ¨å¼€å¯' : 'é€‰æ¨å…³é—­');\\n      }, shsort, pobj, vari),\\n      extra: {\\n        id: shsort + '_pushs',\\n        cls: shsort + '_pushtab'\\n      }\\n    }, {\\n      title: \\\"æ¨é€æœ¬é¡µ=>TVBox\\\",\\n      col_type: 'scroll_button',\\n      url: $('#noLoading#').lazyRule((shsort, vari) => {\\n        var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n        var å•æ¨ = pcfg['å•æ¨'] ? pcfg['å•æ¨'] : false;\\n        var é€‰æ¨ = pcfg['é€‰æ¨'] ? pcfg['é€‰æ¨'] : false;\\n        if (!å•æ¨ && !é€‰æ¨) {\\n          var tabs = storage0.getMyVar(shsort + '_tabs', '[]');\\n          try {\\n            var pls = storage0.getMyVar(shsort + '_list', '[]').map(li => {\\n              return li.map(item => item.title + '$' + item.url.replace(/@lazyRule[\\\\s\\\\S]+/g, '')).join('#')\\n            }).join('$$$');\\n          } catch (e) {\\n            var pls = storage0.getMyVar(shsort + \\\"_list\\\", '[]').map(x => x.title + \\\"$\\\" + x.url.replace(/@lazyRule[\\\\s\\\\S]+/g, '')).join(\\\"#\\\");\\n            var tabs = [tabs[getMyVar(vari, '0')]];\\n          }\\n          //log(pls)\\n          //log(tabs)\\n        }\\n        if (é€‰æ¨) {\\n          var pls = storage0.getMyVar(shsort + \\\"_duoselect\\\", '[]').map(x => x.title + \\\"$\\\" + x.url).join(\\\"#\\\");\\n          if (pls.length == 0) {\\n            return 'toast://é€‰æ‹©ä¸ºç©º';\\n          }\\n          var tabs = ['æ’­æ”¾åˆ—è¡¨'];\\n        }\\n\\n        var info = storage0.getMyVar('er_info', '{}');\\n        var desc = info['desc'];\\n        var æ¨é€ = {\\n          \\\"name\\\": getPageTitle(),\\n          \\\"content\\\": desc || '',\\n          \\\"pic\\\": info['img'] || '',\\n          \\\"from\\\": tabs.join('$$$'),\\n          \\\"url\\\": pls,\\n        }\\n        //log(æ¨é€)\\n        return \\\"hiker://page/push?rule=XYQæ¨é€&pushurl=\\\" + encodeURIComponent(JSON.stringify(æ¨é€))\\n      }, shsort, vari),\\n      extra: {\\n        id: shsort + '_pushto',\\n        cls: shsort + '_pushtab'\\n      }\\n    }, {\\n      col_type: 'blank_block',\\n      extra: {\\n        cls: shsort + '_pushtab',\\n      }\\n    })\\n  },\\n  setLongclick: function (shsort, custom) {\\n    return [{\\n      title: 'æ ·å¼ğŸ¨',\\n      js: $.toString((shsort) => {\\n        let all_cols = [''].concat(getColTypes());\\n        all_cols = all_cols.filter(x =>\\n          /(text_|flex).*/.test(x) && x != 'text_icon');\\n        //log(all_cols)\\n        let cls = storage0.getMyVar('er_playlists', '{}') ||\\n          '';\\n        if (cls[shsort] != '') {\\n          col = cls[shsort].col_type;\\n        }\\n        let æŒ‰é’®æ ·å¼ = all_cols.map((it) => {\\n          return it === col ? 'â¡ï¸' + it : it;\\n        });\\n        let tips = 'è¯·é€‰æ‹©é€‰é›†æŒ‰é’®æ ·å¼';\\n        return $(æŒ‰é’®æ ·å¼, 2, tips).select((shsort, cls) => {\\n          input = input.replace(/â¡ï¸/g, '');\\n          /*storage0.setItem('æŒ‰é’®æ ·å¼', input);*/\\n          let oldIds = (findItemsByCls(shsort) || []).map(it => it.extra.id); //è€å…ƒç´ ids\\n          oldIds.forEach(x => {\\n            updateItem(x, {\\n              col_type: input\\n            });\\n          });\\n          return 'toast://å·²åˆ‡æ¢é€‰é›†æŒ‰é’®æ ·å¼ä¸º:' + input;\\n        }, shsort, cls);\\n      }, shsort, custom)\\n    }]\\n  },\\n  setTabs: function (tabs, vari, shsort, parse) {\\n    let custom = parse.è‡ªå®šä¹‰;\\n    let stabs = tabs;\\n    tabs = tabs.map(x => x.title!=undefined?x.title:x);\\n\\n    custom = this.getPreset(custom);\\n\\n    shsort = shsort ? shsort : 'shsort';\\n    var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\\\"color: ' + custom.é€†åºé¢œè‰² + '\\\">é€†åº</span></b>' : '<b><span style=\\\"color: ' + custom.æ­£åºé¢œè‰² + '\\\">æ­£åº</span></b>'\\n    \\n    d.push({\\n      title: vari + ':' + title,\\n      desc: 'å…±' + String(tabs.length).fontcolor('#4682B4') + 'æ¡çº¿è·¯',\\n      url: $('#noLoading#').lazyRule((shsort, vari, custom) => {\\n        let conf = getMyVar(shsort + '_sort', '0');\\n        if (getMyVar('er_' + vari + 'fold', '1') == '0') {\\n          return 'toast://å±•å¼€æ‰èƒ½æ“ä½œ';\\n        }\\n        var clslists = findItemsByCls(shsort);\\n        var newclslist = $.dataConvert(clslists);\\n\\n        var titles = [`${custom.æ­£åºé¢œè‰²}\\\">æ­£åº`, `${custom.é€†åºé¢œè‰²}\\\">é€†åº`];\\n\\n        deleteItemByCls(shsort);\\n        newclslist.reverse();\\n        addItemAfter(shsort + '_line', newclslist);\\n\\n        var obj = findItem(shsort + '_avatar')\\n\\n        if (conf == '1') {\\n          updateItem(shsort + '_avatar', {\\n            title: obj.title.replace(titles[1], titles[0]),\\n          })\\n          putMyVar(shsort + '_sort', '0');\\n        } else {\\n          updateItem(shsort + '_avatar', {\\n            title: obj.title.replace(titles[0], titles[1]),\\n          })\\n          putMyVar(shsort + '_sort', '1');\\n        }\\n        return 'toast://åˆ‡æ¢æ’åºæˆåŠŸ';\\n      }, shsort, vari, custom),\\n      col_type: 'avatar',\\n      img: custom.å›¾æ ‡,\\n      extra: {\\n        id: shsort + '_avatar',\\n        longClick: this.setLongclick(shsort),\\n      }\\n    })\\n    var æŠ˜å  = 'â€œâ€œâ€â€<b>' + 'â˜·'.fontcolor(\\\"#D3D3D3\\\");\\n    var å±•å¼€ = 'â€œâ€œâ€â€<b>' + 'â˜°'.fontcolor(\\\"#FFA500\\\");\\n    var foldname = 'er_' + vari + 'fold';\\n    var fold = getMyVar(foldname, '1');\\n    if (typeof (parse['æ¨é€']) != 'undefined' && parse['æ¨é€'])\\n      this.pushTab('er_' + vari, shsort);\\n\\n    d.push({\\n      title: fold === '0' ? æŠ˜å  : å±•å¼€,\\n      col_type: custom.çº¿è·¯æ ·å¼,\\n      url: $('#noLoading#').lazyRule((foldname, shsort) => {\\n        var fold = getMyVar(foldname, '1');\\n        var obj = findItem(shsort + '_line');\\n        var btn = findItem(shsort + '_button');\\n        var folds = ['<font color=\\\"#D3D3D3\\\">â˜·', '<font color=\\\"#FFA500\\\">â˜°'];\\n\\n        if (fold == '0') {\\n          putMyVar(foldname, '1');\\n          var cs = storage0.getMyVar(shsort + '_cls');\\n          addItemAfter(obj.extra.id, cs);\\n          updateItem(btn.extra.id, {\\n            title: btn.title.replace(folds[0], folds[1]),\\n          })\\n        }\\n        if (fold == '1') {\\n          putMyVar(foldname, '0');\\n          var pcls = findItemsByCls(shsort);\\n          var cx = $.dataConvert(pcls);\\n          storage0.putMyVar(shsort + '_cls', cx);\\n          deleteItemByCls(shsort);\\n          updateItem(btn.extra.id, {\\n            title: btn.title.replace(folds[1], folds[0]),\\n          })\\n        }\\n\\n        return 'toast://' + (fold === '1' ? 'æ”¶èµ·' : 'å±•å¼€');\\n      }, foldname, shsort),\\n      extra: {\\n        id: shsort + '_button',\\n      }\\n    })\\n    this.createPList(stabs, vari, shsort, custom, parse);\\n  },\\n  setTabs2: function (tabs, vari, shsort, parse, exp) {\\n    let custom = parse.è‡ªå®šä¹‰;\\n    let stabs = tabs;\\n    tabs = tabs.map(x => x.title!=undefined?x.title:x);\\n    custom = this.getPreset(custom);\\n    shsort = shsort ? shsort : 'shsort';\\n    var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\\\"color:' + custom.é€†åºé¢œè‰² + '\\\">é€†åº</span></b>' : '<b><span style=\\\"color:' + custom.æ­£åºé¢œè‰² + '\\\">æ­£åº</span></b>'\\n\\n    var æŠ˜å  = '<b>æŠ˜å ' + 'â˜·'.fontcolor(\\\"#D3D3D3\\\");\\n    var å±•å¼€ = '<b>å±•å¼€' + 'â˜°'.fontcolor(\\\"#FFA500\\\");\\n    var foldname = 'er_' + vari + 'fold';\\n    var fold = getMyVar(foldname, '1');\\n\\n    var url = $('#noLoading#').lazyRule((foldname, shsort, push) => {\\n      var pl = storage0.getMyVar('er_playlists', '{}');\\n      if (Object.keys(pl).length == 1) {\\n        return 'hiker://empty'\\n      }\\n\\n      var fold = getMyVar(foldname, '1');\\n      var obj = findItem(shsort + '_avatar')\\n      if (fold == '1') {\\n        var bcls = findItem(shsort + '_button');\\n        var tcls = findItemsByCls(shsort + '_tab');\\n        var lcls = findItem(shsort + '_line');\\n\\n        var pcls = findItemsByCls(shsort);\\n        var cs = [bcls].concat(tcls, [lcls], pcls);\\n\\n        if (push) {\\n          var pcls = findItemsByCls(shsort + '_pushtab');\\n          cs = pcls.concat(cs);\\n        }\\n\\n        var cx = $.dataConvert(cs);\\n        storage0.putMyVar(shsort + '_cls', cx);\\n        if (push) {\\n          deleteItemByCls(shsort + '_pushtab');\\n        }\\n        deleteItem(bcls.extra.id);\\n        deleteItemByCls(shsort + '_tab');\\n        deleteItem(shsort + '_line');\\n        deleteItemByCls(shsort);\\n\\n        updateItem(obj.extra.id, {\\n          desc: obj.desc.replace('å±•å¼€<font color=\\\"#FFA500\\\">â˜°', 'æŠ˜å <font color=\\\"#D3D3D3\\\">â˜·'),\\n        })\\n      }\\n      if (fold == '0') {\\n        var cs = storage0.getMyVar(shsort + '_cls');\\n        addItemAfter(shsort + '_avatar', cs);\\n        updateItem(obj.extra.id, {\\n          desc: obj.desc.replace('æŠ˜å <font color=\\\"#D3D3D3\\\">â˜·', 'å±•å¼€<font color=\\\"#FFA500\\\">â˜°'),\\n        })\\n      }\\n      putMyVar(foldname, fold === '1' ? '0' : '1');\\n      return 'toast://' + (fold === '1' ? 'æ”¶èµ·' : 'å±•å¼€');\\n    }, foldname, shsort, (parse['æ¨é€'] ? true : false));\\n    var desc = (fold === '0' ? æŠ˜å  : å±•å¼€) + '\\\\t';\\n\\n    if (exp.length == 1) {\\n      url = 'hiker://empty';\\n      desc = '';\\n    }\\n    d.push({\\n      title: vari + ':\\\\t\\\\t' + 'å…±' + String(tabs.length).fontcolor('#4682B4') + 'æ¡çº¿è·¯',\\n      desc: desc,\\n      col_type: 'avatar',\\n      img: custom.å›¾æ ‡,\\n      url: url,\\n      extra: {\\n        id: shsort + '_avatar',\\n        longClick: this.setLongclick(shsort),\\n      }\\n    })\\n    if (typeof (parse['æ¨é€']) != 'undefined' && parse['æ¨é€'])\\n      this.pushTab('er_' + vari, shsort);\\n\\n    if (fold == '0') {\\n      return\\n    }\\n\\n    d.push({\\n      title: 'â€œâ€œâ€â€' + title,\\n      url: $('#noLoading#').lazyRule((vari, shsort, custom) => {\\n        let conf = getMyVar(shsort + '_sort', '0');\\n        var clslists = findItemsByCls(shsort);\\n        var newclslist = $.dataConvert(clslists);\\n        deleteItemByCls(shsort);\\n        newclslist.reverse();\\n        addItemAfter(shsort + '_line', newclslist);\\n\\n        var obj = findItem(shsort + '_button')\\n        var titles = [`${custom.æ­£åºé¢œè‰²}\\\">æ­£åº`, `${custom.é€†åºé¢œè‰²}\\\">é€†åº`];\\n\\n        if (conf == '1') {\\n          updateItem(shsort + '_button', {\\n            title: obj.title.replace(titles[1], titles[0]),\\n          })\\n          putMyVar(shsort + '_sort', '0');\\n        } else {\\n          updateItem(shsort + '_button', {\\n            title: obj.title.replace(titles[0], titles[1]),\\n          })\\n          putMyVar(shsort + '_sort', '1');\\n        }\\n        //refreshPage()\\n        return 'toast://åˆ‡æ¢æ’åºæˆåŠŸ'\\n      }, vari, shsort, custom),\\n      col_type: custom.çº¿è·¯æ ·å¼,\\n      extra: {\\n        id: shsort + '_button',\\n      }\\n    })\\n    this.createPList(stabs, vari, shsort, custom, parse);\\n  },\\n  setLists: function (lists, index, shsort, parse) {\\n    //log(lists)\\n    shsort = shsort ? shsort : 'shsort';\\n    storage0.putMyVar(shsort + '_list', lists);\\n\\n    parse = parse ? parse : {};\\n    var æ ·å¼ = parse.æ ·å¼ ? parse.æ ·å¼ : '';\\n    var å›¾æ ‡ = parse.å›¾æ ‡ ? parse.å›¾æ ‡ : 'https://hikerfans.com/tubiao/movie/13.svg';\\n    var ajax = parse.åŠ¨æ€æ•°æ® ? parse.åŠ¨æ€æ•°æ® : false;\\n\\n    if (ajax) {\\n      var list = lists;\\n      if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\\n        list = lists.reverse();\\n      }\\n    } else {\\n      var list = lists[index];\\n      if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\\n        list = lists[index].reverse();\\n      }\\n    }\\n\\n\\n\\n    if (æ ·å¼ == '') {\\n      æ ·å¼ = list.length > 3 ? 'text_4' : 'text_2'\\n    }\\n\\n    var extra = '';\\n\\n    if (parse.extra != undefined) {\\n      extra = parse.extra\\n    }\\n\\n    if (list.length > 0) {\\n      var plist = storage0.getMyVar('er_playlists', '{}');\\n      if (!plist.hasOwnProperty(shsort)) {\\n        plist[shsort] = {};\\n      }\\n      plist[shsort]['cls'] = shsort;\\n      plist[shsort]['col_type'] = æ ·å¼;\\n      plist[shsort]['pic'] = å›¾æ ‡;\\n      plist[shsort]['extra'] = extra;\\n      storage0.putMyVar('er_playlists', plist);\\n    }\\n\\n\\n\\n    for (var j in list) {\\n\\n      let lt = {\\n        title: list[j].title,\\n        url: list[j].url,\\n        col_type: æ ·å¼,\\n        pic: å›¾æ ‡,\\n        extra: {\\n          id: list[j].url.replace(/@lazyRule[\\\\s\\\\S]+/g, ''),\\n          cls: shsort,\\n        }\\n      };\\n      lt['extra'] = Object.assign({}, lt['extra'], extra);\\n      d.push(lt);\\n    }\\n  },\\n  evalRe: function (input, å‡½æ•°) {\\n    let result = input;\\n    result = eval('input' + å‡½æ•°);\\n    return result;\\n  },\\n  getTabs: function (parse) {\\n    var tabs = [];\\n    var arts = [];\\n    if (typeof parse.çº¿è·¯ == 'object') {\\n      arts = parse.çº¿è·¯;\\n    }\\n    if (arts.length == 0) {\\n      arts = pdfa(html, parse.çº¿è·¯);\\n    }\\n    var çº¿è·¯å = parse.çº¿è·¯åç§°;\\n    var çº¿è·¯é“¾æ¥ = parse.çº¿è·¯é“¾æ¥ ? parse.çº¿è·¯é“¾æ¥ : '';\\n    var æ›¿æ¢å‡½æ•° = '';\\n    if (parse.çº¿è·¯åç§°.includes('@@')) {\\n      çº¿è·¯å = parse.çº¿è·¯åç§°.split('@@')[0];\\n      æ›¿æ¢å‡½æ•° = parse.çº¿è·¯åç§°.split('@@')[1];\\n    }\\n    for (var i in arts) {\\n      let linename = '';\\n      if (çº¿è·¯å == '') {\\n        linename = arts[i];\\n      } else {\\n        linename = pdfh(arts[i], çº¿è·¯å);\\n      }\\n      if (æ›¿æ¢å‡½æ•° != '') {\\n        linename = this.evalRe(linename, æ›¿æ¢å‡½æ•°);\\n      }\\n      tabs.push({ title: linename });\\n      if (çº¿è·¯é“¾æ¥ != '') {\\n        tabs[i]['url'] = pd(arts[i], çº¿è·¯é“¾æ¥);\\n      }\\n    }\\n    //log(tabs);\\n    return tabs;\\n  },\\n  getLists: function (parse, shsort, h) {\\n    html = h || html;\\n    shsort = shsort ? shsort : 'shsort';\\n    var lists = [];\\n    var conts = [];\\n    if (typeof parse.é€‰é›† == 'object') {\\n      conts = parse.é€‰é›†;\\n    }\\n    if (conts.length == 0) {\\n      try {\\n        conts = pdfa(html, parse.é€‰é›†);\\n      } catch {\\n        toast('é€‰é›†å®šä½æœ‰è¯¯')\\n      }\\n    }\\n\\n    let æ›¿æ¢å‡½æ•° = '';\\n    var é€‰é›†åç§° = parse.é€‰é›†åç§° ? parse.é€‰é›†åç§° : 'a&&Text';\\n    if (é€‰é›†åç§°.includes('@@')) {\\n      é€‰é›†åç§° = parse.é€‰é›†åç§°.split('@@')[0];\\n      æ›¿æ¢å‡½æ•° = parse.é€‰é›†åç§°.split('@@')[1];\\n    }\\n\\n    var é€‰é›†é“¾æ¥ = parse.é€‰é›†é“¾æ¥ ? parse.é€‰é›†é“¾æ¥ : 'a&&href';\\n    var è§£æ = parse.è§£æ ? parse.è§£æ : '';\\n    var temp = [];\\n\\n    for (var i in conts) {\\n      if (parse.é€‰é›†åˆ—è¡¨ != undefined) {\\n        if (parse.é€‰é›†åˆ—è¡¨ == 'object') {\\n          lists.push(conts[i].map(x => {\\n            return {\\n              title: x.title,\\n              url: x.url + è§£æ,\\n            }\\n          }))\\n        } else {\\n          lists.push(pdfa(conts[i], parse.é€‰é›†åˆ—è¡¨).map(x => {\\n            return {\\n              title: pdfh(x, é€‰é›†åç§°),\\n              url: pd(x, é€‰é›†é“¾æ¥) + è§£æ,\\n            }\\n          }))\\n        }\\n      } else {\\n        var url = pd(conts[i], é€‰é›†é“¾æ¥);\\n        if (!é€‰é›†é“¾æ¥.includes('href')) {\\n          url = pdfh(conts[i], é€‰é›†é“¾æ¥);\\n        }\\n        let title = pdfh(conts[i], é€‰é›†åç§°);\\n        title = æ›¿æ¢å‡½æ•° != '' ? this.evalRe(title, æ›¿æ¢å‡½æ•°) : title;\\n        temp.push({\\n          title: title,\\n          url: url + è§£æ,\\n        })\\n      }\\n    }\\n    let å€’åº = parse.å€’åº ? parse.å€’åº : false;\\n    var results = lists.length ? lists : [temp];\\n    if (å€’åº) {\\n      results = results.map(x => x.reverse());\\n    }\\n    var plist = storage0.getMyVar('er_playlists', '{}');\\n    if (results.some(x => x.length > 0)) {\\n      if (!plist.hasOwnProperty(shsort)) {\\n        plist[shsort] = {};\\n      }\\n      plist[shsort]['length'] = results.length;\\n    };\\n    storage0.putMyVar('er_playlists', plist);\\n    return results;\\n  },\\n  getPlayers: function (parse, mode, func) {\\n    //log(mode)\\n    var play = 'er_playlist_';\\n    this.preLoad(func);\\n    this.close(parse.map(x => x.ç±»å‹), parse.length);\\n    mode = mode ? mode : 1;\\n\\n    let pe = [1];\\n    try {\\n      pe = parse.map(x => pdfa(html, x.çº¿è·¯).length).filter(y => y > 0);\\n    } catch { }\\n\\n\\n    parse.forEach((item, i) => {\\n      var tabs = [{ title: 'ä¸»çº¿' }];\\n      if (item.çº¿è·¯ != undefined) {\\n        tabs = this.getTabs(item);\\n      }\\n      putMyVar(play + i + '_tabs', tabs.map(x => x.title));\\n\\n      if (item.åŠ¨æ€æ•°æ®) {\\n        if (mode == 1) {\\n          this.setTabs(tabs, item.ç±»å‹, play + i, item);\\n        } else {\\n          this.setTabs2(tabs, item.ç±»å‹, play + i, item, pe);\\n        }\\n        putMyVar('er_html', html);\\n        putMyVar('er_url', MY_URL);\\n        var info = { parse: item, mark: play + i, url: MY_URL };\\n        if (tabs.some(x => x.url)) {\\n          info['urls'] = tabs.map(x => x.url);\\n        }\\n\\n        var lists = func(getMyVar('er_' + item.ç±»å‹, '0'), info);\\n      } else {\\n        var lists = this.getLists(item, play + i);\\n\\n        if (lists.some(x => x.length > 0)) {\\n          if (mode == 1) {\\n            this.setTabs(tabs, item.ç±»å‹, play + i, item);\\n          } else {\\n            this.setTabs2(tabs, item.ç±»å‹, play + i, item, pe);\\n          }\\n        }\\n      }\\n      if (getMyVar('er_' + item.ç±»å‹ + 'fold', '1') == '1') {\\n        this.setLists(lists, getMyVar('er_' + item.ç±»å‹, '0'), play + i, item);\\n      }\\n      d.push({\\n        col_type: 'blank_block'\\n      })\\n    })\\n  }\\n}\\n\\n\\nlet Methods = {\\n  //å¤šé€‰æ¨¡å—\\n  MultiSelectMode: function (name, id, shsort) {\\n    return $('#noLoading#').lazyRule((datatitle, dataurl, shsort) => {\\n      function unique(arr) {\\n        const res = new Map()\\n        return arr.filter((a) => !res.has(a.url) && res.set(a.url, 1))\\n      }\\n      let duoselect = storage0.getMyVar(shsort + \\\"_duoselect\\\") ? storage0.getMyVar(shsort + \\\"_duoselect\\\") : [];\\n      if (duoselect.findIndex(x => x.url === dataurl) == -1) {\\n        duoselect.push({\\n          title: datatitle,\\n          url: dataurl\\n        })\\n        duoselect = unique(duoselect)\\n        updateItem(dataurl, {\\n          title: `â€œâ€œâ€â€<span style=\\\"color:#FF5733\\\">` + datatitle,\\n        });\\n      } else {\\n        function removeByValue(arr, val) {\\n          for (var i = 0; i < arr.length; i++) {\\n            if (arr[i]['url'] == val) {\\n              arr.splice(i, 1);\\n              break;\\n            }\\n          }\\n        }\\n        removeByValue(duoselect, dataurl)\\n        updateItem(dataurl, {\\n          title: datatitle\\n        });\\n      }\\n      storage0.putMyVar(shsort + \\\"_duoselect\\\", duoselect);\\n      return \\\"hiker://empty\\\"\\n    }, name, id, shsort)\\n  },\\n}\\n\\n\\n$.exports = {\\n  Erji: Erji,\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"ec-casc-list\",\"path\":\"ec-casc\",\"rule\":\"js:\\n/*\\nçŸ­è§†æ¨¡æ¿å°è£…\\nver 20231113 1.0\\n*/\\n\\nvar getRangeColors = function() {Â Â Â Â Â Â Â \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);Â Â Â Â Â \\n}\\neval(JSON.parse(request('hiker://page/yi?rule=Î±')).rule);\\n\\nvar _debug = false;\\nif (typeof debug != 'undefined' && typeof debug == 'boolean') {\\n    _debug = debug;\\n}\\n\\nvar _å¼€å¯æœç´¢ = true;\\nif (typeof å¼€å¯æœç´¢ != 'undefined' && typeof å¼€å¯æœç´¢ == 'boolean') {\\n    _å¼€å¯æœç´¢ = å¼€å¯æœç´¢;\\n}\\n\\nvar _åŠ¨æ€ = true;\\nif (typeof åŠ¨æ€æ•°æ® != 'undefined' && typeof åŠ¨æ€æ•°æ® == 'boolean') {\\n    _åŠ¨æ€ = åŠ¨æ€æ•°æ®;\\n}\\n\\nvar _åˆ—è¡¨ = \\\"\\\";\\nif (typeof åˆ—è¡¨ != 'undefined') {\\n    _åˆ—è¡¨ = åˆ—è¡¨;\\n}\\n\\nfunction moban_php(host, durl, å®šä½ä¿¡æ¯, options) {\\n    var sourcename = MY_URL;\\n    let çŠ¶æ€ = MY_RULE.url\\n    MY_URL = durl;\\n\\n    var option = {\\n        url: \\\"/index.php/api/vod\\\",\\n    }\\n    if (options != undefined) {\\n        Object.keys(options).forEach(k => {\\n            option[k] = options[k];\\n        })\\n    }\\n\\n    let true_url = getTruelink(MY_RULE.url, MY_URL, page);\\n\\n    if (option.hasOwnProperty('true_url')) {\\n        true_url = option.true_url;\\n    }\\n\\n    //log(true_url)\\n    var html = fetch(true_url)\\n    if (!option.hasOwnProperty('type')) {\\n        option['type'] = pdfh(html, '#dataList&&data-type');\\n    }\\n\\n    const æ¸…é™¤é”® = ['dt_class', 'dt_area', 'dt_year', 'dt_lang', 'dt_letter', 'dt_time', 'dt_version', 'dt_state'];\\n    const dc = dynamicClass({\\n        åˆ†ç±»é¢œè‰²: getRangeColors()\\n    });\\n    dc.å¼€å¯æœç´¢(_å¼€å¯æœç´¢).å¼€å¯æŠ˜å (true).æ¸…é™¤(æ¸…é™¤é”®).é¡µç (page).ç•Œé¢(d).æºç (html).çŠ¶æ€(çŠ¶æ€).åˆ›å»ºåŠ¨æ€åˆ†ç±»(å®šä½ä¿¡æ¯)\\n\\n    try {\\n        if (pdfa(html, _åˆ—è¡¨).length != 0) {\\n            return html;\\n        }\\n    } catch {}\\n\\n    if (!_åŠ¨æ€) {\\n        return html;\\n    }\\n\\n    var type = option.type;\\n\\n    time = '' + Math.ceil(new Date().getTime() / 1000);\\n    var key = evalPrivateJS('ZMNKQE5w4HUpWH6GG0ruk+vFxGRxkgJWuahpB85warDDaR3wy9NDjNapsZkYZZhV');\\n\\n    //log(option)\\n\\n    var result = post(host + option.url, {\\n        headers: {\\n            Referer: MY_URL,\\n        },\\n        body: {\\n            type: type,\\n            page: page,\\n            time: time,\\n            key: key,\\n            class: getMyVar('dt_class', ''),\\n            area: getMyVar('dt_area', ''),\\n            year: getMyVar('dt_year', ''),\\n            lang: getMyVar('dt_lang', ''),\\n            letter: getMyVar('dt_letter', ''),\\n            state: getMyVar('dt_state', ''),\\n            version: getMyVar('dt_version', ''),\\n            by: getMyVar('dt_time', ''),\\n        }\\n    })\\n\\n    var list = [];\\n    try {\\n        list = JSON.parse(result);\\n    } catch {}\\n\\n    return list\\n}\\n\\nvar option, å®šä½;\\nif (typeof options != 'undefined') {\\n    option = options;\\n}\\n\\nvar å®šä½ = [{\\n    å¤§ç±»å®šä½: '.ec-casc-list&&ul,0:1',\\n    //å°ç±»: 'body&&a'\\n}, {\\n    ä¸€çº§å®šä½: 'body&&.nav-swiper:not(:has(:matches(é¢‘é“))):has(li:nth-child(n+3))',\\n    å°ç±»: 'body&&li:not(:matches(åˆ†ç±»èµ„æº|åˆ†ç±»ä¸ä»£è¡¨))',\\n    //æ ‡é¢˜: 'a&&Text',\\n    é“¾æ¥: '@js:' + $.toString((t) => {\\n        var url = pdfh(input, 'a&&href');\\n        let type = pdfh(input, 'li&&data-type');\\n        let value = pdfh(input, 'li&&data-val');\\n        if (value == '' && url != \\\"javascript:\\\") {\\n            if (url.startsWith('javascript')) {\\n                return pd(input, 'a&&href');\\n            }\\n            if (url.startsWith('/')) {\\n                url = getHome(t) + url;\\n            }\\n            return url;\\n        }\\n        return {\\n            type: type,\\n            value: value\\n        };\\n    }, true_url)\\n}, {\\n    ä¸€çº§å®šä½: '.site-tabs',\\n    é“¾æ¥: '@js:' + $.toString((t) => {\\n        var url = pdfh(input, 'a&&href');\\n        let type = 'time';\\n        let value = pdfh(input, 'a&&data-type');\\n        if (value == '' && url != \\\"javascript:\\\") {\\n            if (url.startsWith('javascript')) {\\n                return pd(input, 'a&&href');\\n            }\\n            if (url.startsWith('/')) {\\n                url = getHome(t) + url;\\n            }\\n            return url;\\n        }\\n        return {\\n            type: type,\\n            value: value\\n        };\\n    }, true_url),\\n    //å¢åŠ :['<a data-type=\\\"\\\">å…¨éƒ¨</a>'],\\n    //è¡¥å……:[],\\n}]\\n\\nif (typeof å®šä½ä¿¡æ¯ != 'undefined') {\\n    å®šä½ = å®šä½ä¿¡æ¯;\\n}\\n\\nif (typeof å¤§ç±»å®šä½ != 'undefined') {\\n    å®šä½[0]['å¤§ç±»å®šä½'] = å¤§ç±»å®šä½;\\n}\\n\\nif (typeof æ‹¼æ¥åˆ†ç±» != 'undefined') {\\n    å®šä½[1]['ä¸€çº§å®šä½'] = æ‹¼æ¥åˆ†ç±»;\\n}\\n\\nif (_debug) {\\n    log('å®šä½ä¿¡æ¯');\\n    log(å®šä½);\\n    log('true_url')\\n    log(true_url);\\n    log('options')\\n    log(option)\\n}\\n\\nvar result = moban_php(getHome(true_url), true_url, å®šä½, option);\"},{\"col_type\":\"movie_3\",\"name\":\"ä¸€çº§å°è£…\",\"path\":\"yi\",\"rule\":\"js:\\n/*\\nby Î±(zetalpha)\\nä¸€çº§å°è£…\\nåŠ¨æ€åˆ†ç±» åˆ—è¡¨åˆ›å»º è‡ªåŠ¨ä¸‹ä¸€é¡µ\\nver 20231017 1.0\\n*/\\n\\n//éšæœºé¢œè‰²\\nvar getRangeColors = function() {\\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);\\n}\\n\\n//åŠ¨æ€åˆ†ç±»\\nfunction dynamicClass(options) {\\n    const obj = {\\n        //é»˜è®¤å€¼\\n        layout: \\\"undefined\\\",\\n        html: \\\"empty\\\",\\n        page: 0,\\n        åˆ†ç±»é¢œè‰²: \\\"#FA7298\\\",\\n        æŠ˜å : \\\"â€œâ€œâ€â€<b>\\\" + \\\"âˆ§\\\".fontcolor(\\\"#1aad19\\\") + \\\"</b>\\\",\\n        å±•å¼€: \\\"â€œâ€œâ€â€<b>\\\" + \\\"âˆ¨\\\".fontcolor(\\\"#FF0000\\\") + \\\"</b>\\\",\\n        open: true,\\n        state: MY_RULE.url,\\n        search: false,\\n        clears: [],\\n        clearall: [\\\"yi_firstpage\\\"],\\n        debug: false,\\n\\n        é¢„è®¾(param) {\\n            if (param == undefined) {\\n                param = [];\\n            }\\n            Object.keys(param).forEach((property) => {\\n                // å¯¹æ¯ä¸ªå±æ€§åæ‰§è¡Œæ“ä½œ\\n                const value = param[property]; // è·å–å±æ€§å€¼\\n                // åœ¨è¿™é‡Œæ‰§è¡Œæ‚¨çš„æ“ä½œ\\n                this[property] = value;\\n                if (this.debug) {\\n                    console.log(property + \\\":\\\" + value);\\n                }\\n            });\\n        },\\n        evalJSRule(item,\\n            jsRule) {\\n            let rule = jsRule.replace(\\\"@js:\\\",\\n                \\\"\\\");\\n            rule = rule.trim();\\n            //log($.stringify(rule))\\n            let input = item;\\n            if (rule.startsWith(\\\"(\\\")) {\\n                eval(\\\"result = \\\" + rule);\\n            } else {\\n                /**\\n                 * è¿˜åŸæˆ $.toString(...) çš„æœ€ç»ˆç»“æœï¼Œè¾¾åˆ°æœ€ç»ˆå¤„ç†æ–¹å¼è·Ÿä¸Šé¢çš„ if ä¸€è‡´çš„ç›®çš„\\n                 */\\n                eval(\\\"result = \\\" + \\\"(() => {\\\" + rule + \\\"})()\\\");\\n            }\\n            return result || \\\"\\\";\\n        },\\n        getTitle(src, category) {\\n            let title = \\\"\\\";\\n            let titleRule = category || \\\"a&&Text\\\";\\n            if (titleRule.startsWith(\\\"@js:\\\")) {\\n                title = this.evalJSRule(src, titleRule);\\n            } else {\\n                title = parseDomForHtml(src, titleRule);\\n            }\\n            return title || \\\"\\\";\\n        },\\n        getUrl(src, category) {\\n            let url = \\\"\\\";\\n            let urlRule = category.é“¾æ¥ || \\\"a&&href\\\";\\n            if (urlRule.startsWith(\\\"@js:\\\")) {\\n                url = this.evalJSRule(src, urlRule);\\n            } else {\\n                url = pd(src, urlRule);\\n            }\\n            if (typeof category.é“¾æ¥å¤„ç† == \\\"function\\\") {\\n                url = category.é“¾æ¥å¤„ç†(url);\\n            }\\n            return url || \\\"\\\";\\n        },\\n        isNull(param) {\\n            if (param == null) {\\n                return this;\\n            }\\n            return false;\\n        },\\n        isBoolean(variable) {\\n            if (typeof variable !== \\\"boolean\\\") {\\n                throw new Error(\\\"å¼€å¯æŠ˜å è¯·ä¼ å…¥å¸ƒå°”å€¼\\\");\\n            }\\n        },\\n        æ¸…é™¤(list) {\\n            if (this.isNull(list)) {\\n                return this;\\n            }\\n            if (list.constructor == String) {\\n                throw new Error(\\\"æ¸…é™¤æŠ¥é”™:è¯·ä¼ åˆ—è¡¨\\\");\\n            }\\n            this.clears = list;\\n            return this;\\n        },\\n        å…¨æ¸…(list) {\\n            if (this.isNull(list)) {\\n                return this;\\n            }\\n            var c = this.clearall;\\n            list = c.concat(list);\\n            this.clearall = list;\\n            return this;\\n        },\\n        æºç (input) {\\n            this.html = input;\\n            return this;\\n        },\\n        ç•Œé¢(input) {\\n            this.layout = input;\\n            return this;\\n        },\\n        é¡µç (input) {\\n            this.page = input;\\n            return this;\\n        },\\n        çŠ¶æ€(input) {\\n            this.state = input;\\n            return this;\\n        },\\n        å¼€å¯æœç´¢(input) {\\n            if (input == undefined) {\\n                input = true;\\n            }\\n            this.search = input;\\n            return this;\\n        },\\n        å¼€å¯æŠ˜å (input) {\\n            if (input == undefined) {\\n                input = true;\\n            }\\n            this.isBoolean(input);\\n            this.open = input;\\n            return this;\\n        },\\n        setTitle(k, i, t) {\\n            return k == i ? \\\"â€œâ€œâ€â€\\\" + t.fontcolor(this.åˆ†ç±»é¢œè‰²) : t;\\n        },\\n        action(obj) {\\n            return [{\\n                title: \\\"æ¸…é™¤çŠ¶æ€\\\",\\n                js: $.toString((obj) => {\\n                    log(obj);\\n                    clearMyVar(obj.state);\\n                    clearMyVar(\\\"head.cate\\\");\\n                    clearMyVar('cate_button');\\n                    obj.all.forEach((item) => {\\n                        clearMyVar(item);\\n                    });\\n                    obj.cl.forEach((item) => {\\n                        clearMyVar(item);\\n                    });\\n                    refreshPage();\\n                }, obj),\\n            }, ];\\n        },\\n        checkParam() {\\n            var obj = {};\\n            if (this.page == 0 && typeof page == \\\"undefined\\\") {\\n                throw new Error(\\\"è¯·ä¼ å…¥é¡µç \\\");\\n            } else {\\n                if (typeof page == \\\"undefined\\\") {\\n                    obj[\\\"é¡µç \\\"] = this.page;\\n                } else {\\n                    obj[\\\"é¡µç \\\"] = page;\\n                }\\n            }\\n            if (this.html == \\\"empty\\\" && typeof html == \\\"undefined\\\") {\\n                throw new Error(\\\"è¯·ä¼ å…¥æºç \\\");\\n            } else {\\n                if (typeof html == \\\"undefined\\\") {\\n                    obj[\\\"æºç \\\"] = this.html;\\n                } else {\\n                    obj[\\\"æºç \\\"] = html;\\n                }\\n            }\\n            if (this.layout == \\\"undefined\\\" && typeof d == \\\"undefined\\\") {\\n                throw new Error(\\\"è¯·ä¼ å…¥ç•Œé¢\\\");\\n            } else {\\n                if (typeof d == \\\"undefined\\\") {\\n                    obj[\\\"ç•Œé¢\\\"] = this.layout;\\n                } else {\\n                    obj[\\\"ç•Œé¢\\\"] = d;\\n                }\\n            }\\n            return obj;\\n        },\\n        åˆ›å»ºåŠ¨æ€åˆ†ç±»(ruleObj) {\\n            let items = [];\\n            let cates = [];\\n            if (ruleObj == undefined) {\\n                ruleObj = [];\\n            }\\n            //åˆå§‹åŒ–å˜é‡å¼€å§‹\\n            const param = this.checkParam();\\n            const page = param.é¡µç ;\\n            const html = param.æºç ;\\n            const d = param.ç•Œé¢;\\n            const çŠ¶æ€ = this.state;\\n            const search = this.search;\\n            const empty = \\\"hiker://empty\\\";\\n            const æŠ˜å çŠ¶æ€ = this.open;\\n            var å±•å¼€ = this.å±•å¼€;\\n            var æŠ˜å  = this.æŠ˜å ;\\n            var å…¨æ¸… = this.clearall;\\n            var æ¸…é™¤ = this.clears;\\n            //åˆå§‹åŒ–å˜é‡ç»“æŸ\\n            let init_cate = new Array(20).fill(\\\"0\\\");\\n            const fold = getMyVar(MY_RULE.group, \\\"0\\\");\\n            const cate_temp = JSON.parse(\\n                getMyVar(\\\"head.cate\\\", JSON.stringify(init_cate))\\n            );\\n            if (search && page == 1) {\\n                items.push({\\n                    title: \\\"\\\",\\n                    url: \\\"'hiker://search?rule=\\\" + MY_RULE.title + \\\"&s='+input\\\",\\n                    desc: \\\"æœç´¢å…³é”®è¯\\\",\\n                    col_type: \\\"input\\\",\\n                    extra: {\\n                        defaultValue: getMyVar(\\\"keyword\\\", \\\"\\\"),\\n                        onChange: $.toString(() => {\\n                            putMyVar(\\\"keyword\\\", input);\\n                        }),\\n                    },\\n                });\\n            }\\n            const categories = [];\\n            ruleObj.forEach((x) => {\\n                var list = [];\\n                //log(x)\\n                if (x.json != undefined) {\\n                    x.json.map(k => {\\n                        categories.push(JSON.stringify(k).replace(/^\\\\[|\\\\]$/g, ''))\\n                    })\\n                    //categories.push(x.json)\\n                }\\n                if (x.ä¸€çº§å®šä½) {\\n                    if (x.ä¸€çº§å®šä½.startsWith(\\\"@js:\\\")) {\\n                        list = this.evalJSRule(html, x.ä¸€çº§å®šä½);\\n                    } else {\\n                        list = pdfa(html, x.ä¸€çº§å®šä½);\\n                    }\\n                }\\n                if (x.å¤§ç±»å®šä½) {\\n                    if (x.å¤§ç±»å®šä½.startsWith(\\\"@js:\\\")) {\\n                        list = this.evalJSRule(html, x.å¤§ç±»å®šä½);\\n                    } else {\\n                        list = [pdfa(html, x.å¤§ç±»å®šä½).join('\\\\n')];\\n                    }\\n                }\\n                //--é¢å¤–å¤„ç†--\\n                if (('å¢åŠ ' in x)) {\\n                    if (x.å¢åŠ .constructor == String) {\\n                        x.å¢åŠ  = eval(x.å¢åŠ );\\n                    }\\n                    slist = x.å¢åŠ .concat(slist);\\n                }\\n                if (('è¡¥å……' in x)) {\\n                    if (x.è¡¥å…….constructor == String) {\\n                        x.è¡¥å…… = eval(x.è¡¥å……);\\n                    }\\n                    slist = slist.concat(x.è¡¥å……);\\n                }\\n                //--é¢å¤–å¤„ç†--\\n                var ä¸€çº§ = list.map((s) => {\\n                    var slist = [];\\n                    if (!(\\\"å°ç±»\\\" in x)) {\\n                        x.å°ç±» = \\\"body&&a:not(:matches(é¦–é¡µ)):not(a:not([href]))\\\";\\n                    }\\n                    if (x.å°ç±».startsWith(\\\"@js:\\\")) {\\n                        slist = this.evalJSRule(s, x.å°ç±»);\\n                    } else {\\n                        slist = pdfa(s, x.å°ç±»);\\n                    }\\n                    var å®šä½ = slist.map((item) => {\\n                        var title = this.getTitle(item, x.æ ‡é¢˜);\\n                        var url = this.getUrl(item, x);\\n                        var obj = {\\n                            title: title,\\n                            url: url\\n                        };\\n                        return JSON.stringify(obj);\\n                    });\\n                    return å®šä½;\\n                });\\n                //log(ä¸€çº§)\\n                //log(ä¸€çº§.length)\\n                if (ä¸€çº§.length == 1) {\\n                    categories.push(ä¸€çº§.join(\\\"\\\\n\\\"));\\n                } else {\\n                    ä¸€çº§.forEach((item) => {\\n                        categories.push(item.join(\\\",\\\"));\\n                    });\\n                }\\n                //log(categories)\\n            });\\n            if (æŠ˜å çŠ¶æ€) {\\n                if (page == 1) {\\n                    items.push({\\n                        title: fold === \\\"1\\\" ? æŠ˜å  : å±•å¼€,\\n                        url: $(\\\"#noLoading#\\\").lazyRule(\\n                            (title, fold, u, all, exps) => {\\n                                var fold = getMyVar(MY_RULE.group, fold);\\n\\n                                var [å±•å¼€, æŠ˜å ] = exps;\\n\\n                                if (fold == 1) {\\n                                    var cx = findItemsByCls(title + 'cate_button');\\n                                    storage0.putMyVar('cate_button', cx);\\n                                    deleteItemByCls(title + 'cate_button');\\n\\n                                } else {\\n                                    var cx = storage0.getMyVar('cate_button', []).map(x => {\\n                                        x['col_type'] = x['col_type'] ? x['col_type'] : x['type'];\\n                                        return x;\\n                                    });\\n                                    addItemAfter(title + 'cate_line', cx)\\n                                }\\n\\n                                /*all.forEach((item) => {\\n                                  clearMyVar(item);\\n                                });*/\\n                                updateItem(title + 'cate_exp', {\\n                                    title: fold == 1 ? å±•å¼€ : æŠ˜å ,\\n                                })\\n\\n                                putMyVar(MY_RULE.group, fold === \\\"1\\\" ? \\\"0\\\" : \\\"1\\\");\\n\\n                                //refreshPage(false);\\n                                return \\\"hiker://empty\\\";\\n                            },\\n                            MY_RULE.title,\\n                            fold,\\n                            çŠ¶æ€,\\n                            å…¨æ¸…, [å±•å¼€,\\n                                æŠ˜å \\n                            ],\\n                        ),\\n                        col_type: \\\"scroll_button\\\",\\n                        extra: {\\n                            id: MY_RULE.title + 'cate_exp',\\n                            longClick: this.action({\\n                                state: çŠ¶æ€,\\n                                all: å…¨æ¸…,\\n                                cl: æ¸…é™¤,\\n                            }),\\n                        },\\n                    });\\n                }\\n            }\\n            if (page == 1) {\\n                categories.forEach((category, index) => {\\n                    //log(category)\\n                    let sub_categories = [];\\n                    /*if (å°ç±»å®šä½.includes(\\\";\\\")) {\\n                      sub_categories = pdfa(category, å°ç±»å®šä½.split(\\\";\\\")[0]);\\n                      if (sub_categories.length == 0) {\\n                        sub_categories = pdfa(category, å°ç±»å®šä½.split(\\\";\\\")[1]);\\n                      }\\n                    } else {*/\\n                    //log(index)\\n                    sub_categories = JSON.parse(`[${category}]`);\\n                    //log(sub_categories)\\n                    // sub_categories = pdfa(category, å°ç±»å®šä½);\\n                    //}\\n                    if (index === 0) {\\n                        //å¤§ç±»\\n                        sub_categories.forEach((item, key) => {\\n\\n                            //let title = pdfh(item, _å¤§ç±»æ ‡é¢˜);\\n                            let title = item.title;\\n\\n                            if (typeof æ’é™¤ != \\\"undefined\\\" && æ’é™¤ != \\\"\\\") {\\n                                title = title.replace(newRegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                            }\\n                            let json = ''\\n                            json = item.url;\\n\\n                            let params = {\\n                                cate_temp: cate_temp,\\n                                key: key,\\n                                page: page,\\n                                clears: æ¸…é™¤,\\n                                json: json,\\n                                state: çŠ¶æ€,\\n                                allclears: å…¨æ¸…,\\n                            };\\n\\n                            //let url = pd(item, _å¤§ç±»é“¾æ¥);\\n                            let url = item.url;\\n                            /*if (å¤§ç±»å¤„ç†) {\\n                              url = ä¸€çº§åˆ†ç±»å¤„ç†(url);\\n                            }*/\\n                            //log(url)\\n                            items.push({\\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\\n                                col_type: \\\"scroll_button\\\",\\n                                url: $(\\\"hiker://empty#noLoading#\\\").lazyRule((params) => {\\n                                        let new_cate = [];\\n                                        params.clears.forEach((item) => {\\n                                            clearMyVar(item);\\n                                        });\\n                                        params.allclears.forEach((item) => {\\n                                            clearMyVar(item);\\n                                        });\\n                                        clearMyVar('cate_button');\\n\\n                                        params.cate_temp.forEach((cate, index) => {\\n                                            new_cate.push(index === 0 ? params.key.toString() : \\\"0\\\");\\n                                        });\\n                                        putMyVar(\\\"head.cate\\\", JSON.stringify(new_cate));\\n                                        if (params.json.constructor === Object) {\\n                                            putMyVar(\\\"dt_\\\" + params.json.type, params.json.value);\\n                                        } else {\\n                                            putMyVar(params.state, params.json);\\n                                        }\\n                                        refreshPage(true);\\n                                        return \\\"hiker://empty\\\";\\n                                    },\\n                                    params),\\n                            });\\n                        });\\n                        items.push({\\n                            col_type: \\\"blank_block\\\",\\n                            extra: {\\n                                id: MY_RULE.title + 'cate_line',\\n                            }\\n                        });\\n                    } else {\\n                        //å°ç±»\\n                        sub_categories.forEach((item, key) => {\\n                            var extrapos = false;\\n                            /*if (item.includes('type=\\\"@extra\\\"')) {\\n                              extrapos = true;\\n                              //log('é™„åŠ å®šä½')\\n                            }*/\\n\\n                            if (extrapos) {\\n                                var title = pdfh(item, \\\"a&&Text\\\");\\n                                if (typeof æ’é™¤ != \\\"undefined\\\" && æ’é™¤ != \\\"\\\") {\\n                                    title = title.replace(new RegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                                }\\n                                var json = {\\n                                    type: pdfh(item, \\\"a&&state\\\"),\\n                                    value: pdfh(item, \\\"a&&value\\\"),\\n                                };\\n                            } else {\\n                                //var title = pdfh(item, åˆ†ç±»æ ‡é¢˜);\\n                                var title = item.title;\\n                                if (typeof æ’é™¤ != \\\"undefined\\\" && æ’é™¤ != \\\"\\\") {\\n                                    title = title.replace(new RegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                                }\\n\\n                                var json = \\\"\\\";\\n                                /*switch (true) {\\n                                  case åˆ†ç±»é“¾æ¥.includes(\\\"@@@\\\"):\\n                                    json = {\\n                                      type: pdfh(item, åˆ†ç±»é“¾æ¥.split(\\\"@@@\\\")[0]),\\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\\\"@@@\\\")[1]),\\n                                    };\\n                                    break;\\n                                  case åˆ†ç±»é“¾æ¥.includes(\\\"@@\\\"):\\n                                    json = {\\n                                      type: åˆ†ç±»é“¾æ¥.split(\\\"@@\\\")[0],\\n                                      value: pdfh(item, åˆ†ç±»é“¾æ¥.split(\\\"@@\\\")[1]),\\n                                    };\\n                                    break;\\n                                  default:\\n                                    json = item.url;\\n                                    // json = pd(item, åˆ†ç±»é“¾æ¥);\\n                                    break;\\n                                }*/\\n                                json = item.url;\\n                                /*var json=åˆ†ç±»é“¾æ¥.includes('@@@')?{\\n                                      type:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[0]),\\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[1]),\\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);\\n                                  json=åˆ†ç±»é“¾æ¥.includes('@@')?{\\n                                      type:åˆ†ç±»é“¾æ¥.split('@@')[0],\\n                                      value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@')[1]),\\n                                  }:pd(item,åˆ†ç±»é“¾æ¥);*/\\n                            }\\n\\n                            let params = {\\n                                cate_temp: cate_temp,\\n                                index: index,\\n                                key: key,\\n                                page: page,\\n                                json: json,\\n                                state: çŠ¶æ€,\\n                                allclears: å…¨æ¸…,\\n                            };\\n                            cates.push({\\n                                title: this.setTitle(key.toString(), cate_temp[index], title),\\n                                url: $(\\\"hiker://empty\\\" + \\\"#noLoading#\\\").lazyRule((params) => {\\n                                        params.allclears.forEach((item) => {\\n                                            clearMyVar(item);\\n                                        });\\n                                        clearMyVar('cate_button');\\n\\n                                        params.cate_temp[params.index] = params.key.toString();\\n                                        putMyVar(\\\"head.cate\\\", JSON.stringify(params.cate_temp));\\n                                        if (params.json.constructor === Object) {\\n                                            putMyVar(\\\"dt_\\\" + params.json.type, params.json.value);\\n                                        } else {\\n                                            putMyVar(params.state, params.json);\\n                                        }\\n                                        refreshPage();\\n                                        return \\\"hiker://empty\\\";\\n                                    },\\n                                    params),\\n                                col_type: \\\"scroll_button\\\",\\n                                extra: {\\n                                    cls: MY_RULE.title + 'cate_button',\\n                                }\\n                            });\\n                        });\\n                        cates.push({\\n                            col_type: \\\"blank_block\\\",\\n                            extra: {\\n                                cls: MY_RULE.title + 'cate_button',\\n                            }\\n                        });\\n                    }\\n                });\\n            }\\n            if (fold === \\\"1\\\" || æŠ˜å çŠ¶æ€ == false) {\\n                items = items.concat(cates);\\n            }\\n            if (fold === \\\"0\\\") {\\n                storage0.putMyVar('cate_button', cates)\\n            }\\n            if (typeof setPreResult != 'undefined') {\\n                items = d.concat(items);\\n                //æ¸…ç©ºç»§æ‰¿æ•°ç»„\\n                d.length = 0;\\n                setPreResult(items);\\n            } else {\\n                items.forEach(item => {\\n                    d.push(item);\\n                })\\n            }\\n        },\\n    };\\n    obj.é¢„è®¾(options);\\n    return obj;\\n}\\n\\nvar çŠ¶æ€ =\\n    typeof çŠ¶æ€æ ‡è®° != \\\"undefined\\\" && çŠ¶æ€æ ‡è®° != \\\"\\\" ? çŠ¶æ€æ ‡è®° : MY_RULE.url;\\n\\nlet dt_debug = false;\\n\\naddListener(\\n    \\\"onClose\\\",\\n    $.toString(() => {})\\n);\\n\\nvar Create = {\\n    nextPage: function() {\\n        var result = false;\\n        try {\\n            var next = eval(ä¸‹ä¸€é¡µ);\\n            //log('n:'+next)\\n            if (next == \\\"\\\") {\\n                throw new Error('ä¸‹ä¸€é¡µé“¾æ¥ä¸ºç©º')\\n            }\\n            result = true;\\n            if (true_url == next) {\\n                result = false;\\n            }\\n        } catch (e) {\\n            //log(\\\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\\\");\\n            log(\\\"é”™è¯¯ä¿¡æ¯:\\\" + e.message);\\n        }\\n        if ((next == \\\"\\\" || next == undefined) && page == 1) {\\n            next = true_url;\\n        } else {\\n            //result=false;\\n            next = getMyVar(çŠ¶æ€);\\n        }\\n        //log('l'+true_url)\\n        //log('n'+next)\\n        if (page != 1) {\\n            if (true_url == next && !result) {\\n                result = false;\\n            } else {\\n                result = true;\\n            }\\n        }\\n        return result;\\n        //putMyVar(çŠ¶æ€, next);\\n    },\\n    getBackImage: function(imgurl) {\\n        var result = imgurl;\\n        try {\\n            result = /url(?:\\\\s+)?\\\\((.*?)\\\\)/g\\n                .exec(imgurl)[1]\\n                .replace(/('|\\\"|&quot;)/gm, \\\"\\\");\\n        } catch {}\\n        return result;\\n    },\\n    httpHandle: function(input) {\\n        if (input.startsWith(\\\"http\\\")) {\\n            return input;\\n        } else if (input.startsWith(\\\"//\\\")) {\\n            return \\\"https:\\\" + input;\\n        } else if (input.startsWith(\\\"/\\\")) {\\n            return MY_HOME + input;\\n        }\\n    },\\n    imgHandle: function(item, rule) {\\n        var img = \\\"\\\";\\n        if (rule.img.startsWith(\\\"pd\\\")) {\\n            img = eval(rule.img);\\n        } else if (rule.backimg) {\\n            img = pdfh(item, rule.img);\\n            img = this.getBackImage(img);\\n            img = this.httpHandle(img);\\n        } else {\\n            img = pdfh(item, rule.img);\\n            if (!img.startsWith(\\\"http\\\")) {\\n                img = pd(item, rule.img);\\n                img = this.httpHandle(img);\\n            }\\n        }\\n        return img + rule.ref;\\n    },\\n    urlHandle: function(item, rule) {\\n        var href = \\\"\\\";\\n        if (rule.url.startsWith(\\\"pd\\\")) {\\n            href = eval(rule.url);\\n        } else {\\n            href = pd(item, rule.url);\\n        }\\n        href = rule.imt ? href + \\\"#immersiveTheme#\\\" : href;\\n        return href;\\n    },\\n    setContent: function(item, input) {\\n        let output = \\\"\\\";\\n        if (input == undefined) {\\n            return output;\\n        }\\n        if (input.startsWith(\\\"pd\\\")) {\\n            output = eval(input);\\n        } else {\\n            output = pdfh(item, input);\\n        }\\n        return output;\\n    },\\n    refresh: function() {\\n        addListener(\\n            \\\"onRefresh\\\",\\n            $.toString((u) => {\\n                clearMyVar(\\\"yilist\\\");\\n                //var p = storage0.getMyVar('spage', '');\\n                //putMyVar(u, p);\\n            }, çŠ¶æ€)\\n        );\\n    },\\n    getBooleanValue: function(value, defaultValue) {\\n        return value !== undefined ? Boolean(value) : (defaultValue !== undefined ? defaultValue : true);\\n    },\\n    debuglog: function(i, item, rule, obj) {\\n        log('----------' + (i + 1) + ':è°ƒè¯•å¼€å§‹----------');\\n        if (item.constructor == Object) {\\n            item = JSON.stringify(item);\\n        }\\n        log('itemå†…å®¹:\\\\r\\\\n' + item + '\\\\r\\\\n' +\\n            `\\\\n\\\\ttitleå®šä½:  ${rule.title}  ---> ç»“æœ:  ${obj.title}` +\\n            `\\\\n\\\\tdescå®šä½:  ${rule.desc}  ---> ç»“æœ:  ${obj.desc}` +\\n            `\\\\n\\\\timgå®šä½:  ${rule.img}  ---> ç»“æœ:  ${obj.img}` +\\n            (rule.content != undefined ? `\\\\n\\\\tcontentå®šä½:  ${rule.content}  ---> ç»“æœ:  ${obj.content}` : '') +\\n            `\\\\n\\\\turlå®šä½:  ${rule.url}  ---> ç»“æœ:  ${obj.url}`\\n        );\\n        log('----------' + (i + 1) + ':è°ƒè¯•ç»“æŸ----------');\\n    },\\n    jsonList: function(arr, json, rule) {\\n        if (json.constructor != Object) {\\n            try {\\n                json = JSON.parse(json);\\n            } catch {}\\n        }\\n        if (json[rule.list] == undefined) {\\n            arr.push({\\n                title: 'â€œâ€œâ€â€<font color=\\\"grey\\\"><small>æ— å†…å®¹</small></font>',\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {},\\n            });\\n            return;\\n        }\\n        var debug = this.getBooleanValue(rule.debug, false);\\n        var empty = this.getBooleanValue(rule.empty);\\n        if (debug) {\\n            log('å®šä½åˆ—è¡¨:' + rule.list);\\n        }\\n        json[rule.list].forEach((item, i) => {\\n            var title = eval(rule.title);\\n            var desc = eval(rule.desc);\\n            var content = eval(rule.content);\\n            var img = eval(rule.img) + rule.ref;\\n            var href = eval(rule.url);\\n            var url = rule.imt ? href + \\\"#immersiveTheme#\\\" : href;\\n            var lazy = rule.lazy ? rule.lazy : \\\"\\\";\\n\\n            var dd = {\\n                title: title,\\n                desc: desc,\\n                content: content,\\n                pic_url: img,\\n                url: (empty ? \\\"hiker://empty##\\\" : '') + url,\\n                col_type: rule.col_type,\\n                extra: {\\n                    img: img,\\n                },\\n            };\\n\\n            if (debug) {\\n                var rx = {\\n                    title,\\n                    desc,\\n                    img,\\n                    content,\\n                    url\\n                };\\n                this.debuglog(i, item, rule, rx);\\n            }\\n\\n            if (lazy != \\\"\\\") {\\n                dd[\\\"url\\\"] = href + lazy;\\n            }\\n            arr.push(dd);\\n        });\\n    },\\n    ruleList: function(arr, html, rule) {\\n        var list = pdfa(html,\\n            rule.list);\\n        var debug = this.getBooleanValue(rule.debug,\\n            false);\\n        var empty = this.getBooleanValue(rule.empty);\\n        if (debug) {\\n            log('å®šä½åˆ—è¡¨:' + rule.list);\\n        }\\n        list.forEach((item, i) => {\\n            var title = this.setContent(item, rule.title);\\n            var desc = this.setContent(item, rule.desc);\\n            var img = this.imgHandle(item, rule);\\n            var url = this.urlHandle(item, rule);\\n            var content = this.setContent(item, rule.content);\\n\\n            if (debug) {\\n                var rx = {\\n                    title,\\n                    desc,\\n                    img,\\n                    content,\\n                    url\\n                };\\n                this.debuglog(i, item, rule, rx);\\n            }\\n\\n            var lazy = rule.lazy ? rule.lazy : \\\"\\\";\\n            var dd = {\\n                title: title,\\n                desc: desc,\\n                pic_url: img,\\n                url: (empty ? \\\"hiker://empty##\\\" : '') + url,\\n                content: content,\\n                col_type: rule.col_type,\\n                extra: {\\n                    img: img,\\n                },\\n            };\\n            if (lazy != \\\"\\\") {\\n                dd[\\\"url\\\"] = url + lazy;\\n            }\\n            arr.push(dd);\\n        });\\n    },\\n    List: function(arr, html, rule, param) {\\n        param = param ? param : {};\\n        var auto = param.auto ? param.auto : false;\\n        var show = param.show ? param.show : false;\\n        if (page == 1) {\\n            //this.spage.set(true_url);\\n        }\\n        this.refresh();\\n        var debug = this.getBooleanValue(rule.debug, false);\\n        var empty = this.getBooleanValue(rule.empty);\\n        var list = pdfa(html, rule.list);\\n        if (debug) {\\n            log('å®šä½åˆ—è¡¨:' + rule.list);\\n        }\\n        //log(this.nextPage())\\n        if ((storage0.getMyVar('yi_isnext', 't') == 't' && list.length > 0) || page == 1) {\\n            list.forEach((item, i) => {\\n                deleteItem(\\\"pagenum\\\");\\n                deleteItem(\\\"pageline\\\");\\n                var id = \\\"\\\";\\n                var cls = \\\"\\\";\\n                var title = this.setContent(item, rule.title);\\n                var desc = this.setContent(item, rule.desc);\\n                var img = this.imgHandle(item, rule);\\n                var url = this.urlHandle(item, rule);\\n                var content = this.setContent(item, rule.content);\\n\\n                if (debug) {\\n                    var rx = {\\n                        title,\\n                        desc,\\n                        img,\\n                        content,\\n                        url\\n                    };\\n                    this.debuglog(i, item, rule, rx);\\n                }\\n\\n                if (i == list.length - 1) {\\n                    id = \\\"lastid_\\\" + page;\\n                    cls = \\\"lastmark\\\";\\n                }\\n                d.push({\\n                    title: title,\\n                    desc: desc,\\n                    pic_url: img,\\n                    url: (empty ? \\\"hiker://empty##\\\" : '') + url,\\n                    content: content,\\n                    col_type: rule.col_type,\\n                    extra: {\\n                        img: img,\\n                        id: id,\\n                        cls: cls,\\n                    },\\n                });\\n                if (i == list.length - 1 && show) {\\n                    d.push({\\n                        col_type: \\\"line\\\",\\n                        extra: {\\n                            id: \\\"pageline\\\",\\n                        },\\n                    });\\n\\n                    d.push({\\n                        title: \\\"â€œâ€œâ€â€<small>åŠ è½½ä¸­...</small>\\\",\\n                        url: \\\"hiker://empty\\\",\\n                        col_type: \\\"text_center_1\\\",\\n                        extra: {\\n                            id: \\\"pagenum\\\",\\n                        },\\n                    });\\n                }\\n            });\\n        } else {\\n            updateItem(\\\"pagenum\\\", {\\n                title: 'â€œâ€œâ€â€<font color=\\\"grey\\\"><small>åˆ°åº•äº†</small></font>',\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {\\n                    id: \\\"last\\\",\\n                },\\n            });\\n        }\\n        if (list.length == 0 && page == 1) {\\n            d.push({\\n                col_type: \\\"line\\\",\\n            });\\n            d.push({\\n                title: 'â€œâ€œâ€â€<font color=\\\"grey\\\"><small>æ— å†…å®¹</small></font>',\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {},\\n            });\\n        }\\n        if (this.nextPage()) {\\n            //log('t');\\n            storage0.putMyVar('yi_isnext', 't');\\n        } else {\\n            //log('f');\\n            storage0.putMyVar('yi_isnext', 'f');\\n        }\\n        if (auto) {\\n            //createNextPage();\\n            autoPage();\\n        }\\n    },\\n};\\n\\nvar extMethod = {\\n    ToParams: function() {\\n        var json = arguments[0];\\n        return Object.keys(json)\\n            .map((key) => key + \\\"=\\\" + json[key])\\n            .join(\\\"&\\\");\\n    },\\n    urlParse: function(u) {\\n        var dict = {};\\n        dict.Source = u;\\n        let params = (url) => {\\n            let queryParams = {};\\n            let reg = /([^?=&]+)=([^?=&]+)/g;\\n            url.replace(reg, function() {\\n                queryParams[arguments[1]] = arguments[2];\\n            });\\n            return queryParams;\\n        };\\n        var javaUrl = JavaImporter(java.net.URL);\\n        with(javaUrl) {\\n            var url = new URL(u);\\n            dict.Protocol = url.getProtocol();\\n            dict.Host = url.getHost();\\n            dict.Port = url.getPort();\\n            dict.File = url.getFile();\\n            dict.Path = url.getPath();\\n            dict.Ref = url.getRef();\\n            dict.Hosts = `${dict.Protocol}://${url.getHost()}`;\\n        }\\n        dict.Params = params(u);\\n        return dict;\\n    },\\n    isEqual: function(x, y) {\\n        const ok = Object.keys,\\n            tx = typeof x,\\n            ty = typeof y;\\n        return x && y && tx === \\\"object\\\" && tx === ty ?\\n            ok(x).length === ok(y).length &&\\n            ok(x).every((key) => this.isEqual(x[key], y[key])) : x === y;\\n    },\\n    findDifferentIndex: function(str1, str2) {\\n        const diffChars = [];\\n        for (let i = 0; i < str2.length; i++) {\\n            if (str1[i] !== str2[i]) {\\n                diffChars.push({\\n                    index: i,\\n                    s1: str1[i],\\n                    s2: str2[i],\\n                });\\n            }\\n        }\\n        return diffChars;\\n    },\\n    replaceCharAt: function(str, index, replacement) {\\n        if (index < 0 || index >= str.length) {\\n            return str;\\n        }\\n        //log(index)\\n        const arr = str.split(\\\"\\\");\\n        arr[index] = replacement;\\n        return arr.join(\\\"\\\");\\n    },\\n    getObjectKeysDiff: function(obj1, obj2) {\\n        const differentKeys = [];\\n        for (let key in obj1) {\\n            if (!obj2.hasOwnProperty(key) || obj1[key] !== obj2[key]) {\\n                differentKeys.push(key);\\n            }\\n        }\\n        for (let key in obj2) {\\n            if (!obj1.hasOwnProperty(key)) {\\n                differentKeys.push(key);\\n            }\\n        }\\n        return differentKeys;\\n    },\\n    getNextUrl: function(source, target, params) {\\n        var u1 = this.urlParse(source);\\n        var u2 = this.urlParse(target);\\n        var pa = undefined;\\n        if (typeof params == \\\"object\\\") {\\n            pa = params.hasOwnProperty(\\\"ç‰¹å¾\\\") ? params.ç‰¹å¾ : undefined;\\n        }\\n        var nexturl = source;\\n        var ca = Object.keys(u2.Params).length == 0 ? \\\"\\\" : \\\"?\\\";\\n        if (pa != undefined) {\\n            var rs = String(u2.Path).replace(new RegExp(pa), \\\"$1fypage\\\");\\n            nexturl = u2.Hosts + rs + ca + this.ToParams(u2.Params);\\n        } else {\\n            if (this.isEqual(u1.Params, u2.Params)) {\\n                if (dt_debug) {\\n                    log(u1.Path);\\n                    log(u2.Path);\\n                }\\n                var df = this.findDifferentIndex(String(u1.Path), String(u2.Path));\\n                if (dt_debug) {\\n                    log(df);\\n                }\\n                if (df.length == 1) {\\n                    var re = df[0].index;\\n                } else {\\n                    var f = df.filter((x) => /\\\\d+/.test(x.s2));\\n                    var re = f[0].index;\\n                }\\n                var eq = this.replaceCharAt(String(u2.Path), re, \\\"fypage\\\");\\n                nexturl = u2.Hosts + eq + ca + this.ToParams(u2.Params);\\n            } else {\\n                var ep = this.getObjectKeysDiff(u1.Params, u2.Params)\\n                if (ep.length == 1) {\\n                    u1.Params[ep[0]] = 'fypage'\\n                } else {\\n                    log(ep);\\n                }\\n                var eq = String(u1.Path).replace(/\\\\d+/, \\\"fypage\\\");\\n                nexturl = u1.Hosts + eq + ca + this.ToParams(u1.Params);\\n            }\\n        }\\n        //log('next:'+nexturl)\\n        return nexturl;\\n    },\\n};\\n\\nfunction getTruelink(mark, url, page) {\\n    var p = getMyVar(mark, url).replace(\\\"fypage\\\", page);\\n    if (page == 1) {\\n        return getMyVar(\\\"yi_firstpage\\\", p);\\n    } else if (p != \\\"\\\") {\\n        return p;\\n    } else {\\n        return url;\\n    }\\n}\\n//æ„å»º\\nfunction createNextPage() {\\n    let startnum = 1;\\n    var obj = arguments[0];\\n    if (true_url != getMyVar(\\\"yi_pageurl\\\", \\\"\\\")) {\\n        clearMyVar(\\\"yi_pageurl\\\");\\n    }\\n    if (page == startnum && getMyVar(\\\"yi_pageurl\\\") == \\\"\\\") {\\n        putMyVar(\\\"yi_firstpage\\\", true_url);\\n        try {\\n            var next = eval(ä¸‹ä¸€é¡µ);\\n            //log(\\\"next\\\");\\n            //log(next);\\n        } catch {\\n            log(\\\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\\\");\\n            next = \\\"\\\";\\n        }\\n        if (next != \\\"\\\") {\\n            var nxurl = extMethod.getNextUrl(true_url, next, obj);\\n            //log(\\\"nxurl:\\\" + nxurl);\\n            putMyVar(çŠ¶æ€, nxurl);\\n            putMyVar(\\\"yi_pageurl\\\", nxurl);\\n        }\\n    }\\n}\\n\\nfunction autoPage() {\\n    if (page == 1) {\\n        putMyVar(\\\"yi_firstpage\\\", true_url);\\n    }\\n    try {\\n        var next = eval(ä¸‹ä¸€é¡µ);\\n        //log(\\\"next\\\");\\n        //log('next:'+next);\\n    } catch {\\n        log(\\\"å¯èƒ½ä¸å­˜åœ¨ä¸‹ä¸€é¡µæˆ–è€…ä¸‹ä¸€é¡µå®šä½æœ‰é—®é¢˜\\\");\\n        next = \\\"\\\";\\n    }\\n    if (next != \\\"\\\") {\\n        putMyVar(çŠ¶æ€, next);\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"ç¯å¢ƒå°è£…\",\"path\":\"repair\",\"rule\":\"js:\\n/*\\n2023-10-15 by Î±\\n*/\\n\\nvar document = {};\\nvar window = {\\n    location: {\\n        reload: function() {\\n            return;\\n        }\\n    }\\n};\\n\\n// å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç”¨äºå­˜å‚¨ cookie åç§°å’Œå€¼çš„é”®å€¼å¯¹\\nvar cookies = {};\\nObject.defineProperty(document, 'cookie', {\\n    enumerable: true,\\n    configurable: true,\\n    get: function() {\\n        return Object.entries(cookies).map(([key, value]) => `${key}=${value}`).join('; ');\\n    },\\n    set: function(value) {\\n        var list = [];\\n        if (value.includes(';')) {\\n            list = value.split(';');\\n        } else {\\n            list = [value];\\n        }\\n        list.forEach(x => {\\n            var index = x.indexOf(\\\"=\\\");\\n            var key = x.substring(0, index).trim();\\n            var value = x.substring(index + 1);\\n            cookies[key] = value;\\n        })\\n    }\\n});\\n\\nfunction guard(url, headobj) {\\n    var head = headobj ? headobj : {};\\n    head['headers'] = head['headers'] ? head['headers'] : {};\\n    head['headers']['Cookie'] = getCookie(url);\\n    //log(head)\\n    var html = fetch(url, head);\\n    if (html.includes('_guard/auto.js')) {\\n        document[\\\"cookie\\\"] = getCookie(url);\\n        eval(fetch(getHome(url) + '/_guard/auto.js'))\\n        head['headers']['Cookie'] = document[\\\"cookie\\\"];\\n        html = fetch(url, head);\\n    }\\n    //log(document[\\\"cookie\\\"])\\n    return html;\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"è®¾ç½®\",\"path\":\"setting\",\"rule\":\"js:\\neval(fetch('file:///storage/emulated/0/Download/web/setui.js'))\"},{\"col_type\":\"movie_3\",\"name\":\"é»˜è®¤å‚æ•°\",\"path\":\"def\",\"rule\":\"js:\\nvar onfile = true;\\nlet def = {};\\nif (onfile) {\\n    eval(fetch('file:///storage/emulated/0/Download/web/def.js'))\\n} else {\\n    def = {\\n        style: '1',\\n        æ¯é¡µæ•°é‡: 30,\\n        åˆ†é¡µé˜ˆå€¼: 30,\\n    }\\n}\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"åŠ¨æ€åˆ†ç±»æ”¹\",\"path\":\"dtfl\",\"rule\":\"js:\\n/*\\nVer 2023-10-28 1.0\\nå¤‡æ³¨ï¼šä¸è¦ç”¨æµ·é˜”ä»£ç æ ¼å¼åŒ– å†…å®¹ä¼šå‡ºé”™\\nå¿…é¡»å‚æ•°ï¼š\\nåˆ†ç±»é¢œè‰² å¤§ç±»å®šä½ \\nå°ç±»å®šä½ åˆ†ç±»æ ‡é¢˜ åˆ†ç±»é“¾æ¥\\nhtml =>æºç  page =>é¡µç \\nå¯é€‰å‚æ•°ï¼š\\næ‹¼æ¥åˆ†ç±» æŠ˜å æ ‡è®° å±•å¼€æ ‡è®° æ’é™¤\\nå¤§ç±»é“¾æ¥ å¤§ç±»æ ‡é¢˜ æ¸…é™¤é”® å¼€å¯æŠ˜å \\né™„åŠ å®šä½\\nè¯´æ˜ï¼š\\nå¤–é¢ç”¨getMyVar(MY_RULE.url) æˆ–è€… çŠ¶æ€ å–é“¾æ¥\\né­”æ”¹:Î±\\n*/\\n\\nlet empty = \\\"hiker://empty\\\";\\nlet categories = [];\\nif (typeof (æ‹¼æ¥åˆ†ç±») != 'undefined' && æ‹¼æ¥åˆ†ç±» != '') {\\n    categories = [pdfa(html, å¤§ç±»å®šä½).join('\\\\n')];\\n    if (æ‹¼æ¥åˆ†ç±».includes(';')) {\\n        æ‹¼æ¥åˆ†ç±» = æ‹¼æ¥åˆ†ç±».split(';');\\n    }\\n    if (æ‹¼æ¥åˆ†ç±».constructor == Array) {\\n        æ‹¼æ¥åˆ†ç±».forEach(item => {\\n            categories = categories.concat(pdfa(html, item));\\n        })\\n    } else {\\n        categories = [pdfa(html, å¤§ç±»å®šä½).join('\\\\n')].concat(pdfa(html, æ‹¼æ¥åˆ†ç±»));\\n    }\\n    if (typeof (é™„åŠ å®šä½) != 'undefined' && é™„åŠ å®šä½.length > 0) {\\n        é™„åŠ å®šä½.forEach(x => {\\n            var ä¸€çº§ = pdfa(html, x.ä¸€çº§å®šä½).map(s => {\\n                var å®šä½ = pdfa(s, x.å°ç±»).map(q => {\\n                    var title = pdfh(q, x.æ ‡é¢˜);\\n                    var url = 'a'\\n                    if (x.é“¾æ¥.includes('@@')) {\\n                        state = x.é“¾æ¥.split('@@')[0]\\n                        value = pdfh(q, x.é“¾æ¥.split('@@')[1]);\\n                        if (x.è½¬æ¢ == true) {\\n                            return `<li data-type=\\\"${state}\\\" data-val=\\\"${value}\\\"><a href=\\\"\\\">${title}</a></li>`\\n                        } else {\\n                            return `<a type=\\\"@extra\\\" state=\\\"${state}\\\" value=\\\"${value}\\\">${title}</a>`;\\n                        }\\n                    } else {\\n                        href = pd(q, x.é“¾æ¥);\\n                        return `<a href=\\\"${href}\\\">${title}</a>`;\\n                    }\\n                });\\n                return å®šä½;\\n            });\\n            categories.push(ä¸€çº§.join('\\\\n'));\\n        });\\n    }\\n} else {\\n    categories = [pdfa(html, å¤§ç±»å®šä½).join('\\\\n')];\\n}\\n\\nlet items = [];\\nlet cates = [];\\nlet init_cate = new Array(20).fill(\\\"0\\\");\\nconst fold = getMyVar(MY_RULE.group, \\\"0\\\");\\nconst cate_temp = JSON.parse(getMyVar(\\\"head.cate\\\", JSON.stringify(init_cate)));\\nvar æŠ˜å çŠ¶æ€ = (typeof (å¼€å¯æŠ˜å ) != 'undefined') ? å¼€å¯æŠ˜å  : true;\\nvar æŠ˜å  = (typeof (æŠ˜å æ ‡è®°) != 'undefined' && æŠ˜å æ ‡è®° != '') ? æŠ˜å æ ‡è®° : 'â€œâ€œâ€â€' + 'âˆ¨'.fontcolor(\\\"#FF0000\\\");\\nvar å±•å¼€ = (typeof (å±•å¼€æ ‡è®°) != 'undefined' && å±•å¼€æ ‡è®° != '') ? å±•å¼€æ ‡è®° : 'â€œâ€œâ€â€' + 'âˆ§'.fontcolor(\\\"#1aad19\\\");\\nvar æ¸…é™¤ = (typeof (æ¸…é™¤é”®) != 'undefined' && æ¸…é™¤é”® != '') ? æ¸…é™¤é”® : [];\\nvar çŠ¶æ€ = (typeof (çŠ¶æ€æ ‡è®°) != 'undefined' && çŠ¶æ€æ ‡è®° != '') ? çŠ¶æ€æ ‡è®° : MY_RULE.url;\\nvar å¤§ç±»å¤„ç† = typeof (ä¸€çº§åˆ†ç±»å¤„ç†) != 'undefined' ? true : false;\\nvar æœç´¢ = typeof (å¼€å¯æœç´¢) != 'undefined' ? å¼€å¯æœç´¢ : false;\\nvar å…¨æ¸… = (typeof (å…¨æ¸…é”®) != 'undefined' && å…¨æ¸…é”® != '') ? å…¨æ¸…é”® : [];\\nå…¨æ¸….unshift('yi_firstpage');\\n\\n\\nif (parseInt(page) === 1) {\\n    if (æœç´¢) {\\n        d.push({\\n            title: \\\"\\\",\\n            url: \\\"'hiker://search?rule=\\\" + MY_RULE.title + \\\"&s='+input\\\",\\n            desc: \\\"æœç´¢å…³é”®è¯\\\",\\n            col_type: \\\"input\\\",\\n            extra: {\\n                defaultValue: getMyVar('keyword', ''),\\n                onChange: $.toString(() => {\\n                    putMyVar('keyword', input);\\n                })\\n            }\\n        })\\n    }\\n    if (æŠ˜å çŠ¶æ€) {\\n        if (page == 1) {\\n            items.push({\\n                title: fold === '1' ? æŠ˜å  : å±•å¼€,\\n                url: $(\\\"#noLoading#\\\").lazyRule((title, fold, u, all, exps) => {\\n                    var fold = getMyVar(MY_RULE.group, fold);\\n                    var [å±•å¼€, æŠ˜å ] = exps;\\n                    if (fold == 1) {\\n                        var cx = findItemsByCls(title + 'cate_button');\\n                        storage0.putMyVar('cate_button', cx);\\n                        deleteItemByCls(title + 'cate_button');\\n                    } else {\\n                        var cx = storage0.getMyVar('cate_button', []).map(x => {\\n                            x['col_type'] = x['col_type'] ? x['col_type'] : x['type'];\\n                            return x;\\n                        });\\n                        addItemAfter(title + 'cate_line', cx)\\n                    }\\n                    /*all.forEach((item) => {\\n                      clearMyVar(item);\\n                    });*/\\n                    updateItem(title + 'cate_exp', {\\n                        title: fold == 1 ? å±•å¼€ : æŠ˜å ,\\n                    })\\n                    putMyVar(MY_RULE.group, fold === \\\"1\\\" ? \\\"0\\\" : \\\"1\\\");\\n                    return \\\"hiker://empty\\\";\\n                }, MY_RULE.title, fold, çŠ¶æ€, å…¨æ¸…, [å±•å¼€, æŠ˜å ]),\\n                col_type: 'scroll_button',\\n                extra: {\\n                    id: MY_RULE.title + 'cate_exp',\\n                    longClick: [{\\n                        title: 'æ¸…é™¤çŠ¶æ€',\\n                        js: $.toString((x, all, cl) => {\\n                            clearMyVar(x);\\n                            clearMyVar('head.cate');\\n                            all.forEach((item) => {\\n                                clearMyVar(item)\\n                            })\\n                            cl.forEach((item) => {\\n                                clearMyVar(item)\\n                            })\\n                            refreshPage();\\n                        }, çŠ¶æ€, å…¨æ¸…, æ¸…é™¤)\\n                    }]\\n                }\\n            })\\n        }\\n    }\\n    let setTitle = (k, i, t) => {\\n        return k == i ? \\\"â€œâ€œâ€â€\\\" + t.fontcolor(åˆ†ç±»é¢œè‰²) : t\\n    }\\n    categories.forEach((category, index) => {\\n        let sub_categories = [];\\n        if (å°ç±»å®šä½.includes(';')) {\\n            sub_categories = pdfa(category, å°ç±»å®šä½.split(';')[0]);\\n            if (sub_categories.length == 0) {\\n                sub_categories = pdfa(category, å°ç±»å®šä½.split(';')[1]);\\n            }\\n        } else {\\n            sub_categories = pdfa(category, å°ç±»å®šä½);\\n        }\\n        if (index === 0) {\\n            sub_categories.forEach((item, key) => {\\n                let _å¤§ç±»é“¾æ¥ = (typeof (å¤§ç±»é“¾æ¥) != 'undefined' && å¤§ç±»é“¾æ¥ != '') ? å¤§ç±»é“¾æ¥ : åˆ†ç±»é“¾æ¥;\\n\\n                let _å¤§ç±»æ ‡é¢˜ = (typeof (å¤§ç±»æ ‡é¢˜) != 'undefined' && å¤§ç±»æ ‡é¢˜ != '') ? å¤§ç±»æ ‡é¢˜ : åˆ†ç±»æ ‡é¢˜;\\n\\n                let title = pdfh(item, _å¤§ç±»æ ‡é¢˜);\\n                if (typeof (æ’é™¤) != 'undefined' && æ’é™¤ != '') {\\n                    title = title.replace(new RegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                }\\n                let params = {\\n                    cate_temp: cate_temp, key: key, page: page, clears: æ¸…é™¤, state: çŠ¶æ€, allclears: å…¨æ¸…\\n                }\\n\\n                let url = pd(item, _å¤§ç±»é“¾æ¥);\\n                if (å¤§ç±»å¤„ç†) {\\n                    //log(ä¸€çº§åˆ†ç±»å¤„ç†)\\n                    //log($.stringify(ä¸€çº§åˆ†ç±»å¤„ç†))\\n                    let input = url;\\n                    eval(\\\"result = \\\" + ä¸€çº§åˆ†ç±»å¤„ç†);\\n                    //log(result)\\n                    url = result;\\n                }\\n                items.push({\\n                    title: setTitle(key.toString(), cate_temp[index], title),\\n                    col_type: 'scroll_button',\\n                    url: $(url + '#noLoading#').lazyRule((params) => {\\n                        let new_cate = [];\\n                        params.clears.forEach((item) => {\\n                            clearMyVar(item)\\n                        })\\n                        params.allclears.forEach((item) => {\\n                            clearMyVar(item)\\n                        })\\n\\n                        params.cate_temp.forEach((cate, index) => {\\n                            new_cate.push(index === 0 ? params.key.toString() : \\\"0\\\")\\n                        })\\n                        putMyVar(\\\"head.cate\\\", JSON.stringify(new_cate));\\n                        putMyVar(params.state, input);\\n                        refreshPage(true);\\n                        return \\\"hiker://empty\\\";\\n                    }, params)\\n                });\\n            });\\n            items.push({\\n                col_type: \\\"blank_block\\\",\\n                extra: {\\n                    id: MY_RULE.title + 'cate_line',\\n                }\\n            })\\n        } else {\\n            sub_categories.forEach((item, key) => {\\n                var extrapos = false;\\n                if (item.includes('type=\\\"@extra\\\"')) {\\n                    extrapos = true;\\n                    //log('é™„åŠ å®šä½')\\n                }\\n\\n                if (extrapos) {\\n                    var title = pdfh(item, 'a&&Text');\\n                    if (typeof (æ’é™¤) != 'undefined' && æ’é™¤ != '') {\\n                        title = title.replace(new RegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                    }\\n                    var json = {\\n                        type: pdfh(item, 'a&&state'),\\n                        value: pdfh(item, 'a&&value'),\\n                    }\\n                } else {\\n\\n                    var title = pdfh(item, åˆ†ç±»æ ‡é¢˜);\\n                    if (typeof (æ’é™¤) != 'undefined' && æ’é™¤ != '') {\\n                        title = title.replace(new RegExp(æ’é™¤, \\\"g\\\"), \\\"\\\");\\n                    }\\n\\n                    var json = '';\\n                    switch (true) {\\n                        case åˆ†ç±»é“¾æ¥.includes('@@@'):\\n                            json = {\\n                                type: pdfh(item, åˆ†ç±»é“¾æ¥.split('@@@')[0]),\\n                                value: pdfh(item, åˆ†ç±»é“¾æ¥.split('@@@')[1]),\\n                            }\\n                            break;\\n                        case åˆ†ç±»é“¾æ¥.includes('@@'):\\n                            json = {\\n                                type: åˆ†ç±»é“¾æ¥.split('@@')[0],\\n                                value: pdfh(item, åˆ†ç±»é“¾æ¥.split('@@')[1]),\\n                            }\\n                            break;\\n                        default:\\n                            json = pd(item, åˆ†ç±»é“¾æ¥);\\n                            break;\\n                    }\\n                    /*var json=åˆ†ç±»é“¾æ¥.includes('@@@')?{\\n                         type:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[0]),\\n                         value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@@')[1]),\\n                     }:pd(item,åˆ†ç±»é“¾æ¥);\\n                     \\n                     json=åˆ†ç±»é“¾æ¥.includes('@@')?{\\n                         type:åˆ†ç±»é“¾æ¥.split('@@')[0],\\n                         value:pdfh(item,åˆ†ç±»é“¾æ¥.split('@@')[1]),\\n                     }:pd(item,åˆ†ç±»é“¾æ¥);*/\\n\\n                }\\n\\n                let params = {\\n                    cate_temp: cate_temp, index: index, key: key, page: page, json: json, state: çŠ¶æ€, allclears: å…¨æ¸…\\n                }\\n                cates.push({\\n                    title: setTitle(key.toString(), cate_temp[index], title),\\n                    url: $('hiker://empty' + '#noLoading#').lazyRule((params) => {\\n                        params.allclears.forEach((item) => {\\n                            clearMyVar(item)\\n                        })\\n                        params.cate_temp[params.index] = params.key.toString();\\n                        putMyVar(\\\"head.cate\\\", JSON.stringify(params.cate_temp));\\n                        if (params.json.constructor === Object) {\\n                            putMyVar('dt_' + params.json.type, params.json.value);\\n                        } else {\\n                            putMyVar(params.state, params.json);\\n                        }\\n                        refreshPage(true);\\n                        return \\\"hiker://empty\\\";\\n                    }, params),\\n                    col_type: 'scroll_button',\\n                    extra: {\\n                        cls: MY_RULE.title + 'cate_button',\\n                    }\\n                });\\n            });\\n            cates.push({\\n                col_type: \\\"blank_block\\\",\\n                extra: {\\n                    cls: MY_RULE.title + 'cate_button',\\n                }\\n            });\\n        }\\n    })\\n}\\n\\n\\nif (fold === \\\"1\\\" || æŠ˜å çŠ¶æ€ == false) {\\n    items = items.concat(cates);\\n}\\nif (fold === \\\"0\\\") {\\n    storage0.putMyVar('cate_button', cates)\\n}\\nif (typeof setPreResult != 'undefined') {\\n    items = d.concat(items);\\n    //æ¸…ç©ºç»§æ‰¿æ•°ç»„\\n    d.length = 0;\\n    setPreResult(items);\\n} else {\\n    items.forEach(item => {\\n        d.push(item);\\n    })\\n}\\n\"}]","proxy":"","icon":""}