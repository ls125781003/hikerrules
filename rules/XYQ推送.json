{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"推送","path":"push","rule":"js:\nlet items = [];\nlet pushin = decodeURIComponent(getParam(\"pushurl\"));\nlet tvip = getPublicItem('hikertvboxset', '');\n\nitems.push({\n    title: '设置电视IP',\n    url: $('hiker://empty').lazyRule(() => {\n        let def = getIP();\n        let ipb = Number(def.substring(def.lastIndexOf('.') + 1));\n        let ipq = def.substring(0, def.lastIndexOf('.') + 1);\n        let n = [];\n        for (let i = 0; i <= 255; i++) {\n            if (i != ipb) {\n                let nub = 'http://' + ipq + i + ':';\n                for (let j = 9978; j < 9980; j++) {\n                    n.push({\n                        url: nub + j,\n                        options: {\n                            timeout: 100,\n                            onlyHeaders: true,\n                            withStatusCode: true\n                        }\n                    });\n                }\n\n            }\n        }\n        let bat = batchFetch(n);\n        for (let i = 0; i < bat.length; i++) {\n            let fet = JSON.parse(bat[i]).statusCode;\n            if (fet == 200) {\n                //log(\"成功\");\n                //log(\"刷新IP\" + n[i].url);\n                confirm({\n                    title: '检测提示',\n                    content: '检测到'+n[i].url+'可用，确认是这个吗？',\n                    confirm: $.toString((newip) => {\n                        setPublicItem('hikertvboxset', newip);\n                        refreshPage();\n                    },n[i].url)\n                })\n                //setPublicItem('xyqzdytp', n[i].url);\n                //break;\n            }\n        }\n        //log(\"循环\");\n        return \"hiker://empty\"\n    }),\n    col_type: 'scroll_button'\n});\nitems.push({\n    title: '当前：' + tvip,\n    url: \"input://\" + getPublicItem('hikertvboxset', 'http://' + getIP() + ':9978') + \"////请输入TVBox端的IP地址，如http://\" + getIP() + \":9978.js:setPublicItem('hikertvboxset',input);refreshPage()\",\n    col_type: 'scroll_button'\n});\nvar purl = pushin;\n\n\nif (pushin.includes('\\n') && !pushin.startsWith('{')) {\n    purl = pushin.replace(\"\\n\", '$');\n}\nif (pushin.startsWith('http') && pushin.includes(';{')) {\n    purl = JSON.stringify({\n        \"name\": \"海阔直链推送\",\n        \"url\": pushin\n    })\n}\nif (pushin.startsWith('https://www.aliyundrive.com/s/')) {\n    let reftoken = JSON.parse(fetch('hiker://files/rules/icy/icy-ali-token.json', {}))[0].refresh_token;\n    purl = JSON.stringify({\n        \"url\": pushin,\n        \"refresh_token\": reftoken\n    })\n}\nif (pushin.includes(':52020')) {\n    if (pushin.includes('redirectPlayUrl')) {\n        purl = JSON.stringify({\n            \"name\": \"海阔投屏直链\",\n            \"url\": pushin\n        })\n    } else {\n        purl = JSON.stringify({\n            \"name\": \"海阔网页投屏\",\n            \"url\": pushin\n        })\n    }\n}\n\n//log('推送'+purl);\nvar state = request(tvip + '/action', {\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        //'X-Requested-With': 'XMLHttpRequest',\n        'Referer': tvip\n    },\n    timeout: 2000,\n    body: 'do=push&url=' + purl.replace(/\\&/g, '＆＆').replace(/video\\:\\/\\//g,''),\n    method: 'POST'\n});\n//log(state);\nif (state == 'ok') {\n    //log(state);\n    items.push({\n        title: \"√\" + state,\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\"\n    });\n} else {\n    //log(state);\n    items.push({\n        title: \"╳\" + state,\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\"\n    });\n\n}\nsetResult(items);"}],"title":"XYQ推送","author":"香雅情","version":2,"type":"tool","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nlet d = [];\nd.push({\n    title: '设置电视IP',\n    //url: \"input://\" + getPublicItem('hikertvboxset', 'http://' + getIP() + ':9978') + \"////请输入tvbox推送IP地址，如http://\" + getIP() + \":9978.js:setPublicItem('hikertvboxset',input);refreshPage()\",\n    url: $('hiker://empty').lazyRule(() => {\n        let def = getIP();\n        let ipb = Number(def.substring(def.lastIndexOf('.') + 1));\n        let ipq = def.substring(0, def.lastIndexOf('.') + 1);\n        let n = [];\n        for (let i = 0; i <= 255; i++) {\n            if (i != ipb) {\n                let nub = 'http://' + ipq + i + ':';\n                for (let j = 9978; j < 9980; j++) {\n                    n.push({\n                        url: nub + j,\n                        options: {\n                            timeout: 100,\n                            onlyHeaders: true,\n                            withStatusCode: true\n                        }\n                    });\n                }\n\n            }\n        }\n        let bat = batchFetch(n);\n        for (let i = 0; i < bat.length; i++) {\n            let fet = JSON.parse(bat[i]).statusCode;\n            if (fet == 200) {\n                //log(\"成功\");\n                //log(\"刷新IP\" + n[i].url);\n                confirm({\n                    title: '检测提示',\n                    content: '检测到'+n[i].url+'可用，确认是这个吗？',\n                    confirm: $.toString((newip) => {\n                        setPublicItem('hikertvboxset', newip);\n                        refreshPage();\n                    },n[i].url)\n                })\n                //setPublicItem('xyqzdytp', n[i].url);\n                //break;\n            }\n        }\n        //log(\"循环\");\n        return \"hiker://empty\"\n    }),\n    col_type: 'scroll_button'\n});\nd.push({\n    title: getPublicItem('hikertvboxset', ''),\n    //url: 'hiker://empty',\n    url: \"input://\" + getPublicItem('hikertvboxset', 'http://' + getIP() + ':9978') + \"////请输入tvbox推送IP地址，如http://\" + getIP() + \":9978.js:setPublicItem('hikertvboxset',input);refreshPage()\",\n    col_type: 'scroll_button'\n});\n\nd.push({\n    title: \"推送\",\n    url: $.toString(() => {\n        clearMyVar('name');\n        //var link = 'hiker://page/push.html?url=' + encodeURIComponent(input.replace(\"#isMusic=true#\", '').replace('#isVideo=true#', ''));\n        var link = \"hiker://page/push?pushurl=\" + encodeURIComponent(input);\n\n        if (input.startsWith('http') || input.startsWith('magnet:')|| input.startsWith('ed2k:') || (input.includes(\"\\n\") && !input.startsWith(\"{\"))) {\n            return link;\n        } else if (input.startsWith(\"{\") && input.endsWith(\"}\")) {\n            return link;\n        } else if (/\\.torrent/.test(input)) {\n            return 'toast://不支持推送这种链接。'\n        } else {\n            return 'toast://请输入正确的链接。'\n        }\n    }),\n    extra: {\n        titleVisible: true\n    },\n    col_type: 'input'\n});\nd.push({\n    title: \"TVB搜索\",\n    url: $.toString(() => {\n        let tvip = getPublicItem('hikertvboxset', '');\n        let state = 'false';\n        if (tvip != '' && tvip.includes(':997')) {\n            var state = request(tvip + '/action', {\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                    //'X-Requested-With': 'XMLHttpRequest',\n                    'Referer': tvip\n                },\n                timeout: 2000,\n                body: 'do=search&word=' + input,\n                method: 'POST'\n            });\n        }\n        //log(state);\n        if (state == 'ok') {\n            return 'toast://搜索推送成功，请注意观看电视端tvbox界面';\n        } else {\n            return 'toast://搜索推送失败'\n        }\n    }),\n    extra: {\n        titleVisible: true\n    },\n    col_type: 'input'\n});\n//调用代码示例\n//return 'hiker://page/push?rule=XYQ推送&pushurl=' + encodeURIComponent(input);\n//url: 'hiker://page/push?rule=XYQ推送&pushurl='+encodeURIComponent(url);\nd.push({\n    title: '下载TVBox推送插件',\n    url: 'https://www.123pan.com/s/alSeVv-lGO0A.html',\n    col_type: 'text_2'\n});\nd.push({\n    title: '查看TV设置教程',\n    url: 'https://www.123pan.com/Weboffice/?type=f&id=2096899&FileName=XYQTVBox%E6%AD%A5%E9%AA%A4%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E.pdf&Size=2293476&Etag=bbb0cc757337a3f3de778566fb67c367&S3KeyFlag=1812876007-0&CreateAt=1683645815&UpdateAt=1683646033&from=2&shareKey=alSeVv-lGO0A',\n    col_type: 'text_2'\n});\nd.push({\n    title: \"推送大家族\",\n    url: 'https://pd.qq.com/s/553sflwje?shareSource=5',\n    col_type: \"text_1\"\n});\nvar jump = ['tvbox云盘推送', '云盘君(推送)', 'AI影搜(推送)', 'MY阿里云盘', '香情影视', '虎牙直播(推送)'];\nfor (var j in jump) {\n    d.push({\n        title: jump[j],\n        url: 'hiker://home@' + jump[j],\n        col_type: \"text_3\"\n    });\n}\nsetResult(d);","searchFind":"","search_url":"","group":"②推送","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"推送\",\"path\":\"push\",\"rule\":\"js:\\nlet items = [];\\nlet pushin = decodeURIComponent(getParam(\\\"pushurl\\\"));\\nlet tvip = getPublicItem('hikertvboxset', '');\\n\\nitems.push({\\n    title: '设置电视IP',\\n    url: $('hiker://empty').lazyRule(() => {\\n        let def = getIP();\\n        let ipb = Number(def.substring(def.lastIndexOf('.') + 1));\\n        let ipq = def.substring(0, def.lastIndexOf('.') + 1);\\n        let n = [];\\n        for (let i = 0; i <= 255; i++) {\\n            if (i != ipb) {\\n                let nub = 'http://' + ipq + i + ':';\\n                for (let j = 9978; j < 9980; j++) {\\n                    n.push({\\n                        url: nub + j,\\n                        options: {\\n                            timeout: 100,\\n                            onlyHeaders: true,\\n                            withStatusCode: true\\n                        }\\n                    });\\n                }\\n\\n            }\\n        }\\n        let bat = batchFetch(n);\\n        for (let i = 0; i < bat.length; i++) {\\n            let fet = JSON.parse(bat[i]).statusCode;\\n            if (fet == 200) {\\n                //log(\\\"成功\\\");\\n                //log(\\\"刷新IP\\\" + n[i].url);\\n                confirm({\\n                    title: '检测提示',\\n                    content: '检测到'+n[i].url+'可用，确认是这个吗？',\\n                    confirm: $.toString((newip) => {\\n                        setPublicItem('hikertvboxset', newip);\\n                        refreshPage();\\n                    },n[i].url)\\n                })\\n                //setPublicItem('xyqzdytp', n[i].url);\\n                //break;\\n            }\\n        }\\n        //log(\\\"循环\\\");\\n        return \\\"hiker://empty\\\"\\n    }),\\n    col_type: 'scroll_button'\\n});\\nitems.push({\\n    title: '当前：' + tvip,\\n    url: \\\"input://\\\" + getPublicItem('hikertvboxset', 'http://' + getIP() + ':9978') + \\\"////请输入TVBox端的IP地址，如http://\\\" + getIP() + \\\":9978.js:setPublicItem('hikertvboxset',input);refreshPage()\\\",\\n    col_type: 'scroll_button'\\n});\\nvar purl = pushin;\\n\\n\\nif (pushin.includes('\\\\n') && !pushin.startsWith('{')) {\\n    purl = pushin.replace(\\\"\\\\n\\\", '$');\\n}\\nif (pushin.startsWith('http') && pushin.includes(';{')) {\\n    purl = JSON.stringify({\\n        \\\"name\\\": \\\"海阔直链推送\\\",\\n        \\\"url\\\": pushin\\n    })\\n}\\nif (pushin.startsWith('https://www.aliyundrive.com/s/')) {\\n    let reftoken = JSON.parse(fetch('hiker://files/rules/icy/icy-ali-token.json', {}))[0].refresh_token;\\n    purl = JSON.stringify({\\n        \\\"url\\\": pushin,\\n        \\\"refresh_token\\\": reftoken\\n    })\\n}\\nif (pushin.includes(':52020')) {\\n    if (pushin.includes('redirectPlayUrl')) {\\n        purl = JSON.stringify({\\n            \\\"name\\\": \\\"海阔投屏直链\\\",\\n            \\\"url\\\": pushin\\n        })\\n    } else {\\n        purl = JSON.stringify({\\n            \\\"name\\\": \\\"海阔网页投屏\\\",\\n            \\\"url\\\": pushin\\n        })\\n    }\\n}\\n\\n//log('推送'+purl);\\nvar state = request(tvip + '/action', {\\n    headers: {\\n        'Content-Type': 'application/x-www-form-urlencoded',\\n        //'X-Requested-With': 'XMLHttpRequest',\\n        'Referer': tvip\\n    },\\n    timeout: 2000,\\n    body: 'do=push&url=' + purl.replace(/\\\\&/g, '＆＆').replace(/video\\\\:\\\\/\\\\//g,''),\\n    method: 'POST'\\n});\\n//log(state);\\nif (state == 'ok') {\\n    //log(state);\\n    items.push({\\n        title: \\\"√\\\" + state,\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\"\\n    });\\n} else {\\n    //log(state);\\n    items.push({\\n        title: \\\"╳\\\" + state,\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\"\\n    });\\n\\n}\\nsetResult(items);\"}]","proxy":"","icon":""}