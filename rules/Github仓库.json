{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"æ³¨å†Œè¡¨","path":"registry","rule":"js:\nconst txt_name = \"githubregistry\";\nconst password = \"hiker721\";\n\nfunction getRegistry() {\n    try {\n        let registry = post(\"https://a6.qikekeji.com/txt/data/detail/\", {\n            body: {\n                txt_name: txt_name,\n                password: password\n            }\n        });\n        let rd = JSON.parse(registry).data;\n        registry = JSON.parse(rd.txt_content)[0].content || \"\";\n        return {\n            content: JSON.parse(registry),\n            vid: rd.v_id\n        };\n    } catch {\n        return {\n            content: []\n        };\n    }\n}\n\nfunction setRegistry(registry) {\n    try {\n        let res = post(\"https://a6.qikekeji.com/txt/data/save/\", {\n            body: {\n                txt_name: txt_name,\n                password: password,\n                txt_content: JSON.stringify([{\n                    \"title\": \"æ³¨å†Œè¡¨\",\n                    \"content\": JSON.stringify(registry.content)\n                }]),\n                v_id: registry.vid || \"\"\n            }\n        });\n        res = JSON.parse(res);\n        if (res.status === 1) {\n            clearMyVar(\"developer\");\n            return true;\n        }\n        return false;\n    } catch (e) {\n        log(e.toString());\n        return false\n    }\n}\n\n\nfunction getDeveloper(renovate) {\n    let developer = storage0.getMyVar(\"developer\", \"\");\n    if (!developer || renovate) {\n        developer = getRegistry().content;\n        storage0.putMyVar(\"developer\", developer);\n    }\n    return developer;\n}\n\nfunction setDevInfo(uesrName, info) {\n    let registry = getRegistry();\n    let index = registry.content.findIndex(v => v.name === uesrName);\n    registry.content.splice(index, 1, Object.assign(registry.content[index], info));\n    return setRegistry(registry);\n}\n\nfunction addDev(uesr) {\n    let registry = getRegistry();\n    registry.content.push(uesr);\n    return setRegistry(registry);\n}\n\nfunction deleteDev(uesrName) {\n    let registry = getRegistry();\n    let index = registry.content.findIndex(v => v.name === uesrName);\n    registry.content.splice(index, 1);\n    return setRegistry(registry);\n}\n\nfunction moveDev(uesrName, newIndex) {\n    let registry = getRegistry();\n    let index = registry.content.findIndex(v => v.name === uesrName);\n    let info = registry.content.splice(index, 1)[0];\n    registry.content.splice(newIndex, 0, info);\n    return setRegistry(registry);\n}\n$.exports = {\n    setRegistry: setRegistry,\n    getRegistry: getRegistry,\n    getDeveloper: getDeveloper,\n    setDevInfo: setDevInfo,\n    addDev: addDev,\n    deleteDev: deleteDev,\n    moveDev: moveDev\n};"},{"col_type":"movie_3","name":"GithubAPI","path":"GithubAPI","rule":"js:\nconst HOST = \"api.github.com\";\nconst basicUrl = \"https://\" + HOST;\n\nfunction getContents(repo, path, error, token) {\n    let headers = {\n        Accept: \"application/vnd.github.v3+json\",\n    };\n    let guest_token = token || getItem('guest_token', '');\n    if (guest_token) {\n        headers.Authorization = \"token \" + guest_token;\n    }\n    let res = fetch(basicUrl + \"/repos/\" + repo + \"/contents/\" + (path || \"\"), {\n        headers: headers\n    });\n    res = JSON.parse(res);\n    if (res.message && error) {\n        return error(res);\n    } else if (res.message) {\n        throw new Error(res.message);\n    }\n    return res;\n}\n\nfunction getRepoInfo(repo, token) {\n    let login = JSON.parse(fetch(basicUrl + \"/repos/\" + repo, {\n        headers: {\n            Accept: \"application/vnd.github.v3+json\",\n            Authorization: \"token \" + token\n        }\n    }));\n    if (login.message) {\n        throw new Error(login.message);\n    }\n    return login;\n}\n\nfunction createFile(repo, token, path, content, sha) {\n    let upUrl = basicUrl + \"/repos/\" + repo + \"/contents/\" + path;\n    try {\n        if (sha === void 0) {\n            sha = getContents(repo, path, void 0, token).sha;\n        }\n    } catch (e) {\n        if (e.message != \"Not Found\") {\n            throw e;\n        }\n    }\n    const res = JSON.parse(fetch(upUrl, {\n        body: {\n            branch: 'main',\n            message: 'upload',\n            content: base64Encode(content || \"\"),\n            path: path,\n            sha: sha || \"\"\n        },\n        headers: {\n            \"Authorization\": \"token \" + token,\n            'Content-Type': 'application/json; charset=utf-8',\n        },\n        method: \"PUT\"\n    }));\n    if (res.message) {\n        throw new Error(res.message);\n    }\n    return res;\n}\n\nfunction deleteFile(repo, token, path, sha) {\n    let deleteUrl = basicUrl + \"/repos/\" + repo + \"/contents/\" + path;\n    if (!sha) {\n        sha = getContents(repo, path).sha;\n    }\n    let res = JSON.parse(fetch(deleteUrl, {\n        headers: {\n            Accept: \"application/vnd.github.v3+json\",\n            Authorization: \"token \" + token\n        },\n        body: {\n            sha: sha,\n            message: \"åˆ é™¤è§„åˆ™\"\n        },\n        method: \"DELETE\",\n        withStatusCode: true\n    }));\n    if (res.statusCode === 200) {\n        java.lang.Thread.sleep(1650);\n        return true;\n    } else {\n        res = JSON.parse(res.body);\n        throw new Error(res.message);\n    }\n\n}\n\nfunction changeTable(repo, token, func, path) {\n    path = path || \"manifest.json\";\n    let summary = getContents(repo, path, (e) => {\n        if (e.message === \"Not Found\") {\n            return {\n                content: \"\"\n            };\n        } else {\n            throw new Error(\"æ‘˜è¦è¡¨è·å–å¤±è´¥\");\n        }\n    }, token);\n    let table;\n    if (summary.content) {\n        table = JSON.parse(base64Decode(summary.content));\n        if (!Array.isArray(table.rules)) {\n            table.rules = [];\n        }\n    } else {\n        table = {\n            rules: []\n        };\n    }\n    createFile(repo, token, path, JSON.stringify(func(table)), summary.sha || \"\");\n}\n$.exports = {\n    getContents: getContents,\n    getRepoInfo: getRepoInfo,\n    createFile: createFile,\n    deleteFile: deleteFile,\n    changeTable: changeTable\n}"},{"col_type":"movie_3","name":"æäº¤è§„åˆ™","path":"submit","rule":"const GithubAPI = $.require(\"GithubAPI?rule=Githubä»“åº“\");\nconst dirEnum = $.require(\"directoryEnum.json?rule=Githubä»“åº“\");\nconst utils = $.require(\"utils?rule=Githubä»“åº“\");\n$.exports = function(repo, token, MY_RULE, config) {\n    let pass, path, isRule;\n    let content='';\n    if (Array.isArray(MY_RULE)) {\n        path = dirEnum.SET + MY_RULE[0].group + \".json\";\n        //pass = \"æµ·é˜”è§†ç•Œé¦–é¡µåˆé›†è§„åˆ™ã€\" + MY_RULE[0].group + \"ã€‘ï¿¥home_rule_urlï¿¥\";\n        content=JSON.stringify(MY_RULE);\n    }else if (typeof(MY_RULE)=='string') {\n        let fileName;\n        log(MY_RULE);\n        if(/^(hiker|file):/.test(MY_RULE)){\n            content=fetch(MY_RULE);\n            fileName=MY_RULE.split('/').slice(-1)[0];\n            fileName=utils.removeFileExtension(fileName);\n            \n        }else{\n            return 'æš‚åªæ”¯æŒhiker|fileå¼€å¤´çš„æ–‡ä»¶åˆ†äº«'\n        }\n        \n        if(/\\.html$/.test(MY_RULE)){\n            path = dirEnum.HTML + fileName + \".html\";\n        }else if(/\\.js$/.test(MY_RULE)){\n            path = dirEnum.JS + fileName + \".js\";\n        }else if(/\\.json$/.test(MY_RULE)){\n            path = dirEnum.JSON + fileName + \".json\";\n        }else{\n            path = dirEnum.TXT + fileName + \".txt\";\n        }\n        //pass = \"æµ·é˜”è§†ç•Œé¦–é¡µåˆé›†è§„åˆ™ã€\" + MY_RULE[0].group + \"ã€‘ï¿¥home_rule_urlï¿¥\";\n        \n    }else {\n        isRule = true;\n        path = dirEnum.RULE + MY_RULE.title + \".json\";\n        //pass = \"æµ·é˜”è§†ç•Œé¦–é¡µé¢‘é“è§„åˆ™ã€\" + MY_RULE.title + \"ã€‘ï¿¥home_rule_urlï¿¥\";\n        content=JSON.stringify(MY_RULE);\n    }\n\n    try {\n        if (isRule) {\n            GithubAPI.changeTable(repo, token, table => {\n                let newIndex = {\n                    title: MY_RULE.title,\n                    icon: MY_RULE.icon,\n                    version: MY_RULE.version,\n                    author: MY_RULE.author,\n                    type: MY_RULE.type,\n                    group: MY_RULE.group,\n                    url: MY_RULE.url\n                };\n                let index = table.rules.findIndex(it => it.title == MY_RULE.title);\n                if (index > -1) {\n                    table.rules.splice(index, 1, newIndex);\n                } else {\n                    table.rules.push(newIndex);\n                }\n                return table;\n            });\n            java.lang.Thread.sleep(350);\n        }\n        GithubAPI.createFile(repo, token, path, content);\n        return \"ä¸Šä¼ æˆåŠŸ\";\n    } catch (e) {\n        log(e.toString());\n        return \"ä¸Šä¼ å¤±è´¥\";\n    }\n}"},{"col_type":"movie_3","name":"æ³¨å†Œ","path":"register","rule":"js:\nvar d = [];\naddListener(\"onClose\", $.toString(() => {\n    clearMyVar(\"ps_name\");\n    clearMyVar(\"ps_repo\");\n    clearMyVar(\"ps_token\");\n}));\n\nsetPageTitle(\"æ³¨å†Œ/ç™»é™†\");\nd.push({\n    col_type: \"input\",\n    desc: \"å±•ç¤ºåç§°\",\n    extra: {\n        onChange: $.toString(() => {\n            putMyVar(\"ps_name\", input);\n        }),\n        titleVisible: false\n    }\n});\nd.push({\n    col_type: \"input\",\n    desc: \"githubç”¨æˆ·å/ä»“åº“å\",\n    extra: {\n        onChange: $.toString(() => {\n            putMyVar(\"ps_repo\", input);\n        }),\n        titleVisible: false,\n    }\n});\n\nd.push({\n    col_type: \"input\",\n    desc: \"token\",\n    extra: {\n        type: \"password\",\n        onChange: $.toString(() => {\n            putMyVar(\"ps_token\", input);\n        }),\n        titleVisible: false,\n    }\n});\nd.push({\n    title: \"æ³¨å†Œ/ç™»å½•\",\n    url: $(\"#noLoading#\").lazyRule(() => {\n        showLoading(\"æ­£åœ¨æ³¨å†Œ/ç™»å½•...\");\n        let name = getMyVar(\"ps_name\", \"\");\n        if (name == \"\") {\n            return \"toast://ç”¨æˆ·åä¸èƒ½ä¸ºç©º\"\n        }\n        let repo = getMyVar(\"ps_repo\", \"\");\n        if (repo == \"\") {\n            return \"toast://repoä¸èƒ½ä¸ºç©º\"\n        }\n\n        let token = getMyVar(\"ps_token\", \"\");\n        if (token == \"\") {\n            return \"toast://tokenä¸èƒ½ä¸ºç©º\"\n        }\n        let user = {\n            name: name,\n            repo: repo,\n            token: token\n        };\n        const GithubAPI = $.require(\"GithubAPI\");\n        const Registry = $.require(\"registry\");\n        developer = Registry.getDeveloper(true);\n        let index = developer.findIndex(x => x.name === name && x.repo === repo);\n\n        if (index > -1) {\n            try {\n                GithubAPI.getRepoInfo(repo, token);\n                user.avatar=developer[index].avatar;\n                storage0.setItem(\"user\", user);\n                back();                \n                return \"toast://ç™»å½•æˆåŠŸ\";\n            } catch (e) {\n                hideLoading();\n                return \"toast://ç™»å½•å¤±è´¥ï¼š\" + e.toString();\n            }\n\n        } else if (developer.some(v => v.name === name || v.repo === repo)) {\n            hideLoading();\n            return \"toast://ä»“åº“å·²ç»å­˜åœ¨æˆ–ç”¨æˆ·åå·²ç»å­˜åœ¨\";\n        } else {\n            try {\n                if (!(GithubAPI.getRepoInfo(repo, token).private === false)) {\n                    return \"toast://æ³¨å†Œå¤±è´¥ï¼šç§å¯†ä»“åº“\";\n                }\n            } catch (e) {\n                return \"toast://ä»“åº“éªŒè¯å¤±è´¥:\" + e.toString();\n            }\n            if (Registry.addDev(user)) {\n                storage0.setItem(\"user\", user);\n                back();\n                return \"toast://æ³¨å†ŒæˆåŠŸ\";\n            }\n            hideLoading();\n            return \"toast://æ³¨å†Œå¤±è´¥\";\n        }\n\n    }),\n    col_type: \"text_center_1\",\n});\nsetResult(d);"},{"col_type":"movie_3","name":"å·¥å…·","path":"utils","rule":"js:\nfunction Color(text, color) {\n    return text.toString().fontcolor(color);\n}\n\nfunction HtmlTag(tag, text) {\n    return \"<\" + tag + \">\" + text + \"</\" + tag + \">\";\n}\n\nfunction Rich(text) {\n    return \"â€œâ€œâ€â€\" + text;\n}\n\nfunction Small(text) {\n    return HtmlTag(\"small\", text);\n}\n\nfunction removeFileExtension(fileName) {\n    var lastIndex = fileName.lastIndexOf(\".\");\n    if (lastIndex === -1) { // å¦‚æœæ–‡ä»¶åæ²¡æœ‰æ‰©å±•åï¼Œåˆ™è¿”å›åŸå§‹æ–‡ä»¶å\n        return fileName;\n    }\n    return fileName.substr(0, lastIndex);\n}\n\nfunction GetDirCn(ext){\n    let name='';\n    switch(ext){\n        case 'RULE':\n          name='å°ç¨‹åº';\n          break;\n        case 'JS':\n          name='ç½‘é¡µæ’ä»¶';\n          break;\n        case 'SET':\n          name='è§„åˆ™åˆé›†';\n          break;\n        case 'HTML':\n          name='é™æ€ç½‘é¡µ';\n          break;\n        case 'JSON':\n          name='jsonæ–‡ä»¶';\n          break;\n        case 'TXT':\n          name='æ–‡æœ¬æ–‡ä»¶';\n          break;\n        default:\n          name='å…¶ä»–'\n    }\n    return name\n}\n\n$.exports = {\n    Color: Color,\n    HtmlTag: HtmlTag,\n    Rich: Rich,\n    Small: Small,\n    GetDirCn:GetDirCn,\n    removeFileExtension: removeFileExtension\n}"},{"col_type":"movie_3","name":"ç›®å½•ç»“æ„","path":"directoryEnum.json","rule":"{\n    \"RULE\": \"rules/\",\n    \"SET\":\"compilations/\",\n    \"HTML\": \"html/\",\n    \"JS\":\"js/\",\n    \"JSON\":\"json/\",\n    \"TXT\":\"txt/\"\n}"},{"col_type":"movie_3","name":"è§„åˆ™åˆ—è¡¨","path":"ruleList","rule":"js:\nconst GithubAPI = $.require(\"GithubAPI?rule=Githubä»“åº“\");\nconst dirEnum = $.require(\"directoryEnum.json?rule=Githubä»“åº“\");\nconst utils = $.require(\"utils\");\n\n\naddListener(\"onClose\", () => {\n    clearMyVar(\"typeview\");\n    clearMyVar(\"listCache\");\n    clearMyVar(\"indexCache\");\n});\n\naddListener(\"onRefresh\", () => {\n    clearMyVar(\"listCache\");\n    clearMyVar(\"indexCache\");\n});\nlet cls = [];\nlet type = Object.keys(dirEnum);\nlet selType = getMyVar(\"typeview\", type[0]);\nfor (let it of type) {\n    let isType = it === selType;\n    cls.push({\n        title: isType ? \"â€œâ€œ\" + utils.GetDirCn(it) + \"â€â€\" : utils.GetDirCn(it),\n        url: $(\"#noLoading#\").lazyRule((it, isType) => {\n            if (isType) {\n                return \"toast://å·²ç»æ˜¯å½“å‰ç›®å½•\";\n            }\n            putMyVar(\"typeview\", it);\n            refreshPage(false);\n            return \"hiker://empty\";\n        }, it, isType),\n        col_type: \"scroll_button\",\n    });\n}\ncls.push({\n    title: \"æ­£åœ¨åŠ è½½...\",\n    url: \"hiker://empty\",\n    col_type: \"text_center_1\",\n    extra: {\n        id: \"Githubloading\",\n        lineVisible: false\n    }\n});\nsetPreResult(cls);\nlet listCache = storage0.getMyVar(\"listCache\", {});\nlet indexCache = storage0.getMyVar(\"indexCache\", {});\nlet d = [];\n\n\nlet indexData = [];\nif (selType === \"RULE\") {\n    indexData = [];\n    if (!indexCache.rules) {\n        try {\n            let indexObj = GithubAPI.getContents(MY_PARAMS.repo, \"manifest.json\");\n            if (indexObj.sha) {\n                indexObj = JSON.parse(base64Decode(indexObj.content));\n                indexData = indexObj.rules;\n                storage0.putMyVar(\"indexCache\", indexObj);\n            }\n        } catch (e) {\n            log(\"æ‘˜è¦è·å–å¤±è´¥ï¼š\" + e.toString());\n        }\n    } else {\n        indexData = indexCache.rules;\n    }\n}\n\nfunction getInfo(item) {\n    let obj = {\n        col_type: \"icon_2_round\",\n    };\n    if (selType === \"RULE\") {\n        obj.title = utils.removeFileExtension(item.name);\n        let indexContent = indexData.find(v => v.title == obj.title) || {};\n        obj.pic_url = indexContent.icon;\n        obj.url = \"rule://\" + base64Encode(\"ï¿¥home_rule_urlï¿¥\" +getItem('raw_proxy','')+ item.download_url);\n    } else if (selType === \"SET\") {\n        obj.title = utils.removeFileExtension(item.name);\n        obj.pic_url = \"hiker://images/rule_type_read\";\n        obj.url = \"rule://\" + base64Encode(\"ï¿¥home_rule_urlï¿¥\"+getItem('raw_proxy','') + item.download_url);\n    }else if ([\"HTML\",\"JSON\",\"JS\",\"TXT\"].includes(selType)) {\n        obj.title = item.name;\n        obj.pic_url = \"hiker://images/rule_type_read\";\n        obj.url = $('#noLoading#').lazyRule((item)=>{\n            let rawUrl=getItem('raw_proxy','') + item.download_url;\n            copy(rawUrl);\n            return rawUrl\n        },item)\n    }\n    \n    return obj;\n}\n\nfunction setManage(obj, item) {\n    obj.url = $([\"åˆ é™¤\", \"å¤åˆ¶åˆ†äº«é“¾æ¥\", \"å¯¼å…¥\"]).select((url, sha, name, path) => {\n        if (input === \"å¤åˆ¶åˆ†äº«é“¾æ¥\") {\n            return \"copy://æµ·é˜”è§†ç•Œè§„åˆ™ã€\" + name + \"ã€‘ï¿¥home_rule_urlï¿¥\" + url;\n        } else if (input === \"å¯¼å…¥\") {\n            return \"rule://\" + base64Encode(\"ï¿¥home_rule_urlï¿¥\" + url);\n        } else {\n            return $(\"ç¡®è®¤ä»ä»“åº“åˆ é™¤è¯¥åˆ†äº«:\" + name).confirm((path, sha) => {\n                let user = storage0.getItem(\"user\", \"\");\n                showLoading(\"æ­£åœ¨åˆ é™¤\");\n                const GithubAPI = $.require(\"GithubAPI?rule=Githubä»“åº“\");\n                try {\n                    let res = GithubAPI.deleteFile(user.repo, user.token, path, sha);                    \n                    if (res) {\n                        java.lang.Thread.sleep(2650);\n                        clearMyVar(\"listCache\");\n                        refreshPage(false);\n                        hideLoading();\n                        return \"toast://åˆ é™¤æˆåŠŸ,æœåŠ¡å™¨åˆ é™¤ä¼šæœ‰ä¸€å®šå»¶è¿Ÿ\";\n                    }\n                    hideLoading();\n                    return \"toast://åˆ é™¤å¤±è´¥\";\n                } catch (e) {\n                    hideLoading();\n                    return \"toast://åˆ é™¤å¤±è´¥:\" + e.toString();\n                }\n            }, path, sha);\n        }\n    }, (getItem('raw_proxy','')+item.download_url), item.sha, item.name, item.path);\n    return obj;\n}\ntry {\n    let list = [];\n    if (listCache[selType] === void 0) {\n        list = GithubAPI.getContents(MY_PARAMS.repo, dirEnum[selType], (e) => {\n            if ([\"This repository is empty.\", \"Not Found\"].includes(e.message)) {\n                return [];\n            } else {\n                throw new Error(e.message);\n            }\n        });\n        list = list.filter(v => v.type === \"file\");\n        listCache[selType] = list || [];\n\n        storage0.putMyVar(\"listCache\", listCache);\n    } else {\n        list = listCache[selType];\n    }\n    if (!list.length) {\n        d.push({\n            title: \"â€œâ€œâ€â€\" + \"ä»“åº“æ˜¯ç©ºçš„å“¦\".small().fontcolor(\"grey\"),\n            url: \"hiker://empty\",\n            col_type: \"text_center_1\"\n        });\n    } else {\n        if(MY_PARAMS.isDev){\n            list.forEach(it => d.push(setManage(getInfo(it), it)));\n        }else{\n            list.forEach(it => d.push(getInfo(it)));\n        }\n    }\n    setResult(d);\n} catch (e) {\n    setResult([{\n        title: \"â€œâ€œERRORâ€â€\",\n        desc: e.toString(),\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\"\n    }]);\n} finally {\n    deleteItem(\"Githubloading\");\n}"},{"col_type":"text_1","name":"è®¾ç½®ä¸­å¿ƒ","path":"settings","rule":"js:\nsetPageTitle(\"è®¾ç½®\");\nvar data = [];\n\ndata.push({\n    col_type: \"line_blank\"\n});\nlet user = storage0.getItem(\"user\", {});\n\n\ndata.push({\n    title: \"å¤´åƒ\",\n    desc: user.avatar || \"hiker://images/icon_account\",\n    url: $(user.avatar || \"\", \"è¾“å…¥å¤´åƒåœ°å€\").input((user) => {\n        if ($.require(\"registry\").setDevInfo(user.name, {\n                avatar: input\n            })) {\n            user.avatar = input;\n            storage0.setItem(\"user\", user);\n            refreshPage();\n            return \"toast://ä¿®æ”¹æˆåŠŸ\";\n        } else {\n            return \"toast://ä¿®æ”¹å¤±è´¥\";\n        }\n    }, user),\n    extra: \"\",\n    col_type: \"text_1\"\n});\n\nlet raw_proxy=getItem('raw_proxy','https://gh-proxy.com/');\ndata.push({\n    title: \"è§„åˆ™å¯¼å…¥ä»£ç†æ¥å£\",\n    desc: raw_proxy,\n    url: $(raw_proxy, \"è¾“å…¥è§„åˆ™å¯¼å…¥ä»£ç†æ¥å£\").input(() => {\n        setItem('raw_proxy',input);\n        refreshPage();\n        return 'hiker://empty'\n    }),\n    extra: {},\n    col_type: \"text_1\"\n});\n\nlet guest_token=getItem('guest_token','');\ndata.push({\n    title: \"è®¿é—®Tokenè®¾ç½®\",\n    desc: guest_token,\n    url: $(guest_token, \"è¾“å…¥è®¿é—®Token\").input(() => {\n        setItem('guest_token',input);\n        refreshPage();\n        return 'hiker://empty'\n    }),\n    extra: {},\n    col_type: \"text_1\"\n});\n\ndata.push({\n    col_type: \"line_blank\"\n});\ndata.push({\n    title: \"æ˜µç§°\",\n    desc: user.name,\n    url: \"hiker://empty\",\n    col_type: \"text_1\"\n});\ndata.push({\n    title: \"ä»“åº“\",\n    desc: user.repo,\n    url: \"hiker://empty\",\n    col_type: \"text_1\"\n});\ndata.push({\n    title: \"TOKEN\",\n    desc: user.token,\n    url: $('åŒæ­¥è®¾ç½®ä¸ºè®¿é—®Token?').confirm((token)=>{\n        setItem('guest_token',token);\n        refreshPage();\n        return 'toast://åŒæ­¥æˆåŠŸ'\n    },user.token),\n    col_type: \"text_1\"\n});\ndata.push({\n    col_type: \"line_blank\"\n});\n\n\ndata.push({\n    title: \"æäº¤äº‘ä»“åº“è§„åˆ™\",\n    url: \"copy://$eyJuYW1lIjoiR2l0aHVi5LuT5bqTIiwianMiOiJyZXR1cm4gJC5yZXF1aXJlKFwic3VibWl0P3J1bGU9R2l0aHVi5LuT5bqTXCIpKE1ZX0FDQ09VTlQsIE1ZX1BBU1NXT1JELCBNWV9SVUxFLCBNWV9FWFRSQSk7In0=$a@import=js:$.require('import?rule=ä»“åº“æäº¤ç®¡ç†')(input)\",\n    col_type: \"text_1\"\n});\n\ndata.push({\n    title: \"åŒæ­¥æäº¤äº‘ä»“åº“è´¦å·å¯†ç \",\n    url: \"hiker://page/password?rule=ä»“åº“æäº¤ç®¡ç†\",\n    col_type: \"text_1\",\n    extra: {\n        name: MY_RULE.title,\n        preinstall: {\n            user: user.repo,\n            password: user.token,\n            extra: \"\"\n        }\n    }\n});\ndata.push({\n    col_type: \"line_blank\"\n});\n\n\ndata.push({\n    title: \"é€€å‡ºç™»å½•\",\n    url: $(\"ç¡®è®¤é€€å‡ºç™»å½•?\").confirm(f => {\n        clearItem(\"user\");\n        back();\n        return \"toast://å·²é€€å‡º\";\n    }),\n    col_type: \"text_center_1\"\n});\ndata.push({\n    col_type: \"line_blank\"\n});\ndata.push({\n    title: \"â€œâ€œæ³¨é”€è´¦å·â€â€\",\n    url: $(\"æ˜¯å¦æ³¨é”€è´¦å·?\").confirm((name) => {\n        if ($.require(\"registry\").deleteDev(name)) {\n            back();\n            return \"toast://æ³¨é”€æˆåŠŸ\";\n        } else {\n            return \"toast://æ³¨é”€å¤±è´¥\";\n        }\n    }, user.name),\n    col_type: \"text_center_1\"\n});\nsetResult(data);\n\n"},{"col_type":"movie_3","name":"ç®¡ç†ç”¨æˆ·","path":"Usermanagement","rule":"js:\nlet user = storage0.getItem(\"user\", \"\");\n\nsetPageTitle(\"ç®¡ç†å‘˜ï¼š\" + user.name);\nconst {\n    Color,\n    Rich\n} = $.require('utils');\nlet d = [];\naddListener(\"onRefresh\", () => $.require(\"registry\").getDeveloper(true));\naddListener(\"onClose\", () => refreshPage());\nlet developer = $.require(\"registry\").getDeveloper();\nd.push({\n    title: \"å¤‡ä»½\",\n    url: $().lazyRule(() => {\n        let registry = $.require(\"registry\").getRegistry();\n        let developer = registry.content;\n        //storage0.setItem(\"userDataBackup\", developer);\n        writeFile('hiker://files/rules/gitHouse/userDataBackup.json', JSON.stringify(developer));\n        return \"toast://å¤‡ä»½æˆåŠŸ\";\n    }),\n    col_type: \"text_2\",\n});\n\nd.push({\n    title: \"æ¢å¤\",\n    url: $().lazyRule(() => {\n        let backup = JSON.parse(fetch('hiker://files/rules/gitHouse/userDataBackup.json') || []);\n        let registry = $.require(\"registry\").getRegistry();\n        //registry.content = storage0.getItem(\"userDataBackup\", registry.content);\n        if (backup.length > 0) {\n            registry.content = backup;\n        }\n        if ($.require(\"registry\").setRegistry(registry)) {\n            refreshPage(false);\n            return \"toast://æ¢å¤æˆåŠŸ\";\n        } else {\n            return \"toast://æ¢å¤å¤±è´¥\";\n        }\n    }),\n    col_type: \"text_2\",\n});\nlet option = getMyVar('manageoption', 'åˆ é™¤');\n\nfunction setTitle(title) {\n    if (title == option) {\n        return Rich(Color(title, '#12b668'));\n    } else {\n        return title\n    }\n}\nlet options = [\"åˆ é™¤\", \"æ’åº\", \"è®¾ç½®å¤´åƒ\", \"ä¿®æ”¹ç”¨æˆ·å\"];\nfor (let it of options) {\n    d.push({\n        title: setTitle(it),\n        col_type: 'scroll_button',\n        url: $('#noLoading#').lazyRule((it) => {\n            putMyVar('manageoption', it);\n            refreshPage();\n            return 'hiker://empty';\n        }, it)\n    });\n}\n\nd.push({\n    col_type: \"line_blank\"\n});\nlet i = 0;\nfor (let it of developer) {\n    d.push({\n        title: it.name,\n        pic_url: it.avatar,\n        url: $('#noLoading#').lazyRule((it, option, index) => {\n            return $.require('adminOperate')(it, option, index);\n        }, it, option, i++),\n        col_type: \"icon_2_round\"\n    });\n}\nsetResult(d);"},{"col_type":"movie_3","name":"ç®¡ç†å‘˜æ“ä½œ","path":"adminOperate","rule":"js:\n$.exports = function(user, option, index) {\n    if (option == 'åˆ é™¤') {\n        return $(\"æ˜¯å¦åˆ é™¤è¯¥ç”¨æˆ·ï¼Ÿ\").confirm((name) => {\n            if ($.require(\"registry\").deleteDev(name)) {\n                refreshPage(false);\n                return \"toast://åˆ é™¤æˆåŠŸ\";\n            } else {\n                return \"toast://åˆ é™¤å¤±è´¥\";\n            }\n        }, user.name);\n    } else if (option == 'è®¾ç½®å¤´åƒ') {\n        return $(user.avatar, 'è¯·è¾“å…¥å¤´åƒé“¾æ¥').input((name) => {\n            if ($.require(\"registry\").setDevInfo(name, {\n                    avatar: input\n                })) {\n                refreshPage(false);\n                return \"toast://å¤´åƒä¿®æ”¹æˆåŠŸ\";\n            } else {\n                return \"toast://å¤´åƒä¿®æ”¹å¤±è´¥\";\n            }\n        }, user.name);\n    } else if (option == 'ä¿®æ”¹ç”¨æˆ·å') {\n        return $(user.name, 'è¯·è¾“å…¥ç”¨æˆ·å').input((name) => {\n            if ($.require(\"registry\").setDevInfo(name, {\n                    name: input\n                })) {\n                refreshPage(false);\n                return \"toast://ç”¨æˆ·åä¿®æ”¹æˆåŠŸ\";\n            } else {\n                return \"toast://ç”¨æˆ·åä¿®æ”¹å¤±è´¥\";\n            }\n        }, user.name);\n    } else if (option == 'æ’åº') {\n        return $(index + '', 'è¯·è¾“å…¥å¼€å‘è€…é¡ºåº').input((name) => {\n            if ($.require(\"registry\").moveDev(name,input)) {\n                refreshPage(false);\n                return \"toast://é¡ºåºè®¾ç½®æˆåŠŸ\";\n            } else {\n                return \"toast://é¡ºåºè®¾ç½®å¤±è´¥\";\n            }\n        }, user.name);\n    }\n}"},{"col_type":"movie_3","name":"ä¸»é¡µ","path":"home","rule":"js:\nvar d = [];\naddListener(\"onRefresh\", () => clearMyVar(\"developer\"));\nlet developer = $.require(\"registry\").getDeveloper();\nconst {\n    Small,\n    Color,\n    Rich\n} = $.require(\"utils\");\nlet user = storage0.getItem(\"user\", \"\");\nlog(user);\nif (user) {\n    let index = developer.findIndex(x => x.name === user.name && x.repo === user.repo);\n    if (index > -1) {\n        let sel = [\"æ›´å¤šåˆ†äº«\",\"è§„åˆ™ç®¡ç†\", \"è®¾ç½®ä¸­å¿ƒ\"];\n        if ($.require(\"adminList.json\").includes(user.name)) {\n            sel.push(\"ç®¡ç†ç”¨æˆ·\");\n        }\n        d.push({\n            title: user.name,\n            col_type: \"avatar\",\n            pic_url: user.avatar || \"hiker://images/icon_setting6\",\n            url: $(sel).select(() => {\n                if (input === \"ç®¡ç†ç”¨æˆ·\") {\n                    return \"hiker://page/Usermanagement#noRecordHistory##noHistory#\";\n                } else if (input === \"è®¾ç½®ä¸­å¿ƒ\") {\n                    return \"hiker://page/settings#noRecordHistory##noHistory#\";\n                } else if(input===\"è§„åˆ™ç®¡ç†\"){\n                    return \"hiker://page/ruleList#noRecordHistory##noHistory#\";\n                }else if(input===\"æ›´å¤šåˆ†äº«\"){\n                    return \"hiker://page/moreShare#noRecordHistory##noHistory#\";\n                }\n            }),\n            extra: {\n                isDev: true,\n                repo: user.repo\n            }\n        });\n    } else {\n        clearItem(\"user\");\n        toast(\"æœªæŸ¥è¯¢åˆ°æ‚¨çš„æ³¨å†Œä¿¡æ¯ï¼Œå¯èƒ½å·²ç»æ›´æ”¹æˆ–åˆ é™¤\");\n        d.push({\n            title: \"æ³¨å†Œ/ç™»å½•\",\n            url: \"hiker://page/register#noRecordHistory##noHistory#\",\n            col_type: \"text_2\"\n        });\n        d.push({\n            title: \"æ¸¸å®¢è®¾ç½®\",\n            url: \"hiker://page/guest#noRecordHistory##noHistory#\",\n            col_type: \"text_2\"\n        });\n    }\n} else {\n    d.push({\n        title: \"æ³¨å†Œ/ç™»å½•\",\n        url: \"hiker://page/register#noRecordHistory##noHistory#\",\n        col_type: \"text_2\"\n    });\n    d.push({\n            title: \"æ¸¸å®¢è®¾ç½®\",\n            url: \"hiker://page/guest#noRecordHistory##noHistory#\",\n            col_type: \"text_2\"\n    });\n}\nd.push({\n    col_type: 'text_1',\n    title: Rich(Small(\"ç°æœ‰ \" + Color(developer.length, \"#ff7000\") + \" åå¼€å‘è€…\")),\n    url: \"toast://å–µå–µå–µ?\",\n});\nfor (let it of developer) {\n    d.push({\n        title: it.name,\n        url: \"hiker://page/ruleList#noRecordHistory##noHistory#\",\n        pic_url: it.avatar || \"hiker://images/icon_account\",\n        col_type: \"icon_2_round\",\n        extra: {\n            repo: it.repo,\n        }\n    });\n}\n\nsetResult(d);"},{"col_type":"movie_3","name":"ç®¡ç†å‘˜åˆ—è¡¨","path":"adminList.json","rule":"[\"LoyDgIk\", \"é“é•¿\"]"},{"col_type":"movie_3","name":"æ¸¸å®¢è®¾ç½®","path":"guest","rule":"js:\nsetPageTitle('æ¸¸å®¢è®¾ç½®');\nconst {addLabel,addConf}=$.require('commonUi');\nlet d=[];\naddLabel(d,'è§„åˆ™å¯¼å…¥ä»£ç†è®¾ç½®','é˜²æ­¢ä»è§„åˆ™åˆ—è¡¨ç‚¹å‡»è§„åˆ™å¼¹å‡ºç«‹å³å¯¼å…¥æŒ‰é’®ç”±äºè¢«å¢™å¯¼å…¥æ— ååº”');\naddConf(d,'è¯·è¾“å…¥è§„åˆ™å¯¼å…¥ä»£ç†æ¥å£','raw_proxy','https://gh-proxy.com/');\naddLabel(d,'è®¿é—®Tokenè®¾ç½®','å°†GitHub apiæ¥å£è¯·æ±‚æ¬¡æ•°ä»æ¯å°æ—¶60æ¬¡æå‡åˆ°5000æ¬¡ï¼Œç ´è§£è¯·æ±‚æ¬¡æ•°é™åˆ¶');\naddConf(d,'è¯·è¾“å…¥Token','guest_token');\nsetResult(d);"},{"col_type":"movie_3","name":"å…¬å…±é¡µé¢æ¸²æŸ“","path":"commonUi","rule":"js:\nfunction addLabel(d,title,desc){\nd.push({\n    title:title ,\n    url: 'hiker://empty',\n    col_type: \"text_1\",\n    desc: desc,\n});\n    \n}\n\nfunction addConf(d,tips,key,value){\nd.push({\n    title:'ä¿å­˜',\n    desc:tips,\n    col_type:'input',\n    url:$.toString((key)=>{\n     setItem(key,input);\n     return 'toast://ä¿å­˜æˆåŠŸ'\n    },key),\n    extra:{\n     type:'textarea',\n     textSize: 11,\n     //highlight:1,\n     height: -1,       defaultValue:getItem(key,value||''),\n     onChange:`putMyVar('${key}',input)`\n }\n    \n});\n}\n\n$.exports = {\n    addLabel:addLabel,\n    addConf: addConf,\n}"},{"col_type":"movie_3","name":"æ›´å¤šåˆ†äº«","path":"moreShare","rule":"js:\naddListener('onClose', $.toString(()=>{\n        clearVar(\"house.upload_code\");\n}));\nconst {color,small,api, getFile} = $.require(\"hiker://page/utiliy?rule=é“é•¿ä»“åº“Pro\");\nlet d = [];\nlet file_type = [{name:'é™æ€æ–‡ä»¶',value:'html'},{name:'ç½‘é¡µæ’ä»¶',value:'js_url'},{name:'ä¸»é¡µé…ç½®',value:'config'}]; //ä¸Šä¼ ç±»å‹\nlet file_redirect = [{name:'æœ¬åœ°',value:'false'},{name:'ç›´é“¾302',value:'true'}]; //æ˜¯å¦é‡å®šå‘\nlet file_ua = [{name:'ç”µè„‘',value:'pc'},{name:'æ‰‹æœº',value:'mobile'}];\nlet file_type_title = file_type.map((item) => {\n    let name = getItem('house.file_type','é™æ€æ–‡ä»¶');\n    if(item.name===name){\n        return 'ğŸ‘‰'+item.name;\n    }else{\n        return item.name;\n    }\n});\nlet file_redirect_title = file_redirect.map((item) => {\n    let name = getItem('house.file_redirect','æœ¬åœ°');\n    if(item.name===name){\n        return 'ğŸ‘‰'+item.name;\n    }else{\n        return item.name;\n    }\n});\nlet file_ua_title = file_ua.map((item) => {\n    let name = getItem('house.file_ua','ç”µè„‘');\n    if(item.name===name){\n        return 'ğŸ‘‰'+item.name;\n    }else{\n        return item.name;\n    }\n});\nd.push({\n    title: 'è·å–',\n    desc: \"æ–‡ä»¶è·¯å¾„,æ”¯æŒhiker,file,http,ä¸»é¢˜\",\n    extra: {\n        onChange: \"putVar('house.web_url',input)\",\n        titleVisible: true,\n        id:'filePath',\n        defaultValue:getVar('house.web_url')\n    },\n    url:$.toString(() => {\n        let input = getVar('house.web_url','');\n        if(input.length<2){\n            return 'toast://é“¾æ¥ä¸å¯ä»¥ä¸ºç©º'\n        } else if(/^hiker:|^file:|^http:|^https:|^\\/storage\\/|^\\/sdcard\\//.test(input)){\n            if(/^\\/storage\\/|^\\/sdcard\\//.test(input)){\n                input = 'file://'+input;\n            }\n            log('æ­£å¸¸é“¾æ¥:'+input);\n            let ua = getItem('house.file_ua')==='ç”µè„‘'?'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Safari/537.36':'Mozilla/5.0 (Linux; Android 9; MI 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Mobile Safari/537.36';\n            let web_url_arr = input.split(';');\n            let web_url = web_url_arr[0];\n            let headers = {\n                'Referer':'https://blog.csdn.net',\n                'User-Agent':ua,\n                'Accept':'application/json, text/javascript, */*; q=0.01',\n                'Accept-Language':'zh-CN',\n            };\n            if(web_url_arr.length>=3&&web_url_arr[2].length>2){ //è®¾ç½®ç¼–ç \n                headers['content-type'] = 'charset='+web_url_arr[2].toUpperCase();\n            }\n            let params = {headers:headers,withHeaders:false,redirect:false};\n            if(web_url_arr.length>=2&&web_url_arr[1].length>2){ // è®¾ç½®è¯·æ±‚æ–¹æ³•\n                params['method'] = web_url_arr[1].toUpperCase();\n            }\n            log('å¼€å§‹è·å–æºç ');\n            try {\n                /*\n                requestAsync(web_url,params,function (key,code) {\n                    let back_code = code;\n                    if(back_code.length>20){\n                        putVar('house.upload_code',back_code);\n                        refreshPage(true);\n                        return 'toast://æºç å·²è·å–,å¹¶éƒ¨åˆ†æ’å…¥åˆ°æ–‡æœ¬åŒºåŸŸ'\n                    }else{\n                        return 'toast://é”™è¯¯ï¼Œæœ¬æ¬¡è·å–åˆ°ç©ºæ–‡æœ¬ï¼Œç–‘ä¼¼ä½ æ²¡æœ‰æ­¤æ–‡ä»¶!';\n                    }\n                });\n                */\n                let back_code = getItem('house.file_ua')==='ç”µè„‘'?fetch(web_url,params):request(web_url,params);\n                if(back_code.length>20){\n                    putVar('house.upload_code',back_code);\n                    refreshPage(true);\n                    return 'toast://æºç å·²è·å–,å¹¶éƒ¨åˆ†æ’å…¥åˆ°æ–‡æœ¬åŒºåŸŸ'\n                }else{\n                    return 'toast://é”™è¯¯ï¼Œæœ¬æ¬¡è·å–åˆ°ç©ºæ–‡æœ¬ï¼Œç–‘ä¼¼ä½ æ²¡æœ‰æ­¤æ–‡ä»¶!';\n                }\n            }catch (e) {\n                log(e.message);\n                return 'toast://å‘ç”Ÿäº†é”™è¯¯:\\n'+e.message;\n            }\n        }else if(/ä¸»é¢˜ï¿¥|å…ƒç´ ï¿¥/.test(input)){\n            log('ä¸»é¢˜é“¾æ¥');\n            let web_url_arr = input.split('ï¿¥');\n            let web_url = web_url_arr[web_url_arr.length-1];\n            let back_code = parsePaste(web_url);\n            if(back_code.length>20) {\n                putVar('house.upload_code',back_code);\n                refreshPage(true);\n                return 'toast://æºç å·²è·å–,å¹¶éƒ¨åˆ†æ’å…¥åˆ°æ–‡æœ¬åŒºåŸŸ'\n            }else{\n                return 'toast://é”™è¯¯ï¼Œæœ¬æ¬¡è·å–è¿”å›ä¸º:\\n'+back_code;\n            }\n        }else{\n            return 'toast://éæ³•é“¾æ¥:\\n'+getVar('house.web_url');\n        }\n    }),\n    col_type: \"input\"\n});\nd.push({\n    title: \"é€‰æ‹©æ–‡ä»¶è·¯å¾„\",\n    url:$('#noLoading#').lazyRule(()=>{\n        let fp=config.lib.fileSelect;\n        let f=$.rc(fp);\n        return f.fileSelectionUri({\n            callback: $.toString(() => {\n                let target = findItem(\"filePath\").extra;\n                updateItem(\"filePath\", {\n                    extra: Object.assign(target, {\n                        defaultValue: PATH\n                    })\n                });\n                putVar('house.web_url',PATH);\n                return true;\n            }),\n            onClickType:'confirm',\n            fileType: \".js|.txt|.hiker|.json|.html\",\n            pattern: 0,\n            requireUrl:fp,\n            initialPath:getPath('hiker://files/rules/dzHouse/').slice(7),\n            memory:'true',\n        });\n    }),\n    col_type: \"text_center_1\",\n});\nd.push({\n    title:'ä¸Šä¼ ç±»å‹',\n    desc:'ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹,å½“å‰ä¸º:'+color(getItem('house.file_type','é™æ€æ–‡ä»¶'),'#ff7000'),\n    col_type:'text_1',\n    url:$(file_type_title,2).select(() => {\n        setItem('house.file_type',input.replace('ğŸ‘‰',''));\n        refreshPage(true);\n        return 'toast://ä½ é€‰æ‹©äº†:'+input;\n    })\n});\n\nd.push({\n    title:'æ–‡ä»¶å®šä½',\n    desc:'æ–‡ä»¶æ˜¯å¦å±äºé‡å®šå‘,å½“å‰ä¸º:'+color(getItem('house.file_redirect','æœ¬åœ°'),'#ff7000'),\n    col_type:'text_1',\n    url:$(file_redirect_title,2).select(() => {\n        setItem('house.file_redirect',input.replace('ğŸ‘‰',''));\n        refreshPage(true);\n        return 'toast://ä½ é€‰æ‹©äº†:'+input;\n    })\n});\n\nd.push({\n    title:'è®¾å¤‡UA',\n    desc:'å‘èµ·ç½‘é¡µè¯·æ±‚å¤´æ ‡è¯†,å½“å‰ä¸º:'+color(getItem('house.file_ua','ç”µè„‘'),'#ff7000'),\n    col_type:'text_1',\n    url:$(file_ua_title,2).select(() => {\n        setItem('house.file_ua',input.replace('ğŸ‘‰',''));\n        refreshPage(true);\n        return 'toast://ä½ é€‰æ‹©äº†:'+input;\n    })\n});\nfunction compare(name) {\n    return function(item) {\n        return item.name === name;\n    }\n}\nd.push({\n    title:'ğŸ—„ï¸ç¯å¢ƒ',\n    col_type:'flex_button',\n    url:$().lazyRule((file_type,compare)=>{\n        log('æŸ¥çœ‹ç¯å¢ƒå˜é‡');\n        try {\n            let up_code = getVar('house.upload_code','');\n            let ftype =  file_type.filter(compare(getItem('house.file_type','é™æ€æ–‡ä»¶')))[0].value;\n            let redirect = getItem('house.file_redirect','æœ¬åœ°')!=='æœ¬åœ°';\n            let code = !redirect?up_code:input;\n            let env = {\n                web_url:getVar('house.web_url',''),\n                device:getItem('house.file_ua','ç”µè„‘'),\n                ftype:ftype||\"\",\n                redirect:redirect,\n                code:code.substring(0,40)||\"\",\n            }\n            log(env);\n            return 'toast://'+JSON.stringify(env);\n            // alert(JSON.stringify(env));\n        }catch (e) {\n            return 'toast://'+e.message;\n            // alert(e.message);\n        }\n    },file_type,compare)\n});\n\nd.push({\n    title:'ğŸ“ƒæ•™ç¨‹',\n    col_type:'flex_button',\n    url:$().x5Rule(()=>{\n        let msg = 'æ¬¢è¿ä½¿ç”¨å¼€å‘è€…æ›´å¤šåˆ†äº«å·¥å…·\\n1.è¾“å…¥ç½‘å€ä¸ºæœ¬åœ°æ–‡ä»¶è·¯å¾„,hiker://æˆ–è€…file://å¼€å¤´\\n2.ç‚¹å‡»ç½‘å€è¾“å…¥æ åé¢çš„æŒ‰é’®\\n3.çœ‹æ–‡æœ¬é¢„è§ˆåŒºæ˜¯å¦æ­£ç¡®\\n4.ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æäº¤åˆ°ä»“åº“';\n        alert(msg);\n    })\n});\n\nd.push({\n    title:'ğŸ—‘ï¸æ¸…ç©º',\n    col_type:'flex_button',\n    url:$().lazyRule(()=>{\n        clearVar('house.upload_code');\n        refreshPage(true);\n        return 'toast://å·²æ¸…é™¤é¢„è§ˆåŒºåŸŸå†…å®¹'\n    })\n});\n\nd.push({\n    title:'ğŸ“²ç¤ºä¾‹',\n    col_type:'flex_button',\n    url:$().lazyRule(()=>{\n        let demo_code = getItem('house.demo','0');\n        if(demo_code=='0'){\n            putVar('house.web_url','hiker://files/rules/dzHouse/html/èµ„æºç½‘ä¹¦ç­¾.html');\n            demo_code = parseInt(demo_code)+1;\n            setItem('house.demo',demo_code+'');\n        }else{\n            putVar('house.web_url','file:///storage/emulated/0/Android/data/com.example.hikerview/files/Documents/rules/dzHouse/html/èµ„æºç½‘ä¹¦ç­¾.html');\n            setItem('house.demo','0');\n        }\n        refreshPage(true);\n        return 'toast://å·²è®¾ç½®ç¤ºä¾‹åœ°å€'\n    })\n});\n\nd.push({\n    title:'ğŸ“¤ä¸Šä¼ ',\n    col_type:'flex_button',\n    url:$().lazyRule((file_type) =>{\n        function compare(name) {\n            return function(item) {\n                return item.name === name;\n            }\n        }\n        const {getNowFormatDate}=$.require(\"hiker://page/utiliy?rule=é“é•¿ä»“åº“Pro\");\n        let up_code = getVar('house.upload_code','');\n        if(up_code.length < 2){\n            return 'toast://æºç åŒºæ— å†…å®¹ï¼Œè¯·å…ˆè®¿é—®ä¸€ä¸ªé™æ€é¡µé¢'\n        }\n        \n        let input = getVar('house.web_url','');\n        let web_url = input.split(';')[0];\n        \n        let fileName = '';\n        if(/^hiker:|^file:|^http:|^https:|^\\/storage\\/|^\\/sdcard\\//.test(web_url)){\n            fileName = web_url.split('/')[web_url.split('/').length-1];\n        }else if(/ä¸»é¢˜ï¿¥|å…ƒç´ ï¿¥/.test(input)){\n            let bkarr = up_code.split('ï¿¥');\n            if(bkarr.length<3){\n                return 'toast://äº‘å‰ªè´´æ¿å†…å®¹æœ‰è¯¯'\n            }\n            switch (bkarr[1]) {\n                case 'my_home_theme':\n                    fileName = up_code.split('ã€Œ')[1].split('ã€')[0];\n                    break;\n                case 'my_home_single':\n                    fileName = up_code.split('ã€Œ')[1].split('ã€')[0];\n                    break;\n                case 'js_url':\n                    fileName = up_code.split('ï¿¥')[2].split('@')[0];\n                    break;\n            }\n        }else{\n            return 'toast://é”™è¯¯ï¼Œç½‘é¡µé“¾æ¥æ— å†…å®¹!';\n        }\n        if(/^\\/storage\\/|^\\/sdcard\\//.test(input)){\n           web_url = 'file://'+input;\n        }\n        let ua = getItem('house.file_ua')==='ç”µè„‘'?'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Safari/537.36':'Mozilla/5.0 (Linux; Android 9; MI 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Mobile Safari/537.36';\n        let headers = {\n            'Referer':'https://blog.csdn.net',\n            \"content-type\": \"application/json\",\n            'User-Agent':ua,\n            'Accept':'application/json, text/javascript, */*; q=0.01',\n            'Accept-Language':'zh-CN',\n        };\n        let toCompare = '';\n        if(fileName.endsWith('.html')){\n            toCompare = 'é™æ€æ–‡ä»¶';\n        }else if(/ä¸»é¢˜/.test(fileName)){\n            toCompare = 'ä¸»é¡µé…ç½®'\n        }\n        let ftype =  file_type.filter(compare(toCompare||getItem('house.file_type','é™æ€æ–‡ä»¶')))[0].value;\n        let redirect = getItem('house.file_redirect','æœ¬åœ°')!=='æœ¬åœ°';\n        if(redirect&&!web_url.startsWith('http')){\n            return 'toast://ç›´é“¾302é‡å®šå‘ç½‘å€é“¾æ¥å¿…é¡»httpå¼€å¤´';\n        }\n        let code = !redirect?up_code:web_url;\n        let data = {\"params\":\n                {\"data\": {rule_name: fileName, \"rule_type\": 'æ›´å¤šåˆ†äº«', \"version\":getNowFormatDate(),\"rule_value\": code,\n                        data_type:ftype, is_redirect:redirect,deviceUa:getItem('house.file_ua'),\n                    },\n                    }\n        };\n        //log(data);\n        let upparams = {headers:headers,body:JSON.stringify(data),withHeaders:false,redirect:false,method:'POST'};\n        let user = storage0.getItem(\"user\", \"\");\n        \n        \n        return 'toast://'+ $.require(\"submit?rule=Githubä»“åº“\")(user.repo, user.token, web_url, null);\n        \n        \n    },file_type)\n});\n\nd.push({\n    title:'é•¿æ–‡æœ¬é¢„è§ˆåŒºåŸŸ',\n    col_type:'text_1',\n    url:'hiker://empty',\n    extra: {textSize: 11,lineVisible:false}\n});\n\nd.push({\n    title:getVar('house.upload_code','').substring(0,10240),\n    col_type:'long_text',\n    extra: {textSize: 11}\n});\nsetPageTitle(\"æ›´å¤šåˆ†äº«\");\nsetResult(d);"}],"title":"Githubä»“åº“","author":"@LoyDgIk","version":12,"type":"video","url":"hiker://empty##","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:$.require(\"home\");","searchFind":"","search_url":"","group":"å¼€å‘ä¸­å¿ƒ","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"$.require('hiker://page/libs?rule=é“é•¿ä»“åº“Pro');","pages":"[{\"col_type\":\"movie_3\",\"name\":\"æ³¨å†Œè¡¨\",\"path\":\"registry\",\"rule\":\"js:\\nconst txt_name = \\\"githubregistry\\\";\\nconst password = \\\"hiker721\\\";\\n\\nfunction getRegistry() {\\n    try {\\n        let registry = post(\\\"https://a6.qikekeji.com/txt/data/detail/\\\", {\\n            body: {\\n                txt_name: txt_name,\\n                password: password\\n            }\\n        });\\n        let rd = JSON.parse(registry).data;\\n        registry = JSON.parse(rd.txt_content)[0].content || \\\"\\\";\\n        return {\\n            content: JSON.parse(registry),\\n            vid: rd.v_id\\n        };\\n    } catch {\\n        return {\\n            content: []\\n        };\\n    }\\n}\\n\\nfunction setRegistry(registry) {\\n    try {\\n        let res = post(\\\"https://a6.qikekeji.com/txt/data/save/\\\", {\\n            body: {\\n                txt_name: txt_name,\\n                password: password,\\n                txt_content: JSON.stringify([{\\n                    \\\"title\\\": \\\"æ³¨å†Œè¡¨\\\",\\n                    \\\"content\\\": JSON.stringify(registry.content)\\n                }]),\\n                v_id: registry.vid || \\\"\\\"\\n            }\\n        });\\n        res = JSON.parse(res);\\n        if (res.status === 1) {\\n            clearMyVar(\\\"developer\\\");\\n            return true;\\n        }\\n        return false;\\n    } catch (e) {\\n        log(e.toString());\\n        return false\\n    }\\n}\\n\\n\\nfunction getDeveloper(renovate) {\\n    let developer = storage0.getMyVar(\\\"developer\\\", \\\"\\\");\\n    if (!developer || renovate) {\\n        developer = getRegistry().content;\\n        storage0.putMyVar(\\\"developer\\\", developer);\\n    }\\n    return developer;\\n}\\n\\nfunction setDevInfo(uesrName, info) {\\n    let registry = getRegistry();\\n    let index = registry.content.findIndex(v => v.name === uesrName);\\n    registry.content.splice(index, 1, Object.assign(registry.content[index], info));\\n    return setRegistry(registry);\\n}\\n\\nfunction addDev(uesr) {\\n    let registry = getRegistry();\\n    registry.content.push(uesr);\\n    return setRegistry(registry);\\n}\\n\\nfunction deleteDev(uesrName) {\\n    let registry = getRegistry();\\n    let index = registry.content.findIndex(v => v.name === uesrName);\\n    registry.content.splice(index, 1);\\n    return setRegistry(registry);\\n}\\n\\nfunction moveDev(uesrName, newIndex) {\\n    let registry = getRegistry();\\n    let index = registry.content.findIndex(v => v.name === uesrName);\\n    let info = registry.content.splice(index, 1)[0];\\n    registry.content.splice(newIndex, 0, info);\\n    return setRegistry(registry);\\n}\\n$.exports = {\\n    setRegistry: setRegistry,\\n    getRegistry: getRegistry,\\n    getDeveloper: getDeveloper,\\n    setDevInfo: setDevInfo,\\n    addDev: addDev,\\n    deleteDev: deleteDev,\\n    moveDev: moveDev\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"GithubAPI\",\"path\":\"GithubAPI\",\"rule\":\"js:\\nconst HOST = \\\"api.github.com\\\";\\nconst basicUrl = \\\"https://\\\" + HOST;\\n\\nfunction getContents(repo, path, error, token) {\\n    let headers = {\\n        Accept: \\\"application/vnd.github.v3+json\\\",\\n    };\\n    let guest_token = token || getItem('guest_token', '');\\n    if (guest_token) {\\n        headers.Authorization = \\\"token \\\" + guest_token;\\n    }\\n    let res = fetch(basicUrl + \\\"/repos/\\\" + repo + \\\"/contents/\\\" + (path || \\\"\\\"), {\\n        headers: headers\\n    });\\n    res = JSON.parse(res);\\n    if (res.message && error) {\\n        return error(res);\\n    } else if (res.message) {\\n        throw new Error(res.message);\\n    }\\n    return res;\\n}\\n\\nfunction getRepoInfo(repo, token) {\\n    let login = JSON.parse(fetch(basicUrl + \\\"/repos/\\\" + repo, {\\n        headers: {\\n            Accept: \\\"application/vnd.github.v3+json\\\",\\n            Authorization: \\\"token \\\" + token\\n        }\\n    }));\\n    if (login.message) {\\n        throw new Error(login.message);\\n    }\\n    return login;\\n}\\n\\nfunction createFile(repo, token, path, content, sha) {\\n    let upUrl = basicUrl + \\\"/repos/\\\" + repo + \\\"/contents/\\\" + path;\\n    try {\\n        if (sha === void 0) {\\n            sha = getContents(repo, path, void 0, token).sha;\\n        }\\n    } catch (e) {\\n        if (e.message != \\\"Not Found\\\") {\\n            throw e;\\n        }\\n    }\\n    const res = JSON.parse(fetch(upUrl, {\\n        body: {\\n            branch: 'main',\\n            message: 'upload',\\n            content: base64Encode(content || \\\"\\\"),\\n            path: path,\\n            sha: sha || \\\"\\\"\\n        },\\n        headers: {\\n            \\\"Authorization\\\": \\\"token \\\" + token,\\n            'Content-Type': 'application/json; charset=utf-8',\\n        },\\n        method: \\\"PUT\\\"\\n    }));\\n    if (res.message) {\\n        throw new Error(res.message);\\n    }\\n    return res;\\n}\\n\\nfunction deleteFile(repo, token, path, sha) {\\n    let deleteUrl = basicUrl + \\\"/repos/\\\" + repo + \\\"/contents/\\\" + path;\\n    if (!sha) {\\n        sha = getContents(repo, path).sha;\\n    }\\n    let res = JSON.parse(fetch(deleteUrl, {\\n        headers: {\\n            Accept: \\\"application/vnd.github.v3+json\\\",\\n            Authorization: \\\"token \\\" + token\\n        },\\n        body: {\\n            sha: sha,\\n            message: \\\"åˆ é™¤è§„åˆ™\\\"\\n        },\\n        method: \\\"DELETE\\\",\\n        withStatusCode: true\\n    }));\\n    if (res.statusCode === 200) {\\n        java.lang.Thread.sleep(1650);\\n        return true;\\n    } else {\\n        res = JSON.parse(res.body);\\n        throw new Error(res.message);\\n    }\\n\\n}\\n\\nfunction changeTable(repo, token, func, path) {\\n    path = path || \\\"manifest.json\\\";\\n    let summary = getContents(repo, path, (e) => {\\n        if (e.message === \\\"Not Found\\\") {\\n            return {\\n                content: \\\"\\\"\\n            };\\n        } else {\\n            throw new Error(\\\"æ‘˜è¦è¡¨è·å–å¤±è´¥\\\");\\n        }\\n    }, token);\\n    let table;\\n    if (summary.content) {\\n        table = JSON.parse(base64Decode(summary.content));\\n        if (!Array.isArray(table.rules)) {\\n            table.rules = [];\\n        }\\n    } else {\\n        table = {\\n            rules: []\\n        };\\n    }\\n    createFile(repo, token, path, JSON.stringify(func(table)), summary.sha || \\\"\\\");\\n}\\n$.exports = {\\n    getContents: getContents,\\n    getRepoInfo: getRepoInfo,\\n    createFile: createFile,\\n    deleteFile: deleteFile,\\n    changeTable: changeTable\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"æäº¤è§„åˆ™\",\"path\":\"submit\",\"rule\":\"const GithubAPI = $.require(\\\"GithubAPI?rule=Githubä»“åº“\\\");\\nconst dirEnum = $.require(\\\"directoryEnum.json?rule=Githubä»“åº“\\\");\\nconst utils = $.require(\\\"utils?rule=Githubä»“åº“\\\");\\n$.exports = function(repo, token, MY_RULE, config) {\\n    let pass, path, isRule;\\n    let content='';\\n    if (Array.isArray(MY_RULE)) {\\n        path = dirEnum.SET + MY_RULE[0].group + \\\".json\\\";\\n        //pass = \\\"æµ·é˜”è§†ç•Œé¦–é¡µåˆé›†è§„åˆ™ã€\\\" + MY_RULE[0].group + \\\"ã€‘ï¿¥home_rule_urlï¿¥\\\";\\n        content=JSON.stringify(MY_RULE);\\n    }else if (typeof(MY_RULE)=='string') {\\n        let fileName;\\n        log(MY_RULE);\\n        if(/^(hiker|file):/.test(MY_RULE)){\\n            content=fetch(MY_RULE);\\n            fileName=MY_RULE.split('/').slice(-1)[0];\\n            fileName=utils.removeFileExtension(fileName);\\n            \\n        }else{\\n            return 'æš‚åªæ”¯æŒhiker|fileå¼€å¤´çš„æ–‡ä»¶åˆ†äº«'\\n        }\\n        \\n        if(/\\\\.html$/.test(MY_RULE)){\\n            path = dirEnum.HTML + fileName + \\\".html\\\";\\n        }else if(/\\\\.js$/.test(MY_RULE)){\\n            path = dirEnum.JS + fileName + \\\".js\\\";\\n        }else if(/\\\\.json$/.test(MY_RULE)){\\n            path = dirEnum.JSON + fileName + \\\".json\\\";\\n        }else{\\n            path = dirEnum.TXT + fileName + \\\".txt\\\";\\n        }\\n        //pass = \\\"æµ·é˜”è§†ç•Œé¦–é¡µåˆé›†è§„åˆ™ã€\\\" + MY_RULE[0].group + \\\"ã€‘ï¿¥home_rule_urlï¿¥\\\";\\n        \\n    }else {\\n        isRule = true;\\n        path = dirEnum.RULE + MY_RULE.title + \\\".json\\\";\\n        //pass = \\\"æµ·é˜”è§†ç•Œé¦–é¡µé¢‘é“è§„åˆ™ã€\\\" + MY_RULE.title + \\\"ã€‘ï¿¥home_rule_urlï¿¥\\\";\\n        content=JSON.stringify(MY_RULE);\\n    }\\n\\n    try {\\n        if (isRule) {\\n            GithubAPI.changeTable(repo, token, table => {\\n                let newIndex = {\\n                    title: MY_RULE.title,\\n                    icon: MY_RULE.icon,\\n                    version: MY_RULE.version,\\n                    author: MY_RULE.author,\\n                    type: MY_RULE.type,\\n                    group: MY_RULE.group,\\n                    url: MY_RULE.url\\n                };\\n                let index = table.rules.findIndex(it => it.title == MY_RULE.title);\\n                if (index > -1) {\\n                    table.rules.splice(index, 1, newIndex);\\n                } else {\\n                    table.rules.push(newIndex);\\n                }\\n                return table;\\n            });\\n            java.lang.Thread.sleep(350);\\n        }\\n        GithubAPI.createFile(repo, token, path, content);\\n        return \\\"ä¸Šä¼ æˆåŠŸ\\\";\\n    } catch (e) {\\n        log(e.toString());\\n        return \\\"ä¸Šä¼ å¤±è´¥\\\";\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"æ³¨å†Œ\",\"path\":\"register\",\"rule\":\"js:\\nvar d = [];\\naddListener(\\\"onClose\\\", $.toString(() => {\\n    clearMyVar(\\\"ps_name\\\");\\n    clearMyVar(\\\"ps_repo\\\");\\n    clearMyVar(\\\"ps_token\\\");\\n}));\\n\\nsetPageTitle(\\\"æ³¨å†Œ/ç™»é™†\\\");\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"å±•ç¤ºåç§°\\\",\\n    extra: {\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_name\\\", input);\\n        }),\\n        titleVisible: false\\n    }\\n});\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"githubç”¨æˆ·å/ä»“åº“å\\\",\\n    extra: {\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_repo\\\", input);\\n        }),\\n        titleVisible: false,\\n    }\\n});\\n\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"token\\\",\\n    extra: {\\n        type: \\\"password\\\",\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_token\\\", input);\\n        }),\\n        titleVisible: false,\\n    }\\n});\\nd.push({\\n    title: \\\"æ³¨å†Œ/ç™»å½•\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n        showLoading(\\\"æ­£åœ¨æ³¨å†Œ/ç™»å½•...\\\");\\n        let name = getMyVar(\\\"ps_name\\\", \\\"\\\");\\n        if (name == \\\"\\\") {\\n            return \\\"toast://ç”¨æˆ·åä¸èƒ½ä¸ºç©º\\\"\\n        }\\n        let repo = getMyVar(\\\"ps_repo\\\", \\\"\\\");\\n        if (repo == \\\"\\\") {\\n            return \\\"toast://repoä¸èƒ½ä¸ºç©º\\\"\\n        }\\n\\n        let token = getMyVar(\\\"ps_token\\\", \\\"\\\");\\n        if (token == \\\"\\\") {\\n            return \\\"toast://tokenä¸èƒ½ä¸ºç©º\\\"\\n        }\\n        let user = {\\n            name: name,\\n            repo: repo,\\n            token: token\\n        };\\n        const GithubAPI = $.require(\\\"GithubAPI\\\");\\n        const Registry = $.require(\\\"registry\\\");\\n        developer = Registry.getDeveloper(true);\\n        let index = developer.findIndex(x => x.name === name && x.repo === repo);\\n\\n        if (index > -1) {\\n            try {\\n                GithubAPI.getRepoInfo(repo, token);\\n                user.avatar=developer[index].avatar;\\n                storage0.setItem(\\\"user\\\", user);\\n                back();                \\n                return \\\"toast://ç™»å½•æˆåŠŸ\\\";\\n            } catch (e) {\\n                hideLoading();\\n                return \\\"toast://ç™»å½•å¤±è´¥ï¼š\\\" + e.toString();\\n            }\\n\\n        } else if (developer.some(v => v.name === name || v.repo === repo)) {\\n            hideLoading();\\n            return \\\"toast://ä»“åº“å·²ç»å­˜åœ¨æˆ–ç”¨æˆ·åå·²ç»å­˜åœ¨\\\";\\n        } else {\\n            try {\\n                if (!(GithubAPI.getRepoInfo(repo, token).private === false)) {\\n                    return \\\"toast://æ³¨å†Œå¤±è´¥ï¼šç§å¯†ä»“åº“\\\";\\n                }\\n            } catch (e) {\\n                return \\\"toast://ä»“åº“éªŒè¯å¤±è´¥:\\\" + e.toString();\\n            }\\n            if (Registry.addDev(user)) {\\n                storage0.setItem(\\\"user\\\", user);\\n                back();\\n                return \\\"toast://æ³¨å†ŒæˆåŠŸ\\\";\\n            }\\n            hideLoading();\\n            return \\\"toast://æ³¨å†Œå¤±è´¥\\\";\\n        }\\n\\n    }),\\n    col_type: \\\"text_center_1\\\",\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"å·¥å…·\",\"path\":\"utils\",\"rule\":\"js:\\nfunction Color(text, color) {\\n    return text.toString().fontcolor(color);\\n}\\n\\nfunction HtmlTag(tag, text) {\\n    return \\\"<\\\" + tag + \\\">\\\" + text + \\\"</\\\" + tag + \\\">\\\";\\n}\\n\\nfunction Rich(text) {\\n    return \\\"â€œâ€œâ€â€\\\" + text;\\n}\\n\\nfunction Small(text) {\\n    return HtmlTag(\\\"small\\\", text);\\n}\\n\\nfunction removeFileExtension(fileName) {\\n    var lastIndex = fileName.lastIndexOf(\\\".\\\");\\n    if (lastIndex === -1) { // å¦‚æœæ–‡ä»¶åæ²¡æœ‰æ‰©å±•åï¼Œåˆ™è¿”å›åŸå§‹æ–‡ä»¶å\\n        return fileName;\\n    }\\n    return fileName.substr(0, lastIndex);\\n}\\n\\nfunction GetDirCn(ext){\\n    let name='';\\n    switch(ext){\\n        case 'RULE':\\n          name='å°ç¨‹åº';\\n          break;\\n        case 'JS':\\n          name='ç½‘é¡µæ’ä»¶';\\n          break;\\n        case 'SET':\\n          name='è§„åˆ™åˆé›†';\\n          break;\\n        case 'HTML':\\n          name='é™æ€ç½‘é¡µ';\\n          break;\\n        case 'JSON':\\n          name='jsonæ–‡ä»¶';\\n          break;\\n        case 'TXT':\\n          name='æ–‡æœ¬æ–‡ä»¶';\\n          break;\\n        default:\\n          name='å…¶ä»–'\\n    }\\n    return name\\n}\\n\\n$.exports = {\\n    Color: Color,\\n    HtmlTag: HtmlTag,\\n    Rich: Rich,\\n    Small: Small,\\n    GetDirCn:GetDirCn,\\n    removeFileExtension: removeFileExtension\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"ç›®å½•ç»“æ„\",\"path\":\"directoryEnum.json\",\"rule\":\"{\\n    \\\"RULE\\\": \\\"rules/\\\",\\n    \\\"SET\\\":\\\"compilations/\\\",\\n    \\\"HTML\\\": \\\"html/\\\",\\n    \\\"JS\\\":\\\"js/\\\",\\n    \\\"JSON\\\":\\\"json/\\\",\\n    \\\"TXT\\\":\\\"txt/\\\"\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"è§„åˆ™åˆ—è¡¨\",\"path\":\"ruleList\",\"rule\":\"js:\\nconst GithubAPI = $.require(\\\"GithubAPI?rule=Githubä»“åº“\\\");\\nconst dirEnum = $.require(\\\"directoryEnum.json?rule=Githubä»“åº“\\\");\\nconst utils = $.require(\\\"utils\\\");\\n\\n\\naddListener(\\\"onClose\\\", () => {\\n    clearMyVar(\\\"typeview\\\");\\n    clearMyVar(\\\"listCache\\\");\\n    clearMyVar(\\\"indexCache\\\");\\n});\\n\\naddListener(\\\"onRefresh\\\", () => {\\n    clearMyVar(\\\"listCache\\\");\\n    clearMyVar(\\\"indexCache\\\");\\n});\\nlet cls = [];\\nlet type = Object.keys(dirEnum);\\nlet selType = getMyVar(\\\"typeview\\\", type[0]);\\nfor (let it of type) {\\n    let isType = it === selType;\\n    cls.push({\\n        title: isType ? \\\"â€œâ€œ\\\" + utils.GetDirCn(it) + \\\"â€â€\\\" : utils.GetDirCn(it),\\n        url: $(\\\"#noLoading#\\\").lazyRule((it, isType) => {\\n            if (isType) {\\n                return \\\"toast://å·²ç»æ˜¯å½“å‰ç›®å½•\\\";\\n            }\\n            putMyVar(\\\"typeview\\\", it);\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        }, it, isType),\\n        col_type: \\\"scroll_button\\\",\\n    });\\n}\\ncls.push({\\n    title: \\\"æ­£åœ¨åŠ è½½...\\\",\\n    url: \\\"hiker://empty\\\",\\n    col_type: \\\"text_center_1\\\",\\n    extra: {\\n        id: \\\"Githubloading\\\",\\n        lineVisible: false\\n    }\\n});\\nsetPreResult(cls);\\nlet listCache = storage0.getMyVar(\\\"listCache\\\", {});\\nlet indexCache = storage0.getMyVar(\\\"indexCache\\\", {});\\nlet d = [];\\n\\n\\nlet indexData = [];\\nif (selType === \\\"RULE\\\") {\\n    indexData = [];\\n    if (!indexCache.rules) {\\n        try {\\n            let indexObj = GithubAPI.getContents(MY_PARAMS.repo, \\\"manifest.json\\\");\\n            if (indexObj.sha) {\\n                indexObj = JSON.parse(base64Decode(indexObj.content));\\n                indexData = indexObj.rules;\\n                storage0.putMyVar(\\\"indexCache\\\", indexObj);\\n            }\\n        } catch (e) {\\n            log(\\\"æ‘˜è¦è·å–å¤±è´¥ï¼š\\\" + e.toString());\\n        }\\n    } else {\\n        indexData = indexCache.rules;\\n    }\\n}\\n\\nfunction getInfo(item) {\\n    let obj = {\\n        col_type: \\\"icon_2_round\\\",\\n    };\\n    if (selType === \\\"RULE\\\") {\\n        obj.title = utils.removeFileExtension(item.name);\\n        let indexContent = indexData.find(v => v.title == obj.title) || {};\\n        obj.pic_url = indexContent.icon;\\n        obj.url = \\\"rule://\\\" + base64Encode(\\\"ï¿¥home_rule_urlï¿¥\\\" +getItem('raw_proxy','')+ item.download_url);\\n    } else if (selType === \\\"SET\\\") {\\n        obj.title = utils.removeFileExtension(item.name);\\n        obj.pic_url = \\\"hiker://images/rule_type_read\\\";\\n        obj.url = \\\"rule://\\\" + base64Encode(\\\"ï¿¥home_rule_urlï¿¥\\\"+getItem('raw_proxy','') + item.download_url);\\n    }else if ([\\\"HTML\\\",\\\"JSON\\\",\\\"JS\\\",\\\"TXT\\\"].includes(selType)) {\\n        obj.title = item.name;\\n        obj.pic_url = \\\"hiker://images/rule_type_read\\\";\\n        obj.url = $('#noLoading#').lazyRule((item)=>{\\n            let rawUrl=getItem('raw_proxy','') + item.download_url;\\n            copy(rawUrl);\\n            return rawUrl\\n        },item)\\n    }\\n    \\n    return obj;\\n}\\n\\nfunction setManage(obj, item) {\\n    obj.url = $([\\\"åˆ é™¤\\\", \\\"å¤åˆ¶åˆ†äº«é“¾æ¥\\\", \\\"å¯¼å…¥\\\"]).select((url, sha, name, path) => {\\n        if (input === \\\"å¤åˆ¶åˆ†äº«é“¾æ¥\\\") {\\n            return \\\"copy://æµ·é˜”è§†ç•Œè§„åˆ™ã€\\\" + name + \\\"ã€‘ï¿¥home_rule_urlï¿¥\\\" + url;\\n        } else if (input === \\\"å¯¼å…¥\\\") {\\n            return \\\"rule://\\\" + base64Encode(\\\"ï¿¥home_rule_urlï¿¥\\\" + url);\\n        } else {\\n            return $(\\\"ç¡®è®¤ä»ä»“åº“åˆ é™¤è¯¥åˆ†äº«:\\\" + name).confirm((path, sha) => {\\n                let user = storage0.getItem(\\\"user\\\", \\\"\\\");\\n                showLoading(\\\"æ­£åœ¨åˆ é™¤\\\");\\n                const GithubAPI = $.require(\\\"GithubAPI?rule=Githubä»“åº“\\\");\\n                try {\\n                    let res = GithubAPI.deleteFile(user.repo, user.token, path, sha);                    \\n                    if (res) {\\n                        java.lang.Thread.sleep(2650);\\n                        clearMyVar(\\\"listCache\\\");\\n                        refreshPage(false);\\n                        hideLoading();\\n                        return \\\"toast://åˆ é™¤æˆåŠŸ,æœåŠ¡å™¨åˆ é™¤ä¼šæœ‰ä¸€å®šå»¶è¿Ÿ\\\";\\n                    }\\n                    hideLoading();\\n                    return \\\"toast://åˆ é™¤å¤±è´¥\\\";\\n                } catch (e) {\\n                    hideLoading();\\n                    return \\\"toast://åˆ é™¤å¤±è´¥:\\\" + e.toString();\\n                }\\n            }, path, sha);\\n        }\\n    }, (getItem('raw_proxy','')+item.download_url), item.sha, item.name, item.path);\\n    return obj;\\n}\\ntry {\\n    let list = [];\\n    if (listCache[selType] === void 0) {\\n        list = GithubAPI.getContents(MY_PARAMS.repo, dirEnum[selType], (e) => {\\n            if ([\\\"This repository is empty.\\\", \\\"Not Found\\\"].includes(e.message)) {\\n                return [];\\n            } else {\\n                throw new Error(e.message);\\n            }\\n        });\\n        list = list.filter(v => v.type === \\\"file\\\");\\n        listCache[selType] = list || [];\\n\\n        storage0.putMyVar(\\\"listCache\\\", listCache);\\n    } else {\\n        list = listCache[selType];\\n    }\\n    if (!list.length) {\\n        d.push({\\n            title: \\\"â€œâ€œâ€â€\\\" + \\\"ä»“åº“æ˜¯ç©ºçš„å“¦\\\".small().fontcolor(\\\"grey\\\"),\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_center_1\\\"\\n        });\\n    } else {\\n        if(MY_PARAMS.isDev){\\n            list.forEach(it => d.push(setManage(getInfo(it), it)));\\n        }else{\\n            list.forEach(it => d.push(getInfo(it)));\\n        }\\n    }\\n    setResult(d);\\n} catch (e) {\\n    setResult([{\\n        title: \\\"â€œâ€œERRORâ€â€\\\",\\n        desc: e.toString(),\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\"\\n    }]);\\n} finally {\\n    deleteItem(\\\"Githubloading\\\");\\n}\"},{\"col_type\":\"text_1\",\"name\":\"è®¾ç½®ä¸­å¿ƒ\",\"path\":\"settings\",\"rule\":\"js:\\nsetPageTitle(\\\"è®¾ç½®\\\");\\nvar data = [];\\n\\ndata.push({\\n    col_type: \\\"line_blank\\\"\\n});\\nlet user = storage0.getItem(\\\"user\\\", {});\\n\\n\\ndata.push({\\n    title: \\\"å¤´åƒ\\\",\\n    desc: user.avatar || \\\"hiker://images/icon_account\\\",\\n    url: $(user.avatar || \\\"\\\", \\\"è¾“å…¥å¤´åƒåœ°å€\\\").input((user) => {\\n        if ($.require(\\\"registry\\\").setDevInfo(user.name, {\\n                avatar: input\\n            })) {\\n            user.avatar = input;\\n            storage0.setItem(\\\"user\\\", user);\\n            refreshPage();\\n            return \\\"toast://ä¿®æ”¹æˆåŠŸ\\\";\\n        } else {\\n            return \\\"toast://ä¿®æ”¹å¤±è´¥\\\";\\n        }\\n    }, user),\\n    extra: \\\"\\\",\\n    col_type: \\\"text_1\\\"\\n});\\n\\nlet raw_proxy=getItem('raw_proxy','https://gh-proxy.com/');\\ndata.push({\\n    title: \\\"è§„åˆ™å¯¼å…¥ä»£ç†æ¥å£\\\",\\n    desc: raw_proxy,\\n    url: $(raw_proxy, \\\"è¾“å…¥è§„åˆ™å¯¼å…¥ä»£ç†æ¥å£\\\").input(() => {\\n        setItem('raw_proxy',input);\\n        refreshPage();\\n        return 'hiker://empty'\\n    }),\\n    extra: {},\\n    col_type: \\\"text_1\\\"\\n});\\n\\nlet guest_token=getItem('guest_token','');\\ndata.push({\\n    title: \\\"è®¿é—®Tokenè®¾ç½®\\\",\\n    desc: guest_token,\\n    url: $(guest_token, \\\"è¾“å…¥è®¿é—®Token\\\").input(() => {\\n        setItem('guest_token',input);\\n        refreshPage();\\n        return 'hiker://empty'\\n    }),\\n    extra: {},\\n    col_type: \\\"text_1\\\"\\n});\\n\\ndata.push({\\n    col_type: \\\"line_blank\\\"\\n});\\ndata.push({\\n    title: \\\"æ˜µç§°\\\",\\n    desc: user.name,\\n    url: \\\"hiker://empty\\\",\\n    col_type: \\\"text_1\\\"\\n});\\ndata.push({\\n    title: \\\"ä»“åº“\\\",\\n    desc: user.repo,\\n    url: \\\"hiker://empty\\\",\\n    col_type: \\\"text_1\\\"\\n});\\ndata.push({\\n    title: \\\"TOKEN\\\",\\n    desc: user.token,\\n    url: $('åŒæ­¥è®¾ç½®ä¸ºè®¿é—®Token?').confirm((token)=>{\\n        setItem('guest_token',token);\\n        refreshPage();\\n        return 'toast://åŒæ­¥æˆåŠŸ'\\n    },user.token),\\n    col_type: \\\"text_1\\\"\\n});\\ndata.push({\\n    col_type: \\\"line_blank\\\"\\n});\\n\\n\\ndata.push({\\n    title: \\\"æäº¤äº‘ä»“åº“è§„åˆ™\\\",\\n    url: \\\"copy://$eyJuYW1lIjoiR2l0aHVi5LuT5bqTIiwianMiOiJyZXR1cm4gJC5yZXF1aXJlKFwic3VibWl0P3J1bGU9R2l0aHVi5LuT5bqTXCIpKE1ZX0FDQ09VTlQsIE1ZX1BBU1NXT1JELCBNWV9SVUxFLCBNWV9FWFRSQSk7In0=$a@import=js:$.require('import?rule=ä»“åº“æäº¤ç®¡ç†')(input)\\\",\\n    col_type: \\\"text_1\\\"\\n});\\n\\ndata.push({\\n    title: \\\"åŒæ­¥æäº¤äº‘ä»“åº“è´¦å·å¯†ç \\\",\\n    url: \\\"hiker://page/password?rule=ä»“åº“æäº¤ç®¡ç†\\\",\\n    col_type: \\\"text_1\\\",\\n    extra: {\\n        name: MY_RULE.title,\\n        preinstall: {\\n            user: user.repo,\\n            password: user.token,\\n            extra: \\\"\\\"\\n        }\\n    }\\n});\\ndata.push({\\n    col_type: \\\"line_blank\\\"\\n});\\n\\n\\ndata.push({\\n    title: \\\"é€€å‡ºç™»å½•\\\",\\n    url: $(\\\"ç¡®è®¤é€€å‡ºç™»å½•?\\\").confirm(f => {\\n        clearItem(\\\"user\\\");\\n        back();\\n        return \\\"toast://å·²é€€å‡º\\\";\\n    }),\\n    col_type: \\\"text_center_1\\\"\\n});\\ndata.push({\\n    col_type: \\\"line_blank\\\"\\n});\\ndata.push({\\n    title: \\\"â€œâ€œæ³¨é”€è´¦å·â€â€\\\",\\n    url: $(\\\"æ˜¯å¦æ³¨é”€è´¦å·?\\\").confirm((name) => {\\n        if ($.require(\\\"registry\\\").deleteDev(name)) {\\n            back();\\n            return \\\"toast://æ³¨é”€æˆåŠŸ\\\";\\n        } else {\\n            return \\\"toast://æ³¨é”€å¤±è´¥\\\";\\n        }\\n    }, user.name),\\n    col_type: \\\"text_center_1\\\"\\n});\\nsetResult(data);\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"ç®¡ç†ç”¨æˆ·\",\"path\":\"Usermanagement\",\"rule\":\"js:\\nlet user = storage0.getItem(\\\"user\\\", \\\"\\\");\\n\\nsetPageTitle(\\\"ç®¡ç†å‘˜ï¼š\\\" + user.name);\\nconst {\\n    Color,\\n    Rich\\n} = $.require('utils');\\nlet d = [];\\naddListener(\\\"onRefresh\\\", () => $.require(\\\"registry\\\").getDeveloper(true));\\naddListener(\\\"onClose\\\", () => refreshPage());\\nlet developer = $.require(\\\"registry\\\").getDeveloper();\\nd.push({\\n    title: \\\"å¤‡ä»½\\\",\\n    url: $().lazyRule(() => {\\n        let registry = $.require(\\\"registry\\\").getRegistry();\\n        let developer = registry.content;\\n        //storage0.setItem(\\\"userDataBackup\\\", developer);\\n        writeFile('hiker://files/rules/gitHouse/userDataBackup.json', JSON.stringify(developer));\\n        return \\\"toast://å¤‡ä»½æˆåŠŸ\\\";\\n    }),\\n    col_type: \\\"text_2\\\",\\n});\\n\\nd.push({\\n    title: \\\"æ¢å¤\\\",\\n    url: $().lazyRule(() => {\\n        let backup = JSON.parse(fetch('hiker://files/rules/gitHouse/userDataBackup.json') || []);\\n        let registry = $.require(\\\"registry\\\").getRegistry();\\n        //registry.content = storage0.getItem(\\\"userDataBackup\\\", registry.content);\\n        if (backup.length > 0) {\\n            registry.content = backup;\\n        }\\n        if ($.require(\\\"registry\\\").setRegistry(registry)) {\\n            refreshPage(false);\\n            return \\\"toast://æ¢å¤æˆåŠŸ\\\";\\n        } else {\\n            return \\\"toast://æ¢å¤å¤±è´¥\\\";\\n        }\\n    }),\\n    col_type: \\\"text_2\\\",\\n});\\nlet option = getMyVar('manageoption', 'åˆ é™¤');\\n\\nfunction setTitle(title) {\\n    if (title == option) {\\n        return Rich(Color(title, '#12b668'));\\n    } else {\\n        return title\\n    }\\n}\\nlet options = [\\\"åˆ é™¤\\\", \\\"æ’åº\\\", \\\"è®¾ç½®å¤´åƒ\\\", \\\"ä¿®æ”¹ç”¨æˆ·å\\\"];\\nfor (let it of options) {\\n    d.push({\\n        title: setTitle(it),\\n        col_type: 'scroll_button',\\n        url: $('#noLoading#').lazyRule((it) => {\\n            putMyVar('manageoption', it);\\n            refreshPage();\\n            return 'hiker://empty';\\n        }, it)\\n    });\\n}\\n\\nd.push({\\n    col_type: \\\"line_blank\\\"\\n});\\nlet i = 0;\\nfor (let it of developer) {\\n    d.push({\\n        title: it.name,\\n        pic_url: it.avatar,\\n        url: $('#noLoading#').lazyRule((it, option, index) => {\\n            return $.require('adminOperate')(it, option, index);\\n        }, it, option, i++),\\n        col_type: \\\"icon_2_round\\\"\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"ç®¡ç†å‘˜æ“ä½œ\",\"path\":\"adminOperate\",\"rule\":\"js:\\n$.exports = function(user, option, index) {\\n    if (option == 'åˆ é™¤') {\\n        return $(\\\"æ˜¯å¦åˆ é™¤è¯¥ç”¨æˆ·ï¼Ÿ\\\").confirm((name) => {\\n            if ($.require(\\\"registry\\\").deleteDev(name)) {\\n                refreshPage(false);\\n                return \\\"toast://åˆ é™¤æˆåŠŸ\\\";\\n            } else {\\n                return \\\"toast://åˆ é™¤å¤±è´¥\\\";\\n            }\\n        }, user.name);\\n    } else if (option == 'è®¾ç½®å¤´åƒ') {\\n        return $(user.avatar, 'è¯·è¾“å…¥å¤´åƒé“¾æ¥').input((name) => {\\n            if ($.require(\\\"registry\\\").setDevInfo(name, {\\n                    avatar: input\\n                })) {\\n                refreshPage(false);\\n                return \\\"toast://å¤´åƒä¿®æ”¹æˆåŠŸ\\\";\\n            } else {\\n                return \\\"toast://å¤´åƒä¿®æ”¹å¤±è´¥\\\";\\n            }\\n        }, user.name);\\n    } else if (option == 'ä¿®æ”¹ç”¨æˆ·å') {\\n        return $(user.name, 'è¯·è¾“å…¥ç”¨æˆ·å').input((name) => {\\n            if ($.require(\\\"registry\\\").setDevInfo(name, {\\n                    name: input\\n                })) {\\n                refreshPage(false);\\n                return \\\"toast://ç”¨æˆ·åä¿®æ”¹æˆåŠŸ\\\";\\n            } else {\\n                return \\\"toast://ç”¨æˆ·åä¿®æ”¹å¤±è´¥\\\";\\n            }\\n        }, user.name);\\n    } else if (option == 'æ’åº') {\\n        return $(index + '', 'è¯·è¾“å…¥å¼€å‘è€…é¡ºåº').input((name) => {\\n            if ($.require(\\\"registry\\\").moveDev(name,input)) {\\n                refreshPage(false);\\n                return \\\"toast://é¡ºåºè®¾ç½®æˆåŠŸ\\\";\\n            } else {\\n                return \\\"toast://é¡ºåºè®¾ç½®å¤±è´¥\\\";\\n            }\\n        }, user.name);\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"ä¸»é¡µ\",\"path\":\"home\",\"rule\":\"js:\\nvar d = [];\\naddListener(\\\"onRefresh\\\", () => clearMyVar(\\\"developer\\\"));\\nlet developer = $.require(\\\"registry\\\").getDeveloper();\\nconst {\\n    Small,\\n    Color,\\n    Rich\\n} = $.require(\\\"utils\\\");\\nlet user = storage0.getItem(\\\"user\\\", \\\"\\\");\\nlog(user);\\nif (user) {\\n    let index = developer.findIndex(x => x.name === user.name && x.repo === user.repo);\\n    if (index > -1) {\\n        let sel = [\\\"æ›´å¤šåˆ†äº«\\\",\\\"è§„åˆ™ç®¡ç†\\\", \\\"è®¾ç½®ä¸­å¿ƒ\\\"];\\n        if ($.require(\\\"adminList.json\\\").includes(user.name)) {\\n            sel.push(\\\"ç®¡ç†ç”¨æˆ·\\\");\\n        }\\n        d.push({\\n            title: user.name,\\n            col_type: \\\"avatar\\\",\\n            pic_url: user.avatar || \\\"hiker://images/icon_setting6\\\",\\n            url: $(sel).select(() => {\\n                if (input === \\\"ç®¡ç†ç”¨æˆ·\\\") {\\n                    return \\\"hiker://page/Usermanagement#noRecordHistory##noHistory#\\\";\\n                } else if (input === \\\"è®¾ç½®ä¸­å¿ƒ\\\") {\\n                    return \\\"hiker://page/settings#noRecordHistory##noHistory#\\\";\\n                } else if(input===\\\"è§„åˆ™ç®¡ç†\\\"){\\n                    return \\\"hiker://page/ruleList#noRecordHistory##noHistory#\\\";\\n                }else if(input===\\\"æ›´å¤šåˆ†äº«\\\"){\\n                    return \\\"hiker://page/moreShare#noRecordHistory##noHistory#\\\";\\n                }\\n            }),\\n            extra: {\\n                isDev: true,\\n                repo: user.repo\\n            }\\n        });\\n    } else {\\n        clearItem(\\\"user\\\");\\n        toast(\\\"æœªæŸ¥è¯¢åˆ°æ‚¨çš„æ³¨å†Œä¿¡æ¯ï¼Œå¯èƒ½å·²ç»æ›´æ”¹æˆ–åˆ é™¤\\\");\\n        d.push({\\n            title: \\\"æ³¨å†Œ/ç™»å½•\\\",\\n            url: \\\"hiker://page/register#noRecordHistory##noHistory#\\\",\\n            col_type: \\\"text_2\\\"\\n        });\\n        d.push({\\n            title: \\\"æ¸¸å®¢è®¾ç½®\\\",\\n            url: \\\"hiker://page/guest#noRecordHistory##noHistory#\\\",\\n            col_type: \\\"text_2\\\"\\n        });\\n    }\\n} else {\\n    d.push({\\n        title: \\\"æ³¨å†Œ/ç™»å½•\\\",\\n        url: \\\"hiker://page/register#noRecordHistory##noHistory#\\\",\\n        col_type: \\\"text_2\\\"\\n    });\\n    d.push({\\n            title: \\\"æ¸¸å®¢è®¾ç½®\\\",\\n            url: \\\"hiker://page/guest#noRecordHistory##noHistory#\\\",\\n            col_type: \\\"text_2\\\"\\n    });\\n}\\nd.push({\\n    col_type: 'text_1',\\n    title: Rich(Small(\\\"ç°æœ‰ \\\" + Color(developer.length, \\\"#ff7000\\\") + \\\" åå¼€å‘è€…\\\")),\\n    url: \\\"toast://å–µå–µå–µ?\\\",\\n});\\nfor (let it of developer) {\\n    d.push({\\n        title: it.name,\\n        url: \\\"hiker://page/ruleList#noRecordHistory##noHistory#\\\",\\n        pic_url: it.avatar || \\\"hiker://images/icon_account\\\",\\n        col_type: \\\"icon_2_round\\\",\\n        extra: {\\n            repo: it.repo,\\n        }\\n    });\\n}\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"ç®¡ç†å‘˜åˆ—è¡¨\",\"path\":\"adminList.json\",\"rule\":\"[\\\"LoyDgIk\\\", \\\"é“é•¿\\\"]\"},{\"col_type\":\"movie_3\",\"name\":\"æ¸¸å®¢è®¾ç½®\",\"path\":\"guest\",\"rule\":\"js:\\nsetPageTitle('æ¸¸å®¢è®¾ç½®');\\nconst {addLabel,addConf}=$.require('commonUi');\\nlet d=[];\\naddLabel(d,'è§„åˆ™å¯¼å…¥ä»£ç†è®¾ç½®','é˜²æ­¢ä»è§„åˆ™åˆ—è¡¨ç‚¹å‡»è§„åˆ™å¼¹å‡ºç«‹å³å¯¼å…¥æŒ‰é’®ç”±äºè¢«å¢™å¯¼å…¥æ— ååº”');\\naddConf(d,'è¯·è¾“å…¥è§„åˆ™å¯¼å…¥ä»£ç†æ¥å£','raw_proxy','https://gh-proxy.com/');\\naddLabel(d,'è®¿é—®Tokenè®¾ç½®','å°†GitHub apiæ¥å£è¯·æ±‚æ¬¡æ•°ä»æ¯å°æ—¶60æ¬¡æå‡åˆ°5000æ¬¡ï¼Œç ´è§£è¯·æ±‚æ¬¡æ•°é™åˆ¶');\\naddConf(d,'è¯·è¾“å…¥Token','guest_token');\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"å…¬å…±é¡µé¢æ¸²æŸ“\",\"path\":\"commonUi\",\"rule\":\"js:\\nfunction addLabel(d,title,desc){\\nd.push({\\n    title:title ,\\n    url: 'hiker://empty',\\n    col_type: \\\"text_1\\\",\\n    desc: desc,\\n});\\n    \\n}\\n\\nfunction addConf(d,tips,key,value){\\nd.push({\\n    title:'ä¿å­˜',\\n    desc:tips,\\n    col_type:'input',\\n    url:$.toString((key)=>{\\n     setItem(key,input);\\n     return 'toast://ä¿å­˜æˆåŠŸ'\\n    },key),\\n    extra:{\\n     type:'textarea',\\n     textSize: 11,\\n     //highlight:1,\\n     height: -1,       defaultValue:getItem(key,value||''),\\n     onChange:`putMyVar('${key}',input)`\\n }\\n    \\n});\\n}\\n\\n$.exports = {\\n    addLabel:addLabel,\\n    addConf: addConf,\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"æ›´å¤šåˆ†äº«\",\"path\":\"moreShare\",\"rule\":\"js:\\naddListener('onClose', $.toString(()=>{\\n        clearVar(\\\"house.upload_code\\\");\\n}));\\nconst {color,small,api, getFile} = $.require(\\\"hiker://page/utiliy?rule=é“é•¿ä»“åº“Pro\\\");\\nlet d = [];\\nlet file_type = [{name:'é™æ€æ–‡ä»¶',value:'html'},{name:'ç½‘é¡µæ’ä»¶',value:'js_url'},{name:'ä¸»é¡µé…ç½®',value:'config'}]; //ä¸Šä¼ ç±»å‹\\nlet file_redirect = [{name:'æœ¬åœ°',value:'false'},{name:'ç›´é“¾302',value:'true'}]; //æ˜¯å¦é‡å®šå‘\\nlet file_ua = [{name:'ç”µè„‘',value:'pc'},{name:'æ‰‹æœº',value:'mobile'}];\\nlet file_type_title = file_type.map((item) => {\\n    let name = getItem('house.file_type','é™æ€æ–‡ä»¶');\\n    if(item.name===name){\\n        return 'ğŸ‘‰'+item.name;\\n    }else{\\n        return item.name;\\n    }\\n});\\nlet file_redirect_title = file_redirect.map((item) => {\\n    let name = getItem('house.file_redirect','æœ¬åœ°');\\n    if(item.name===name){\\n        return 'ğŸ‘‰'+item.name;\\n    }else{\\n        return item.name;\\n    }\\n});\\nlet file_ua_title = file_ua.map((item) => {\\n    let name = getItem('house.file_ua','ç”µè„‘');\\n    if(item.name===name){\\n        return 'ğŸ‘‰'+item.name;\\n    }else{\\n        return item.name;\\n    }\\n});\\nd.push({\\n    title: 'è·å–',\\n    desc: \\\"æ–‡ä»¶è·¯å¾„,æ”¯æŒhiker,file,http,ä¸»é¢˜\\\",\\n    extra: {\\n        onChange: \\\"putVar('house.web_url',input)\\\",\\n        titleVisible: true,\\n        id:'filePath',\\n        defaultValue:getVar('house.web_url')\\n    },\\n    url:$.toString(() => {\\n        let input = getVar('house.web_url','');\\n        if(input.length<2){\\n            return 'toast://é“¾æ¥ä¸å¯ä»¥ä¸ºç©º'\\n        } else if(/^hiker:|^file:|^http:|^https:|^\\\\/storage\\\\/|^\\\\/sdcard\\\\//.test(input)){\\n            if(/^\\\\/storage\\\\/|^\\\\/sdcard\\\\//.test(input)){\\n                input = 'file://'+input;\\n            }\\n            log('æ­£å¸¸é“¾æ¥:'+input);\\n            let ua = getItem('house.file_ua')==='ç”µè„‘'?'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Safari/537.36':'Mozilla/5.0 (Linux; Android 9; MI 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Mobile Safari/537.36';\\n            let web_url_arr = input.split(';');\\n            let web_url = web_url_arr[0];\\n            let headers = {\\n                'Referer':'https://blog.csdn.net',\\n                'User-Agent':ua,\\n                'Accept':'application/json, text/javascript, */*; q=0.01',\\n                'Accept-Language':'zh-CN',\\n            };\\n            if(web_url_arr.length>=3&&web_url_arr[2].length>2){ //è®¾ç½®ç¼–ç \\n                headers['content-type'] = 'charset='+web_url_arr[2].toUpperCase();\\n            }\\n            let params = {headers:headers,withHeaders:false,redirect:false};\\n            if(web_url_arr.length>=2&&web_url_arr[1].length>2){ // è®¾ç½®è¯·æ±‚æ–¹æ³•\\n                params['method'] = web_url_arr[1].toUpperCase();\\n            }\\n            log('å¼€å§‹è·å–æºç ');\\n            try {\\n                /*\\n                requestAsync(web_url,params,function (key,code) {\\n                    let back_code = code;\\n                    if(back_code.length>20){\\n                        putVar('house.upload_code',back_code);\\n                        refreshPage(true);\\n                        return 'toast://æºç å·²è·å–,å¹¶éƒ¨åˆ†æ’å…¥åˆ°æ–‡æœ¬åŒºåŸŸ'\\n                    }else{\\n                        return 'toast://é”™è¯¯ï¼Œæœ¬æ¬¡è·å–åˆ°ç©ºæ–‡æœ¬ï¼Œç–‘ä¼¼ä½ æ²¡æœ‰æ­¤æ–‡ä»¶!';\\n                    }\\n                });\\n                */\\n                let back_code = getItem('house.file_ua')==='ç”µè„‘'?fetch(web_url,params):request(web_url,params);\\n                if(back_code.length>20){\\n                    putVar('house.upload_code',back_code);\\n                    refreshPage(true);\\n                    return 'toast://æºç å·²è·å–,å¹¶éƒ¨åˆ†æ’å…¥åˆ°æ–‡æœ¬åŒºåŸŸ'\\n                }else{\\n                    return 'toast://é”™è¯¯ï¼Œæœ¬æ¬¡è·å–åˆ°ç©ºæ–‡æœ¬ï¼Œç–‘ä¼¼ä½ æ²¡æœ‰æ­¤æ–‡ä»¶!';\\n                }\\n            }catch (e) {\\n                log(e.message);\\n                return 'toast://å‘ç”Ÿäº†é”™è¯¯:\\\\n'+e.message;\\n            }\\n        }else if(/ä¸»é¢˜ï¿¥|å…ƒç´ ï¿¥/.test(input)){\\n            log('ä¸»é¢˜é“¾æ¥');\\n            let web_url_arr = input.split('ï¿¥');\\n            let web_url = web_url_arr[web_url_arr.length-1];\\n            let back_code = parsePaste(web_url);\\n            if(back_code.length>20) {\\n                putVar('house.upload_code',back_code);\\n                refreshPage(true);\\n                return 'toast://æºç å·²è·å–,å¹¶éƒ¨åˆ†æ’å…¥åˆ°æ–‡æœ¬åŒºåŸŸ'\\n            }else{\\n                return 'toast://é”™è¯¯ï¼Œæœ¬æ¬¡è·å–è¿”å›ä¸º:\\\\n'+back_code;\\n            }\\n        }else{\\n            return 'toast://éæ³•é“¾æ¥:\\\\n'+getVar('house.web_url');\\n        }\\n    }),\\n    col_type: \\\"input\\\"\\n});\\nd.push({\\n    title: \\\"é€‰æ‹©æ–‡ä»¶è·¯å¾„\\\",\\n    url:$('#noLoading#').lazyRule(()=>{\\n        let fp=config.lib.fileSelect;\\n        let f=$.rc(fp);\\n        return f.fileSelectionUri({\\n            callback: $.toString(() => {\\n                let target = findItem(\\\"filePath\\\").extra;\\n                updateItem(\\\"filePath\\\", {\\n                    extra: Object.assign(target, {\\n                        defaultValue: PATH\\n                    })\\n                });\\n                putVar('house.web_url',PATH);\\n                return true;\\n            }),\\n            onClickType:'confirm',\\n            fileType: \\\".js|.txt|.hiker|.json|.html\\\",\\n            pattern: 0,\\n            requireUrl:fp,\\n            initialPath:getPath('hiker://files/rules/dzHouse/').slice(7),\\n            memory:'true',\\n        });\\n    }),\\n    col_type: \\\"text_center_1\\\",\\n});\\nd.push({\\n    title:'ä¸Šä¼ ç±»å‹',\\n    desc:'ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹,å½“å‰ä¸º:'+color(getItem('house.file_type','é™æ€æ–‡ä»¶'),'#ff7000'),\\n    col_type:'text_1',\\n    url:$(file_type_title,2).select(() => {\\n        setItem('house.file_type',input.replace('ğŸ‘‰',''));\\n        refreshPage(true);\\n        return 'toast://ä½ é€‰æ‹©äº†:'+input;\\n    })\\n});\\n\\nd.push({\\n    title:'æ–‡ä»¶å®šä½',\\n    desc:'æ–‡ä»¶æ˜¯å¦å±äºé‡å®šå‘,å½“å‰ä¸º:'+color(getItem('house.file_redirect','æœ¬åœ°'),'#ff7000'),\\n    col_type:'text_1',\\n    url:$(file_redirect_title,2).select(() => {\\n        setItem('house.file_redirect',input.replace('ğŸ‘‰',''));\\n        refreshPage(true);\\n        return 'toast://ä½ é€‰æ‹©äº†:'+input;\\n    })\\n});\\n\\nd.push({\\n    title:'è®¾å¤‡UA',\\n    desc:'å‘èµ·ç½‘é¡µè¯·æ±‚å¤´æ ‡è¯†,å½“å‰ä¸º:'+color(getItem('house.file_ua','ç”µè„‘'),'#ff7000'),\\n    col_type:'text_1',\\n    url:$(file_ua_title,2).select(() => {\\n        setItem('house.file_ua',input.replace('ğŸ‘‰',''));\\n        refreshPage(true);\\n        return 'toast://ä½ é€‰æ‹©äº†:'+input;\\n    })\\n});\\nfunction compare(name) {\\n    return function(item) {\\n        return item.name === name;\\n    }\\n}\\nd.push({\\n    title:'ğŸ—„ï¸ç¯å¢ƒ',\\n    col_type:'flex_button',\\n    url:$().lazyRule((file_type,compare)=>{\\n        log('æŸ¥çœ‹ç¯å¢ƒå˜é‡');\\n        try {\\n            let up_code = getVar('house.upload_code','');\\n            let ftype =  file_type.filter(compare(getItem('house.file_type','é™æ€æ–‡ä»¶')))[0].value;\\n            let redirect = getItem('house.file_redirect','æœ¬åœ°')!=='æœ¬åœ°';\\n            let code = !redirect?up_code:input;\\n            let env = {\\n                web_url:getVar('house.web_url',''),\\n                device:getItem('house.file_ua','ç”µè„‘'),\\n                ftype:ftype||\\\"\\\",\\n                redirect:redirect,\\n                code:code.substring(0,40)||\\\"\\\",\\n            }\\n            log(env);\\n            return 'toast://'+JSON.stringify(env);\\n            // alert(JSON.stringify(env));\\n        }catch (e) {\\n            return 'toast://'+e.message;\\n            // alert(e.message);\\n        }\\n    },file_type,compare)\\n});\\n\\nd.push({\\n    title:'ğŸ“ƒæ•™ç¨‹',\\n    col_type:'flex_button',\\n    url:$().x5Rule(()=>{\\n        let msg = 'æ¬¢è¿ä½¿ç”¨å¼€å‘è€…æ›´å¤šåˆ†äº«å·¥å…·\\\\n1.è¾“å…¥ç½‘å€ä¸ºæœ¬åœ°æ–‡ä»¶è·¯å¾„,hiker://æˆ–è€…file://å¼€å¤´\\\\n2.ç‚¹å‡»ç½‘å€è¾“å…¥æ åé¢çš„æŒ‰é’®\\\\n3.çœ‹æ–‡æœ¬é¢„è§ˆåŒºæ˜¯å¦æ­£ç¡®\\\\n4.ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æäº¤åˆ°ä»“åº“';\\n        alert(msg);\\n    })\\n});\\n\\nd.push({\\n    title:'ğŸ—‘ï¸æ¸…ç©º',\\n    col_type:'flex_button',\\n    url:$().lazyRule(()=>{\\n        clearVar('house.upload_code');\\n        refreshPage(true);\\n        return 'toast://å·²æ¸…é™¤é¢„è§ˆåŒºåŸŸå†…å®¹'\\n    })\\n});\\n\\nd.push({\\n    title:'ğŸ“²ç¤ºä¾‹',\\n    col_type:'flex_button',\\n    url:$().lazyRule(()=>{\\n        let demo_code = getItem('house.demo','0');\\n        if(demo_code=='0'){\\n            putVar('house.web_url','hiker://files/rules/dzHouse/html/èµ„æºç½‘ä¹¦ç­¾.html');\\n            demo_code = parseInt(demo_code)+1;\\n            setItem('house.demo',demo_code+'');\\n        }else{\\n            putVar('house.web_url','file:///storage/emulated/0/Android/data/com.example.hikerview/files/Documents/rules/dzHouse/html/èµ„æºç½‘ä¹¦ç­¾.html');\\n            setItem('house.demo','0');\\n        }\\n        refreshPage(true);\\n        return 'toast://å·²è®¾ç½®ç¤ºä¾‹åœ°å€'\\n    })\\n});\\n\\nd.push({\\n    title:'ğŸ“¤ä¸Šä¼ ',\\n    col_type:'flex_button',\\n    url:$().lazyRule((file_type) =>{\\n        function compare(name) {\\n            return function(item) {\\n                return item.name === name;\\n            }\\n        }\\n        const {getNowFormatDate}=$.require(\\\"hiker://page/utiliy?rule=é“é•¿ä»“åº“Pro\\\");\\n        let up_code = getVar('house.upload_code','');\\n        if(up_code.length < 2){\\n            return 'toast://æºç åŒºæ— å†…å®¹ï¼Œè¯·å…ˆè®¿é—®ä¸€ä¸ªé™æ€é¡µé¢'\\n        }\\n        \\n        let input = getVar('house.web_url','');\\n        let web_url = input.split(';')[0];\\n        \\n        let fileName = '';\\n        if(/^hiker:|^file:|^http:|^https:|^\\\\/storage\\\\/|^\\\\/sdcard\\\\//.test(web_url)){\\n            fileName = web_url.split('/')[web_url.split('/').length-1];\\n        }else if(/ä¸»é¢˜ï¿¥|å…ƒç´ ï¿¥/.test(input)){\\n            let bkarr = up_code.split('ï¿¥');\\n            if(bkarr.length<3){\\n                return 'toast://äº‘å‰ªè´´æ¿å†…å®¹æœ‰è¯¯'\\n            }\\n            switch (bkarr[1]) {\\n                case 'my_home_theme':\\n                    fileName = up_code.split('ã€Œ')[1].split('ã€')[0];\\n                    break;\\n                case 'my_home_single':\\n                    fileName = up_code.split('ã€Œ')[1].split('ã€')[0];\\n                    break;\\n                case 'js_url':\\n                    fileName = up_code.split('ï¿¥')[2].split('@')[0];\\n                    break;\\n            }\\n        }else{\\n            return 'toast://é”™è¯¯ï¼Œç½‘é¡µé“¾æ¥æ— å†…å®¹!';\\n        }\\n        if(/^\\\\/storage\\\\/|^\\\\/sdcard\\\\//.test(input)){\\n           web_url = 'file://'+input;\\n        }\\n        let ua = getItem('house.file_ua')==='ç”µè„‘'?'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Safari/537.36':'Mozilla/5.0 (Linux; Android 9; MI 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Mobile Safari/537.36';\\n        let headers = {\\n            'Referer':'https://blog.csdn.net',\\n            \\\"content-type\\\": \\\"application/json\\\",\\n            'User-Agent':ua,\\n            'Accept':'application/json, text/javascript, */*; q=0.01',\\n            'Accept-Language':'zh-CN',\\n        };\\n        let toCompare = '';\\n        if(fileName.endsWith('.html')){\\n            toCompare = 'é™æ€æ–‡ä»¶';\\n        }else if(/ä¸»é¢˜/.test(fileName)){\\n            toCompare = 'ä¸»é¡µé…ç½®'\\n        }\\n        let ftype =  file_type.filter(compare(toCompare||getItem('house.file_type','é™æ€æ–‡ä»¶')))[0].value;\\n        let redirect = getItem('house.file_redirect','æœ¬åœ°')!=='æœ¬åœ°';\\n        if(redirect&&!web_url.startsWith('http')){\\n            return 'toast://ç›´é“¾302é‡å®šå‘ç½‘å€é“¾æ¥å¿…é¡»httpå¼€å¤´';\\n        }\\n        let code = !redirect?up_code:web_url;\\n        let data = {\\\"params\\\":\\n                {\\\"data\\\": {rule_name: fileName, \\\"rule_type\\\": 'æ›´å¤šåˆ†äº«', \\\"version\\\":getNowFormatDate(),\\\"rule_value\\\": code,\\n                        data_type:ftype, is_redirect:redirect,deviceUa:getItem('house.file_ua'),\\n                    },\\n                    }\\n        };\\n        //log(data);\\n        let upparams = {headers:headers,body:JSON.stringify(data),withHeaders:false,redirect:false,method:'POST'};\\n        let user = storage0.getItem(\\\"user\\\", \\\"\\\");\\n        \\n        \\n        return 'toast://'+ $.require(\\\"submit?rule=Githubä»“åº“\\\")(user.repo, user.token, web_url, null);\\n        \\n        \\n    },file_type)\\n});\\n\\nd.push({\\n    title:'é•¿æ–‡æœ¬é¢„è§ˆåŒºåŸŸ',\\n    col_type:'text_1',\\n    url:'hiker://empty',\\n    extra: {textSize: 11,lineVisible:false}\\n});\\n\\nd.push({\\n    title:getVar('house.upload_code','').substring(0,10240),\\n    col_type:'long_text',\\n    extra: {textSize: 11}\\n});\\nsetPageTitle(\\\"æ›´å¤šåˆ†äº«\\\");\\nsetResult(d);\"}]","proxy":"","icon":""}